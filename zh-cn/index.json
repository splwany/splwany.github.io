[{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ¯è¯¾ä¸­çš„è¯æ±‡æ±‡æ€»\nç¬¬ä¸€è¯¾    ä¸­æ–‡ æ—¥æ–‡     è®²æˆ ãã‚‡ã†ã˜ã‚…ï¼ˆæ•™æˆï¼‰   è¿›ä¿®ç”Ÿ ã‘ã‚“ã—ã‚…ã†ã›ã„ï¼ˆç ”ä¿®ç”Ÿï¼‰   ä¼ä¸š ããã‚‡ã†ï¼ˆä¼æ¥­ï¼‰   çˆ¶äº² ã¡ã¡ï¼ˆçˆ¶ï¼‰   ç§‘é•¿ ã‹ã¡ã‚‡ã†ï¼ˆèª²é•·ï¼‰   æ€»ç»ç†ï¼Œç¤¾é•¿ ã—ã‚ƒã¡ã‚‡ã†ï¼ˆç¤¾é•·ï¼‰   è¿æ¥ ã§ã‚€ã‹ãˆï¼ˆå‡ºè¿ãˆï¼‰   éå¸¸ï¼Œå¾ˆ ã©ã†ã‚‚   æ—…è¡Œç¤¾ ã‚Šã‚‡ã“ã†ã—ã‚ƒï¼ˆæ—…è¡Œç¤¾ï¼‰   è¯· ã©ã†ã   æˆ‘æ‰è¦ï¼ˆè¯·æ‚¨~ï¼‰ ã“ã¡ã‚‰ã“ã   æ˜¯ï¼ˆè¿™æ ·ï¼‰ ãã†ã§ã™   ä¸æ˜¯ ã¡ãŒã„ã¾ã™ï¼ˆé•ã„ã¾ã™ï¼‰   ä¸çŸ¥é“ ã‚ã‹ã‚Šã¾ã›ã‚“ï¼ˆåˆ†ã‹ã‚Šã¾ã›ã‚“ï¼‰   è¯· ã©ã†ã    ç¬¬äºŒè¯¾    ä¸­æ–‡ æ—¥æ–‡   ","date":"2021-11-25","permalink":"/zh-cn/posts/japanese/vocabulary/","series":["æ—¥è¯­"],"tags":[],"title":"æ ‡æ—¥è¯æ±‡è¡¨"},{"categories":["ç»ƒä¹ "],"content":"å­—èŠ‚äºŒç»´ç è·³è½¬åˆ°æ­¤\næ¥çœ‹æˆ‘æ¥çœ‹æˆ‘ å­©å­æƒ³ä¸­å¥–~~~ \r é¡ºä¾¿æ±‚å¼€å¥– å•Šå•Šå•Šå•Šå•Šå•Šå•Š~~~ \r","date":"2021-10-22","permalink":"/zh-cn/posts/webnotes/bytedance/","series":["å‰ç«¯"],"tags":[],"title":"æ±‚æ±‚äº†ï¼Œå¼€å¥–å§ï¼Œå­©å­æ€¥æ­»äº†ğŸ¤£"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"éšæœºç”Ÿæˆ HEX åå…­è¿›åˆ¶é¢œè‰²ï¼Œä»¥åŠæ§åˆ¶å°æ‰“å°å½©è‰²æ–‡å­—å’Œæ ·å¼æ•ˆæœ\néšæœºç”Ÿæˆ HEX åå…­è¿›åˆ¶é¢œè‰² // RGB è½¬ HEX function rgb2hex(r, g, b) { return `#${((1 \u0026lt;\u0026lt; 24) + (r \u0026lt;\u0026lt; 16) + (g \u0026lt;\u0026lt; 8) + b).toString(16).slice(1)}`; } // ç”Ÿæˆ n ä¸ª æœ€å¤§å€¼ä¸è¶…è¿‡ max çš„æ•´æ•° function randomInt(max = 256, n = 3) { return Array(n).fill().map(() =\u0026gt; Math.floor(Math.random() * max)); } // ç”Ÿæˆ HEX æ ¼å¼çš„éšæœºè‰² function randomHexColor() { return rgb2hex(...randomInt()); } æ‰©å±• String åŸå‹å¯¹è±¡ä¸Šçš„æ–¹æ³•ï¼Œå®ç°æ§åˆ¶å°æ‰“å°å¸¦æ ·å¼çš„æ–‡å­— // é¢œè‰²å­—å…¸ const colors = { black: 0, red: 1, green: 2, yellow: 3, blue: 4, purple: 5, deepGreen: 6, white: 7 }; // æ ·å¼å­—å…¸ const styles = { bolder: 1, // åŠ ç²—  italic: 3, // æ–œä½“  baseline: 4, // ä¸‹åˆ’çº¿  flash: 5, // é—ªçƒ  reverse: 7, // åè‰²  hidden: 8 // éšè— }; // é¢œè‰²å·¥å‚å‡½æ•° function colorFactory(colorId = 7) { const modeMap = { fr: 3, // å‰æ™¯æ¨¡å¼  bg: 4 // èƒŒæ™¯æ¨¡å¼  }; return function(mode = \u0026#39;fr\u0026#39;) { return `\\x1b[${modeMap[mode]}${colorId}m` + this + \u0026#39;\\x1b[0m\u0026#39;; }; } // æ ·å¼å·¥å‚å‡½æ•° function styleFactory(styleId) { return function() { return `\\x1b[${styleId}m` + this + \u0026#39;\\x1b[0m\u0026#39;; }; } // String åŸå‹å¯¹è±¡ä¸Šæ·»åŠ é¢œè‰²å‡½æ•° Object.assign(String.prototype, Object.entries(colors).reduce((obj, [color, id]) =\u0026gt; { obj[color] = colorFactory(id); return obj; }, {})); // String åŸå‹å¯¹è±¡ä¸Šæ·»åŠ æ ·å¼å‡½æ•° Object.assign(String.prototype, Object.entries(styles).reduce((obj, [style, id]) =\u0026gt; { obj[style] = styleFactory(id); return obj; }, {})); æµ‹è¯•æ•ˆæœ\nfor (let i = 0; i \u0026lt; 5; ++i) { console.log(`éšæœºé¢œè‰²${i + 1}:`.yellow(\u0026#39;bg\u0026#39;).black(), randomHexColor().bolder().italic().baseline().blue()); } \r","date":"2021-10-17","permalink":"/zh-cn/posts/javascripts/randomcolor_consolecolor/","series":["å‰ç«¯"],"tags":["JavaScript"],"title":"ç”Ÿæˆéšæœºè‰²ä»¥åŠæ§åˆ¶å°å½©è‰²"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å•è¡Œä»£ç èƒ½å®ç°å“ªäº›åŠŸèƒ½\n1. è§£æ url ä¸­çš„å‚æ•° const parseSearch = (url = window.location.href) =\u0026gt; { return url.split(\u0026#39;#\u0026#39;)[0].match(/\\?(.+)/)[1].split(\u0026#39;\u0026amp;\u0026#39;).reduce((json, item) =\u0026gt; { let [key, value] = item.split(\u0026#39;=\u0026#39;); value = decodeURI(value); if (/(^[1-9]\\d*\\.?\\d*$)|(^0\\.\\d*$)/.test(value)) value = Number(value); json[key] = value; return json; }, {}); }; const url = \u0026#39;https://www.baidu.com?num=9.25\u0026amp;q=%E4%B8%80%E4%B8%AA%E6%95%B0%E7%BB%84%E6%89%BE%E5%B3%B0%E5%80%BC+logn\u0026amp;qs=n\u0026amp;form=QBRE\u0026amp;sp=-1\u0026amp;pq=%E4%B8%80%E4%B8%AA%E6%95%B0%E7%BB%84%E6%89%BE%E5%B3%B0%E5%80%BC+lo\u0026amp;sc=0-10\u0026amp;sk=\u0026amp;cvid=45F0B8049DC64FBFA8AA20FAF7149D59#tag\u0026#39;; console.log(parseSearch(url)); 2. ç”ŸæˆéšæœºHEXé¢œè‰² const randomInt = (max, n) =\u0026gt; Array(n).fill().map(() =\u0026gt; Math.random() * max | 0); // ç”Ÿæˆä¸€ç»„éšæœºæ•´æ•° const rgbToHex = (r, g, b) =\u0026gt; \u0026#39;#\u0026#39; + ((1 \u0026lt;\u0026lt; 24) + (r \u0026lt;\u0026lt; 16) + (g \u0026lt;\u0026lt; 8) + b).toString(16).slice(1); // RGBè½¬ä¸ºåå…­è¿›åˆ¶HEXå€¼ const randomHex = () =\u0026gt; rgbToHex(...randomInt(256, 3)); // ç”ŸæˆéšæœºHEXå€¼ console.log(randomHex()); ","date":"2021-10-15","permalink":"/zh-cn/posts/javascripts/single_line_code/","series":["å‰ç«¯"],"tags":["JavaScript"],"title":"JavaScript å•è¡Œä»£ç åˆè¾‘"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ç»™å‡ºä¸€ä¸ªæ•°å­—ä»£ç é˜Ÿä¼ä¸­äººæ•°ï¼Œä»ç¬¬ä¸€ä¸ªäººå¼€å§‹æŠ¥æ•°ï¼ŒæŠ¥åˆ°5å°±æ˜¯å¹¸è¿äººï¼Œè¿™ä¸ªäººå‡ºé˜Ÿï¼Œä»ä¸‹ä¸€ä¸ªäººå¼€å§‹ç»§ç»­ä»1å¼€å§‹æŠ¥æ•°ã€‚ è¯·é—®é˜Ÿä¼æœ€åä¸€ä¸ªäººæ˜¯å¹¸è¿äººçš„æ—¶å€™æ˜¯ç¬¬å‡ ä¸ªå‡ºé˜Ÿçš„ã€‚\nfunction method(n, log = false) { let state = Array(n).fill(\u0026#39;0\u0026#39;); let count = 0; let i = 0; while (n \u0026gt; 0) { log \u0026amp;\u0026amp; console.log(\u0026#39;========================\u0026#39;); log \u0026amp;\u0026amp; console.log(`ç›®å‰: ${state.join(\u0026#39;\u0026#39;)}`); const deleteNum = Math.ceil((n - i) / 5); for (let j = i + 5; j \u0026lt;= n; j += 5) state[j - 1] = \u0026#39;x\u0026#39;; log \u0026amp;\u0026amp; console.log(`é€€å‡º${deleteNum}äºº`); const tmpI = i + 5 * deleteNum; log \u0026amp;\u0026amp; console.log(`tmpIåœç•™åœ¨${tmpI}`); i = tmpI % n === 0 ? n - 1 : tmpI % n - 1; state[i] = \u0026#39;i\u0026#39;; log \u0026amp;\u0026amp; console.log(`iå®é™…åœç•™åœ¨${i}: ${state.join(\u0026#39;\u0026#39;)}`); count += deleteNum; if (i === n - 1) return count; n -= deleteNum; state = state.filter(item =\u0026gt; item !== \u0026#39;x\u0026#39;); state.splice(i, 1); log \u0026amp;\u0026amp; console.log(`ç›®å‰ä¸€å…±é€€å‡º${count}äºº: ${state.join(\u0026#39;\u0026#39;)}`); log \u0026amp;\u0026amp; console.log(`è¿˜å‰©${n}äºº`); } } const input = 7; console.log(method(input, true)); è¾“å‡ºä¸ºï¼š\n======================== ç›®å‰: 0000000 é€€å‡º2äºº tmpIåœç•™åœ¨10 iå®é™…åœç•™åœ¨2: 00i0x00 ç›®å‰ä¸€å…±é€€å‡º2äºº: 00000 è¿˜å‰©5äºº ======================== ç›®å‰: 00000 é€€å‡º1äºº tmpIåœç•™åœ¨7 iå®é™…åœç•™åœ¨1: 0i000 ç›®å‰ä¸€å…±é€€å‡º3äºº: 0000 è¿˜å‰©4äºº ======================== ç›®å‰: 0000 é€€å‡º1äºº tmpIåœç•™åœ¨6 iå®é™…åœç•™åœ¨1: 0i00 ç›®å‰ä¸€å…±é€€å‡º4äºº: 000 è¿˜å‰©3äºº ======================== ç›®å‰: 000 é€€å‡º1äºº tmpIåœç•™åœ¨6 iå®é™…åœç•™åœ¨2: 00i 5 ","date":"2021-10-10","permalink":"/zh-cn/posts/javascripts/lucky_number/","series":["ç®—æ³•"],"tags":[],"title":"é˜Ÿå°¾å¹¸è¿ç¼–å·é—®é¢˜"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å®ç° JavaScript çš„æ·±æ‹·è´\n// é€šè¿‡ `Object` åŸå‹å¯¹è±¡ä¸Šçš„ `toString` æ–¹æ³•ï¼Œé…åˆæ­£åˆ™è¡¨è¾¾å¼çš„åˆ†ç»„åŠŸèƒ½ï¼Œè·å–æ•°æ®çš„çœŸå®ç±»å‹ // Number BigInt String Boolean Symbol Undefined Null Object Array Promise Function ç­‰ç­‰ function getType(data) { return Object.prototype.toString.call(data).match(/\\[object (\\w+)\\]/)[1]; } function deepCopy(data) { const dfs = d =\u0026gt; { const type = getType(d); if (type === \u0026#39;Array\u0026#39;) { const tmp = []; d.forEach(item =\u0026gt; { tmp.push(dfs(item)); }); return tmp; } if (type === \u0026#39;Object\u0026#39;) { // å¤åˆ¶åŸå¯¹è±¡çš„åŸå‹å¯¹è±¡  const tmp = Object.create(Object.getPrototypeOf(d)); // getOwnPropertyNames å¯ä»¥è·å¾—å½“å‰å¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼Œå³ä½¿ enumerable ä¸º false  Object.getOwnPropertyNames(d).forEach(key =\u0026gt; { // è·å–å½“å‰å±æ€§çš„é…ç½®  const discriptor = Object.getOwnPropertyDescriptor(d, key); // å°†å½“å‰å±æ€§é…ç½®ä¸­çš„ value æ”¹ä¸ºæ·±æ‹·è´åçš„å€¼  discriptor.value = dfs(discriptor.value); // åœ¨ tmp ä¸­å®šä¹‰é…ç½®  Object.defineProperty(tmp, key, discriptor); }); return tmp; } return d; } return dfs(data); } æµ‹è¯•æ•ˆæœï¼š\nconst data = { name: \u0026#39;weixin\u0026#39;, age: [27, 25] }; data.__proto__.try = function() {}; Object.defineProperty(data, \u0026#39;age\u0026#39;, {enumerable: false, writable: false}); const copiedData = deepCopy(data); console.log(\u0026#39;åŸå¯¹è±¡: \u0026#39;, data); console.log(\u0026#39;æ–°å¯¹è±¡: \u0026#39;, copiedData); ","date":"2021-09-23","permalink":"/zh-cn/posts/javascripts/deepcopy/","series":["å‰ç«¯"],"tags":[],"title":"æ·±æ‹·è´"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å®ç°ä¸€ä¸ª Message ç±»ï¼Œé‡Œé¢åŒ…å« on å’Œ dispatch æ–¹æ³•ï¼Œå®ç°æ¶ˆæ¯çš„å‘å¸ƒè®¢é˜…\nMessage ç±»çš„å®ç°å¦‚ä¸‹ class Message { constructor() { this.registered = {}; // æ³¨å†Œçš„äº‹ä»¶  this.executing = {}; // æ³¨å†Œå‰å…ˆå‘å¸ƒçš„æ¶ˆæ¯ï¼Œç­‰æ³¨å†Œçš„æ—¶å€™å…ˆæŠŠè¿™é‡Œçš„æ‰§è¡Œä¸€é  } // è®¢é˜…  on(method, fn) { if (method in this.registered) { this.registered[method].push(fn); } else { this.registered[method] = [fn]; } setImmediate(() =\u0026gt; { // ä»¥ä¸‹ä»£ç ä¼šåœ¨ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­æ‰§è¡Œï¼Œç›®çš„æ˜¯ä¸ºäº†ç­‰æ‰€æœ‰äº‹ä»¶æ³¨å†Œå®Œæ¯•  if (method in this.executing) { this.executing[method].forEach(data =\u0026gt; this.dispatch(method, data)); delete this.executing[method]; } }); } // å‘å¸ƒ  dispatch(method, data) { if (method in this.registered) { this.registered[method].forEach(fn =\u0026gt; fn(data)); } else { if (method in this.executing) { this.executing[method].push(data); } else { this.executing[method] = [data]; } } } } åŠŸèƒ½æµ‹è¯• // åˆ›å»ºä¸€ä¸ª `Message` å®ä¾‹ const message = new Message(); // å…ˆå‘å¸ƒä¸€ä¸ªæ²¡æ³¨å†Œè¿‡çš„ `hover` äº‹ä»¶ message.dispatch(\u0026#39;hover\u0026#39;, {message: \u0026#39;ç»‘å®šäº‹ä»¶å‰å°±å‘å¸ƒçš„\u0026#39;}); // æ³¨å†Œä¸€ä¸ª `click` äº‹ä»¶ message.on(\u0026#39;click\u0026#39;, data =\u0026gt; { console.log(`ç‚¹å‡»1ï¼Œæ¶ˆæ¯ï¼š${data.message}`); }); // æ³¨å†Œä¸€ä¸ª `hover` äº‹ä»¶ message.on(\u0026#39;hover\u0026#39;, data =\u0026gt; { console.log(`åˆ’è¿‡1ï¼Œæ¶ˆæ¯ï¼š${data.message}`); }); // åˆæ³¨å†Œä¸€ä¸ª `hover` äº‹ä»¶ï¼Œä¹‹åå‘å¸ƒ `hover` æ¶ˆæ¯çš„æ—¶å€™ä¼šæŒ‰æ³¨å†Œé¡ºåºä¾æ¬¡æ‰§è¡Œ message.on(\u0026#39;hover\u0026#39;, data =\u0026gt; { console.log(`åˆ’è¿‡2ï¼Œæ¶ˆæ¯ï¼š${data.message}`); }); // åˆæ³¨å†Œä¸€ä¸ª `click` äº‹ä»¶ message.on(\u0026#39;click\u0026#39;, data =\u0026gt; { console.log(`ç‚¹å‡»2ï¼Œæ¶ˆæ¯ï¼š${data.message}`); }); // æ¨¡æ‹Ÿä¸€ç§’åå‘å¸ƒäº† `click` äº‹ä»¶ setTimeout(() =\u0026gt; { message.dispatch(\u0026#39;click\u0026#39;, {message: \u0026#39;ç‚¹å‡»çš„æ¶ˆæ¯\u0026#39;}); }, 1000); // æ¨¡æ‹Ÿä¸¤ç§’åå‘å¸ƒäº† `hover` äº‹ä»¶ setTimeout(() =\u0026gt; { message.dispatch(\u0026#39;hover\u0026#39;, {message: \u0026#39;ç»‘å®šäº‹ä»¶åå‘å¸ƒçš„\u0026#39;}); }, 2000); æ‰§è¡Œç»“æœï¼š\nåˆ’è¿‡1ï¼Œæ¶ˆæ¯ï¼šç»‘å®šäº‹ä»¶å‰å°±å‘å¸ƒçš„ åˆ’è¿‡2ï¼Œæ¶ˆæ¯ï¼šç»‘å®šäº‹ä»¶å‰å°±å‘å¸ƒçš„ ç‚¹å‡»1ï¼Œæ¶ˆæ¯ï¼šç‚¹å‡»çš„æ¶ˆæ¯ ç‚¹å‡»2ï¼Œæ¶ˆæ¯ï¼šç‚¹å‡»çš„æ¶ˆæ¯ åˆ’è¿‡1ï¼Œæ¶ˆæ¯ï¼šç»‘å®šäº‹ä»¶åå‘å¸ƒçš„ åˆ’è¿‡2ï¼Œæ¶ˆæ¯ï¼šç»‘å®šäº‹ä»¶åå‘å¸ƒçš„ å…¶ä¸­ï¼Œç¬¬ä¸€è¡Œå’Œç¬¬äºŒè¡Œç«‹å³æ˜¾ç¤ºï¼›ç¬¬ä¸‰è¡Œå’Œç¬¬å››è¡Œåœ¨ä¸€ç§’åæ˜¾ç¤ºï¼›ç¬¬äº”è¡Œå’Œç¬¬å…­è¡Œåœ¨ä¸¤ç§’åæ˜¾ç¤ºã€‚\n","date":"2021-09-23","permalink":"/zh-cn/posts/javascripts/regist_dispatch/","series":["å‰ç«¯"],"tags":["å‘å¸ƒè®¢é˜…"],"title":"æ¶ˆæ¯å‘å¸ƒè®¢é˜…çš„å®ç°"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ä½¿ç”¨ CSS ç”»ä¸€ä¸ªäº”æ˜Ÿçº¢æ——\n .flag { position: relative; width: 90vw; padding-bottom: 60vw; background-color: red; transform: scale(0.8) translate(-11vw); z-index: 10000; } .star, .star::before, .star::after { position: absolute; top: 12.218847vw; left: 6.44049135vw; border: 8.55950864vw solid transparent; border-top-width: 6.21884705vw; border-bottom-width: 0; border-top-color: yellow; } .star::before, .star::after { content: \"\"; top: -6.21884705vw; left: -8.55950864vw; transform: rotate(-72deg); transform-origin: 50% 44.721359%; } .star::after { transform: rotate(72deg); } .small1 { transform: translate(15vw, -9vw) scale(0.33) rotate(-35deg); } .small2 { transform: translate(21vw, -3vw) scale(0.33) rotate(-12deg); } .small3 { transform: translate(21vw, 6vw) scale(0.33) rotate(13deg); } .small4 { transform: translate(15vw, 12vw) scale(0.33) rotate(36deg); }        ä»£ç  \u0026lt;style\u0026gt; .flag { position: relative; width: 90vw; height: 60vw; background-color: red; } .star, .star::before, .star::after { position: absolute; top: 12.218847vw; left: 6.44049135vw; border: 8.55950864vw solid transparent; border-top-width: 6.21884705vw; border-bottom-width: 0; border-top-color: yellow; } .star::before, .star::after { content: \u0026#34;\u0026#34;; top: -6.21884705vw; left: -8.55950864vw; transform: rotate(-72deg); transform-origin: 50% 44.721359%; } .star::after { transform: rotate(72deg); } .small1 { transform: translate(15vw, -9vw) scale(0.33) rotate(-35deg); } .small2 { transform: translate(21vw, -3vw) scale(0.33) rotate(-12deg); } .small3 { transform: translate(21vw, 6vw) scale(0.33) rotate(13deg); } .small4 { transform: translate(15vw, 12vw) scale(0.33) rotate(36deg); } \u0026lt;/style\u0026gt; \u0026lt;doby\u0026gt; \u0026lt;div class=\u0026#34;flag\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;star\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;star small1\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;star small2\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;star small3\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;star small4\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; ","date":"2021-09-17","permalink":"/zh-cn/posts/webnotes/chinese_flag/","series":["å‰ç«¯"],"tags":["CSS"],"title":"CSS å®ç°äº”æ˜Ÿçº¢æ——"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ç»™å®šä¸€ä¸ª Objectï¼Œå®ç°ä¸€ä¸ªä»£ç†å‡½æ•°ï¼Œä½¿å¾—å–å€¼å®‰å…¨ï¼Œä¸”åœ¨æœ«ç«¯ä½¿ç”¨å‡½æ•°è°ƒç”¨çš„æ–¹å¼ä¼ å…¥é»˜è®¤å€¼\nJavaScript å®ç° function dataProxy(data) { const dataType = typeof data; const fn = d =\u0026gt; dataType === \u0026#39;undefined\u0026#39; ? d : data; return new Proxy(fn, { get(target, property) { if (dataType === \u0026#39;undefined\u0026#39; || data === null) return dataProxy(); return dataProxy(data[property]); } }); } const data = { res: true, data: { count: 1 } }; const proxyData = dataProxy(data); console.log(proxyData.res()); console.log(proxyData.data()); console.log(proxyData.data.count()); console.log(proxyData.b.c.d(\u0026#39;è‡ªå®šä¹‰\u0026#39;)); Python å®ç° class dataProxy: def __init__(self, data=None): self._dict = data def __getattr__(self, name): if isinstance(self._dict, dict) and name in self._dict: return dataProxy(self._dict[name]) else: return dataProxy() def __call__(self, default=None): return self._dict if self._dict is not None else default data = { \u0026#39;res\u0026#39;: True, \u0026#39;data\u0026#39;: { \u0026#39;count\u0026#39;: 1 } } proxyData = dataProxy(data) print(proxyData.res()) print(proxyData.data()) print(proxyData.data.count()) print(proxyData.b.c.d(\u0026#39;è‡ªå®šä¹‰\u0026#39;)) ","date":"2021-09-14","permalink":"/zh-cn/posts/javascripts/proxy_object/","series":["å‰ç«¯"],"tags":["ç¼–ç¨‹æŠ€å·§"],"title":"ä½¿ç”¨Proxyå®ç°Objectçš„å®‰å…¨å–å€¼ï¼ˆå¦é™„ Python å†™æ³•ï¼‰"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ ¹æ®å‰åºå’Œä¸­åºåˆ—è¡¨æ„é€ ä¸€ä¸ªäºŒå‰æ ‘ï¼Œç„¶ååˆ¤æ–­äºŒå‰æ ‘æ˜¯å¦æ˜¯å¯¹ç§°çš„\ntype TreeNode = { val: any; left: TreeNode; right: TreeNode; }; function createTreeNode(val: any = null, left: TreeNode = null, right: TreeNode = null) : TreeNode { const node: TreeNode = {val, left, right}; return node; } /** * æ„é€ äºŒå‰æ ‘ * @param preArray å‰åºéå†åˆ—è¡¨ * @param inArray ä¸­åºéå†åˆ—è¡¨ * @returns äºŒå‰æ ‘æ ¹èŠ‚ç‚¹ */ function makeTree(preArray: any[], inArray: any[]) : TreeNode { if (!preArray.length) return null; const val = preArray[0]; const node = createTreeNode(val); const index = inArray.indexOf(val); node.left = makeTree(preArray.slice(1, 1 + i), inArray.slice(0, i)); node.right = makeTree(preArray.slice(i + 1), inArray.slice(i + 1)); return node; } /** * åˆ¤æ–­äºŒå‰æ ‘æ˜¯å¦ä¸ºå¯¹ç§°äºŒå‰æ ‘ * @param tree äºŒå‰æ ‘æ ¹èŠ‚ç‚¹ * @returns æ˜¯å¦ä¸ºå¯¹ç§°äºŒå‰æ ‘ */ function isSymmetricTree(tree: TreeNode) : boolean { if (!tree) return true; const dfs = function(l: TreeNode, r: TreeNode) : boolean { if (l === null \u0026amp;\u0026amp; r === null) return true; if (l \u0026amp;\u0026amp; r) { if (l.val !== r.val) return false; if (dfs(l.left, r.right) \u0026amp;\u0026amp; dfs(l.right, r.left)) return true; } return false; }; return dfs(tree.left, tree.right); } const preArray = [1, 2, 3, 2, 3]; const inArray = [3, 2, 1, 2, 3]; const tree = makeTree(preArray, inArray); console.log(isSymmetricTree(tree)); ","date":"2021-09-12","permalink":"/zh-cn/posts/javascripts/symmetric_binary_tree/","series":["ç®—æ³•"],"tags":[],"title":"åˆ¤æ–­å¯¹ç§°äºŒå‰æ ‘"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å°†æ•°ç»„æ‹å¹³ï¼Œç¬¬äºŒä¸ªå‚æ•°å®šä¹‰æ·±åº¦\n ä¸¤ç§æ–¹å¼ï¼š\n å¹¿åº¦ä¼˜å…ˆ æ·±åº¦ä¼˜å…ˆ ä¸¤ç§æ–¹å¼åœ¨ç¬¬äºŒä¸ªå‚æ•°ä¸ºè´Ÿå€¼æ—¶è¡¨ç°ä¸åŒï¼Œæ·±åº¦ä¼˜å…ˆä¼šåœ¨æœ€å¤–å±‚å¤šä¸€ç»´ï¼Œä¸»è¦æ˜¯å®ç°æ–¹å¼çš„å·®å¼‚å¯¼è‡´çš„ æ­¤å¤„çš„ä¸¤ç§ä»£ç ï¼Œæ·±åº¦ä¼˜å…ˆæ€§èƒ½æ›´å¥½ï¼Œå¹¿åº¦ä¼˜å…ˆå­˜åœ¨å†—ä½™æ“ä½œ   // å¹¿åº¦ä¼˜å…ˆ function flatten_bfs(arr, depth = 1) { let res = [...arr]; for (let i = 0; i \u0026lt; depth; i++) { const queue = res; res = []; for (const item of queue) { if (Array.isArray(item)) res.push(...item); else res.push(item); } } return res; } // æ·±åº¦ä¼˜å…ˆ function flatten_dfs(arr, depth = 1) { const res = []; const dfs = function(data, d) { if (d \u0026gt; 0 \u0026amp;\u0026amp; Array.isArray(data)) { data.forEach(item =\u0026gt; dfs(item, d - 1)); } else res.push(data); }; dfs(arr, depth + 1); return res; } const input = [1, [2, [3, 4], 5], 6, [7, 8]]; console.log(JSON.stringify(flatten_bfs(input, -1))); // [1,[2,[3,4],5],6,[7,8]] console.log(JSON.stringify(flatten_dfs(input, -1))); // [[1,[2,[3,4],5],6,[7,8]]] ","date":"2021-08-23","permalink":"/zh-cn/posts/javascripts/flatten/","series":["ç®—æ³•"],"tags":[],"title":"æ•°ç»„æ‹å¹³çš„ä¸¤ç§æ–¹å¼"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å®ç°ä¸€ä¸ªåŠ¨æ€æ”¹å˜çš„é’Ÿè¡¨\næ•ˆæœå¦‚ä¸‹  .column { display: flex; flex-direction: column; justify-content: center; align-items: center; } .container { margin: 20px 0; } .clock { position: relative; width: 40vw; height: 40vw; border-radius: 50%; border: 0.6vw solid rgb(134, 134, 134); background-color: antiquewhite; overflow: hidden; box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.144); } .time { position: absolute; top: 20%; font-size: 3.5vw; font-weight: bold; color: rgb(102, 102, 102); padding: 0.3vw; border-radius: 0.7vw; box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.349); } .plant { position: relative; width: 100%; height: 100%; border-radius: 50%; filter: drop-shadow(0.5vw 0.4vw 0.4vw rgba(0, 0, 0, 0.2)); } .plant::after { content: \"\"; position: absolute; top: calc(50% - 1vw); left: calc(50% - 1vw); width: 2vw; height: 2vw; border-radius: 50%; border: 0.35vw solid rgb(129, 129, 129); background-color: rgb(236, 236, 236); } .hour, .minute, .second { position: absolute; left: 50%; top: 50%; width: 9vw; height: 0.6vw; background-color: rgb(70, 70, 70); transform: rotate(-90deg); transform-origin: 0% 50%; } .minute { width: 15vw; height: 0.4vw; } .second { width: 17vw; height: 0.3vw; }          window.requestAnimationFrame = (function () { return ( window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function (callback) { return window.setTimeout(callback, 1000 / 60); } ); })(); window.cancelAnimationFrame = (function () { return ( window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.msCancelAnimationFrame || function (id) { window.clearTimeout(id); } ); })(); startClock(); const toggleClock = (function() { let state = true; return function() { if (state) stopClock(); else startClock(); state = !state; }; })(); function startClock() { const timeElem = document.querySelector('.time'); const clockElem = document.querySelector('.clock'); const fn = function() { updateClock(timeElem, clockElem); window.clockAnimationId = window.requestAnimationFrame(fn); }; window.clockAnimationId = window.requestAnimationFrame(fn); } function stopClock() { window.cancelAnimationFrame(window.clockAnimationId); } function updateClock(timeElem, clockElem) { const curTime = _getTime(); _setTime(timeElem, curTime); _setClock(clockElem, curTime); } function _getTime() { const date = new Date(); return date; } function _setTime(elem, time) { elem.textContent = time .toLocaleString(\"chinese\", { hour12: false }) .substr(-8, 8); } function _setClock(elem, time) { let hour = time.getHours(); hour = hour = 12 ? hour - 12 : hour; const minute = time.getMinutes(); const second = time.getSeconds(); const hourPer = hour / 12; const minutePer = minute / 60; const secondPer = second / 60; const hourRotate = 360 * hourPer + minutePer * 30 + secondPer * 0.5 - 90; const minuteRotate = 360 * minutePer + secondPer * 6 - 90; const secondRotate = 360 * secondPer - 90; const hourElem = elem.querySelector(\".hour\"); const minuteElem = elem.querySelector(\".minute\"); const secondElem = elem.querySelector(\".second\"); hourElem.style.transform = `rotate(${hourRotate}deg)`; minuteElem.style.transform = `rotate(${minuteRotate}deg)`; secondElem.style.transform = `rotate(${secondRotate}deg)`; }  \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;zh-cn\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34; /\u0026gt; \u0026lt;meta http-equiv=\u0026#34;X-UA-Compatible\u0026#34; content=\u0026#34;IE=edge\u0026#34; /\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34; /\u0026gt; \u0026lt;title\u0026gt;Document\u0026lt;/title\u0026gt; \u0026lt;style\u0026gt; body { margin: 0; } .column { display: flex; flex-direction: column; justify-content: center; align-items: center; } .container { height: 100vh; } .clock { position: relative; width: 40vw; height: 40vw; border-radius: 50%; border: 0.6vw solid rgb(134, 134, 134); background-color: antiquewhite; overflow: hidden; box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.144); } .time { position: absolute; top: 20%; font-size: 3.5vw; font-weight: bold; color: rgb(102, 102, 102); padding: 0.3vw; border-radius: 0.7vw; box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.349); } .plant { position: relative; width: 100%; height: 100%; border-radius: 50%; filter: drop-shadow(0.5vw 0.4vw 0.4vw rgba(0, 0, 0, 0.2)); } .plant::after { content: \u0026#34;\u0026#34;; position: absolute; top: calc(50% - 1.35vw); left: calc(50% - 1.35vw); width: 2vw; height: 2vw; border-radius: 50%; border: 0.35vw solid rgb(129, 129, 129); background-color: rgb(236, 236, 236); } .hour, .minute, .second { position: absolute; left: 50%; top: 50%; width: 9vw; height: 0.6vw; background-color: rgb(70, 70, 70); transform: rotate(-90deg); transform-origin: 0% 50%; transition: transform 400ms ease-in-out; } .minute { width: 15vw; height: 0.4vw; } .second { width: 17vw; height: 0.3vw; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;div class=\u0026#34;container column\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;clock column\u0026#34; onclick=\u0026#34;toggleClock()\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;time\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;plant\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;hour\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;minute\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;second\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;script\u0026gt; window.requestAnimationFrame = (function () { return ( window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function (callback) { return window.setTimeout(callback, 1000 / 60); } ); })(); window.cancelAnimationFrame = (function () { return ( window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.msCancelAnimationFrame || function (id) { window.clearTimeout(id); } ); })(); window.onload = function () { startClock(); }; const toggleClock = (function() { let state = true; return function() { if (state) stopClock(); else startClock(); state = !state; }; })(); function startClock() { const timeElem = document.querySelector(\u0026#39;.time\u0026#39;); const clockElem = document.querySelector(\u0026#39;.clock\u0026#39;); const fn = function() { updateClock(timeElem, clockElem); window.clockAnimationId = window.requestAnimationFrame(fn); }; window.clockAnimationId = window.requestAnimationFrame(fn); } function stopClock() { window.cancelAnimationFrame(window.clockAnimationId); } function updateClock(timeElem, clockElem) { const curTime = _getTime(); _setTime(timeElem, curTime); _setClock(clockElem, curTime); } function _getTime() { const date = new Date(); return date; } function _setTime(elem, time) { elem.textContent = time .toLocaleString(\u0026#34;chinese\u0026#34;, { hour12: false }) .substr(-8, 8); } function _setClock(elem, time) { let hour = time.getHours(); hour = hour \u0026gt;= 12 ? hour - 12 : hour; const minute = time.getMinutes(); const second = time.getSeconds(); const hourPer = hour / 12; const minutePer = minute / 60; const secondPer = second / 60; const hourRotate = 360 * hourPer + minutePer * 30 + secondPer * 0.5 - 90; const minuteRotate = 360 * minutePer + secondPer * 6 - 90; const secondRotate = 360 * secondPer - 90; const hourElem = elem.querySelector(\u0026#34;.hour\u0026#34;); const minuteElem = elem.querySelector(\u0026#34;.minute\u0026#34;); const secondElem = elem.querySelector(\u0026#34;.second\u0026#34;); hourElem.style.transform = `rotate(${hourRotate}deg)`; minuteElem.style.transform = `rotate(${minuteRotate}deg)`; secondElem.style.transform = `rotate(${secondRotate}deg)`; } \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; ","date":"2021-08-14","permalink":"/zh-cn/posts/webnotes/clock/","series":["å‰ç«¯"],"tags":["CSS","requestAnimationFrame"],"title":"åŠ¨æ€é’Ÿè¡¨"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æœ‰ä¸€åˆ—è€•åœ°ï¼Œåˆ†ä¸º n å—ï¼Œm è‚¥æ–™ï¼Œå¾€è¿”äºè¿™ n å—åœ°ï¼Œä¸€æ¬¡æ”¾ 1 è‚¥æ–™ï¼Œè‚¥æ–™æ”¾å®Œä¸ºæ­¢ï¼Œè¿”å›æ¯å—åœ°ä¸­çš„è‚¥æ–™æ•°\nfunction FarmerNN(n, m) { // æœ‰ä¸€åˆ—è€•åœ°ï¼Œåˆ†ä¸º n å—ï¼Œm è‚¥æ–™ï¼Œå¾€è¿”äºè¿™ n å—åœ°ï¼Œä¸€æ¬¡æ”¾ 1 è‚¥æ–™ï¼Œè‚¥æ–™æ”¾å®Œä¸ºæ­¢ï¼Œè¿”å›æ¯å—åœ°ä¸­çš„è‚¥æ–™æ•°  const res = Array(n).fill(0); if (m \u0026lt;= n) { for (let i = 0; i \u0026lt; m; i++) res[i] = 1; return res; } res.fill(1); m -= n; const columns = Math.floor(m / (n - 1)); const extra = m % (n - 1); const lastDirection = columns % 2 === 0; // false è¡¨ç¤ºå‘ä¸‹ï¼Œtrue è¡¨ç¤ºå‘ä¸Š  const downNum = Math.floor(columns / 2); const upNum = columns - downNum; res[0] += upNum; res[n - 1] += downNum; for (let i = 1; i \u0026lt; n - 1; i++) res[i] += columns; if (lastDirection) { for (let i = n - 2; i \u0026gt; n - 2 - extra; i--) res[i] += 1; } else { for (let i = 1; i \u0026lt; 1 + extra; i++) res[i] += 1; } return res; } console.log(FarmerNN(6, 213536543643)); ","date":"2021-08-13","permalink":"/zh-cn/posts/javascripts/farmer_nn/","series":["ç®—æ³•"],"tags":[],"title":"å†œåœºä¸»ç‰›ç‰›ï¼ˆæ•°ç»„å¾€è¿”è®¡æ•°ï¼‰"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å¤§æ•°æ±‚å’Œï¼Œæ”¯æŒè´Ÿæ•°\n/** * æ¯”è¾ƒå¤§å° * @param {string} a æ•°å­— a * @param {string} b æ•°å­— b * @returns å»æ‰ç¬¦å·åï¼Œè¾ƒå¤§çš„åœ¨å‰ï¼Œè¾ƒå°çš„åœ¨åï¼Œå¦‚æœç›¸ç­‰åˆ™ä½ç½®ä¸‰ä¸º true [[biggerSym, bigger], [smallerSym, smaller], isEqual] */ function biggerFirst(a, b) { // æ€è·¯ï¼š  // ä¿å­˜ä¸¤ä¸ªæ•°å­—çš„ç¬¦å·  // æ•°å­—è½¬æ•°ç»„ï¼Œæ¯”è¾ƒä¸¤ä¸ªæ•°å¤§å°ï¼Œå…ˆæ ¹æ®é•¿åº¦æ¯”ï¼Œé•¿çš„æ›´å¤§ï¼Œå¦‚æœé•¿åº¦ä¸€è‡´ï¼Œå°±æŒ‰ä½æ¯”  // è¾ƒå¤§çš„åœ¨å‰ï¼Œè¾ƒå°çš„åœ¨åï¼Œå¦‚æœä¸€æ ·å¤§åˆ™ç¬¬ä¸‰ä¸ªä½ç½®ä¸º trueã€‚ç»„æˆä¸€ä¸ªæ•°ç»„ä½œä¸ºè¿”å›å€¼  let aSym = \u0026#39;\u0026#39;, bSym = \u0026#39;\u0026#39;; // a å’Œ b çš„ç¬¦å·  if (a[0] === \u0026#39;-\u0026#39;) { aSym = \u0026#39;-\u0026#39;; a = a.substr(1); } if (b[0] === \u0026#39;-\u0026#39;) { bSym = \u0026#39;-\u0026#39;; b = b.substr(1); } a = a.split(\u0026#39;\u0026#39;); b = b.split(\u0026#39;\u0026#39;); const equal = () =\u0026gt; [[aSym, a], [bSym, b], true]; const big = () =\u0026gt; [[aSym, a], [bSym, b], false]; const small = () =\u0026gt; [[bSym, b], [aSym, a], false]; if (a.length \u0026gt; b.length) return big(); if (a.length \u0026lt; b.length) return small(); for (let i = 0; i \u0026lt; a.length; i++) { if (a[i] \u0026lt; b[i]) return small(); if (a[i] \u0026gt; b[i]) return big(); continue; } return equal(); } /** * å¤§æ•°æ±‚å’Œï¼ˆæ”¯æŒè´Ÿæ•°ï¼‰ * @param {string} s ç¬¬ä¸€ä¸ªæ•°å­— * @param {string} t ç¬¬äºŒä¸ªæ•°å­— * @returns ä¸¤æ•°ä¹‹å’Œ */ function sum(s, t) { // æ€è·¯  // æ¯”è¾ƒä¸¤ä¸ªæ•°å»ç¬¦å·åçš„å¤§å°ï¼Œå¤§çš„åœ¨å‰å°çš„åœ¨åï¼Œå¦‚æœä¸€æ ·å¤§ä¸”ç¬¦å·ä¸åŒï¼Œç›´æ¥è¿”å› 0  // ä¸¤ç§æƒ…å†µï¼š  // 1. ç¬¦å·ç›¸åŒï¼ˆåŒæ­£æˆ–åŒè´Ÿï¼‰ï¼Œåˆ™ä¸¤æ•°ç›¸åŠ ï¼Œç»“æœçš„ç¬¦å·ä¸è¾ƒå¤§æ•°çš„ç¬¦å·ä¸€è‡´  // 2. ç¬¦å·ä¸åŒï¼ˆä¸€æ­£ä¸€è´Ÿï¼‰ï¼Œåˆ™å¤§çš„å‡å°çš„ï¼Œç»“æœçš„ç¬¦å·ä¸è¾ƒå¤§æ•°çš„ç¬¦å·ä¸€è‡´  // æ‰€ä»¥ï¼Œå¯ä»¥æŠŠä¸¤ç§æƒ…å†µåˆå¹¶ï¼ŒæŠŠä¸åŒå¤„æå‰å®šä¹‰å¥½ã€‚æ¯”å¦‚ï¼š  // 1. ä¸¤æ•°ç›¸åŠ å’Œç›¸å‡çš„ä¸åŒï¼Œå¯ä»¥æå‰æ ¹æ®ç¬¦å·æ˜¯å¦ç›¸åŒæ¥ç¡®å®š sym ä¸º -1 è¿˜æ˜¯ 1  // 2. ç›¸åŠ å’Œç›¸å‡çš„è¿›ä½æ¡ä»¶ä¸åŒï¼Œé€šè¿‡ updateCarry å‡½æ•°ç¡®å®šåˆ¤æ–­æ¡ä»¶å¹¶æ›´æ–° carry çš„å€¼  // 3. carry å–ä½™çš„å·®å¼‚ï¼Œå¯ä»¥é€šè¿‡åŠ  10 å†å–ä½™ï¼Œè§£å†³ç›¸åŠ å’Œç›¸å‡ä¸¤ç§æƒ…å†µä¸­å–ä½™çš„å·®å¼‚  // æœ€åç”¨æ­£åˆ™è¡¨è¾¾å¼å°†ç»“æœå‰é¢çš„ 0 å»æ‰ï¼Œå†æ ¹æ®è¾ƒå¤§æ•°çš„ç¬¦å·æ¥å†³å®šç»“æœæ˜¯å¦éœ€è¦åŠ è´Ÿå·  // è¿”å›ç»“æœ  const [[aSym, a], [bSym, b], equal] = biggerFirst(s, t); // å¤§å°æ¯”è¾ƒï¼Œè¾ƒå¤§å€¼ä¼˜å…ˆ  const isDiffSym = aSym !== bSym; // æ˜¯å¦å¼‚å·  if (isDiffSym \u0026amp;\u0026amp; equal) return \u0026#39;0\u0026#39;; // å¼‚å·ä¸”ç›¸ç­‰ï¼Œç›´æ¥è¿”å› 0  let result = \u0026#39;\u0026#39;, carry = 0; // result å­˜å‚¨ç»“æœï¼Œcarry å­˜å‚¨ä¸­é—´å€¼å’Œè¿›ä½  // è¿›ä½æ›´æ–°å‡½æ•°ï¼Œæ ¹æ®æ˜¯å¦å¼‚å·æœ‰ä¸¤ç§æ›´æ–°æ–¹æ¡ˆ  const updateCarry = (() =\u0026gt; { // å› ä¸º carry æ˜¯åŠ è¿‡ 10 çš„ï¼Œæ‰€ä»¥åˆ¤æ–­æ¡ä»¶éƒ½è¦åŠ  10  if (isDiffSym) return c =\u0026gt; c \u0026lt; 10 ? -1 : 0; return c =\u0026gt; c \u0026gt; 19 ? 1 : 0; })(); // æ ¹æ®æ˜¯å¦å¼‚å·å†³å®šè¾ƒå°çš„æ•°æ˜¯åŠ è¿˜æ˜¯å‡  const sym = isDiffSym ? -1 : 1; // ä¸¤ä¸ªæ•°ä»ä¸ªä½å¼€å§‹è®¡ç®—ï¼Œæ³¨æ„æœ€åçš„è¿›ä½  while (a.length || b.length || carry) { carry += 10 + ~~a.pop() + ~~b.pop() * sym; // ~è¡¨ç¤ºæŒ‰ä½å–åï¼Œ~~ä»»ä½•éæ•°å­—éƒ½ä¼šå¾—åˆ° 0ï¼ŒåŠ  10 æ˜¯ä¸ºäº†æ¨¡æ‹Ÿå‡æ³•ä¸­çš„å€Ÿä½ä¸”ä¸å½±å“åŠ æ³•çš„å–ä½™  result = carry % 10 + result; // ç”±äºä¸Šä¸€æ­¥åŠ  10ï¼Œå› æ­¤æ­¤å¤„åŠ å‡æ³•å¯ä»¥ç»Ÿä¸€è¿™ä¹ˆç®—  carry = updateCarry(carry); // æ›´æ–°è¿›ä½  } // å°†ç»“æœå‰é¢çš„ 0 å»æ‰  result = result.replace(/^0+([1-9])/, \u0026#39;$1\u0026#39;); // ç»“æœçš„ç¬¦å·ä¸è¾ƒå¤§æ•°ç¬¦å·ä¸€è‡´  if (aSym === \u0026#39;-\u0026#39;) result = \u0026#39;-\u0026#39; + result; return result; } console.log(sum(\u0026#39;-90010\u0026#39;, \u0026#39;90000\u0026#39;)); ","date":"2021-08-13","permalink":"/zh-cn/posts/javascripts/big_int_sum/","series":["ç®—æ³•"],"tags":[],"title":"å¤§æ•°æ±‚å’Œ"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"è‡ªå·±å®ç° Promise.all() å’Œ Promise.race()\nPromise.race_ = function(promiseList) { if (!Array.isArray(promiseList)) throw new Error(\u0026#39;promiseList å¿…é¡»æ˜¯å¯è¿­ä»£å¯¹è±¡\u0026#39;); return new Promise((resolve, reject) =\u0026gt; { for (const p of promiseList) { Promise.resolve(p).then(res =\u0026gt; resolve(res), err =\u0026gt; reject(err)); } }); } Promise.all_ = function(promiseList) { if (!Array.isArray(promiseList)) throw new Error(\u0026#39;promiseList å¿…é¡»æ˜¯å¯è¿­ä»£å¯¹è±¡\u0026#39;); return new Promise((resolve, reject) =\u0026gt; { const promiseNum = promiseList.length; let resovledCount = 0; const resolvedValues = new Array(promiseNum); promiseList.forEach((p, i) =\u0026gt; { Promise.resolve(p).then(res =\u0026gt; { resolvedValues[i] = res; resovledCount += 1; if (resovledCount === promiseNum) resolve(resolvedValues); }, err =\u0026gt; reject(err)); }); }); } function fakePromise(url, time, success = true) { return new Promise((resolve, reject) =\u0026gt; { console.log(`${url}å¼€å§‹`); setTimeout(() =\u0026gt; { if (success) resolve(`${url}æˆåŠŸ`); else reject(`${url}å¤±è´¥`); }, time * 1000); }); } const promiseList = [ fakePromise(\u0026#39;1\u0026#39;, 2), fakePromise(\u0026#39;2\u0026#39;, 3), fakePromise(\u0026#39;3\u0026#39;, 1), fakePromise(\u0026#39;4\u0026#39;, 2, false), fakePromise(\u0026#39;5\u0026#39;, 4), fakePromise(\u0026#39;6\u0026#39;, 2), ]; Promise.race_(promiseList).then(res =\u0026gt; console.log(res), err =\u0026gt; console.log(err)); Promise.all_(promiseList).then(res =\u0026gt; console.log(res), err =\u0026gt; console.log(err)); ","date":"2021-08-01","permalink":"/zh-cn/posts/javascripts/promise_all_race/","series":["å‰ç«¯"],"tags":["Promise"],"title":"æ‰‹å†™å®ç° Promise.all å’Œ Promise.race"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"åˆ©ç”¨ Promise.race å®ç°å¯¹ Promise.all çš„å¹¶å‘é™åˆ¶\n è¦æ±‚ï¼šå®ç°å¯¹ Promise.all å¹¶å‘ä¸ªæ•°çš„é™åˆ¶\n æ€è·¯\n ç”¨ä¸€ä¸ªæ•°ç»„å­˜æ”¾æ‰€æœ‰ Promise ä»»åŠ¡ï¼Œä¸€ä¸ªé›†åˆå­˜æ”¾æ­£åœ¨æ‰§è¡Œçš„ Promise ä»»åŠ¡ queue å‡½æ•°ï¼Œé€’å½’æ‰§è¡Œï¼Œå½“æ•°ç»„éå†å®Œå…¨åï¼Œé€€å‡º queue å‡½æ•°å†…éƒ¨ï¼Œarray[i++]() è·å–å½“å‰å‡½æ•°å¹¶æ‰§è¡Œï¼Œå®ä¾‹åŒ–å‡ºä¸€ä¸ª promiseï¼Œæ­¤æ—¶ promise å¼€å§‹è¿è¡Œ å°†æ­¤ proimse æ·»åŠ åˆ° executing é›†åˆï¼Œä¸”åŒæ—¶æ·»åŠ åˆ° result æ•°ç»„ä¸­ å½“ promise æ‰§è¡Œå®Œæˆæ—¶ï¼Œåˆä¼šä» executing é›†åˆä¸­åˆ é™¤ï¼Œä¿è¯ executing é›†åˆä¸­çš„ promise éƒ½æ˜¯æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ å¯¹æ¯” executing é•¿åº¦ï¼Œå¦‚æœé•¿åº¦å¤§äºç­‰äºé™åˆ¶ï¼Œå°±ç”¨ race ç­‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œï¼Œå†é€’å½’è°ƒç”¨ queueï¼Œå¦‚æœæ²¡æœ‰è¶…å‡ºé™åˆ¶ï¼Œå°±ç›´æ¥é€’å½’è°ƒç”¨ queue æœ€åï¼Œç”¨ Promise.all å°† result æ•°ç»„ä¸­çš„æ‰€æœ‰ç»“æœè¾“å…¥åˆ° then æ–¹æ³•ä¸­ï¼Œå¦‚æœ result ä¸­æœ‰å¤±è´¥çš„ promiseï¼Œåˆ™ä¼šç»ˆæ­¢åç»­çš„ promise  function limitPromise(promiseFnList, start = 0, limit = 5) { const result = []; // å­˜å‚¨æ‰€æœ‰çš„ Promise ä»»åŠ¡  const executing = new Set(); // æ­£åœ¨æ‰§è¡Œçš„ Promise å¯¹è±¡  let i = start; const queue = () =\u0026gt; { // è¾¹ç•Œæ¡ä»¶ï¼šå¦‚æœ promises é•¿åº¦ä¸º 0ï¼Œæˆ– i åˆ°è¾¾æœ«å°¾ï¼Œå°±è¿”å›ä¸€ä¸ªç©ºçš„ promise  if (i \u0026gt;= promiseFnList.length) return Promise.resolve(); // æ‹¿åˆ°ä¸€ä¸ª promiseå¹¶è¿è¡Œï¼Œè®¾ç½®è¿è¡Œå®Œæˆåä» executing é›†åˆä¸­åˆ é™¤  const p = promiseFnList[i++]().finally(() =\u0026gt; executing.delete(p)); // å°†è¿è¡Œä¸­çš„ promise æ·»åŠ åˆ° executing é›†åˆ  executing.add(p); // å¹¶åŒæ—¶æ·»åŠ åˆ° result æ•°ç»„  result.push(p); // ä½¿ç”¨ Promise.raceï¼Œæ¯å½“ executing æ•°ç»„ä¸­ promise æ•°é‡ä½äº limitï¼Œå°±å®ä¾‹åŒ–æ–°çš„ promise å¹¶æ‰§è¡Œ  // const r = executing.size \u0026gt;= limit ? Promise.race(executing) : Promise.resolve();  // é€’å½’ï¼Œç›´åˆ°éå†å®Œ promises  // return r.then(() =\u0026gt; queue());  // æˆ–è€…ä¸€æ­¥åˆ°ä½  return executing.size \u0026gt;= limit ? Promise.race(executing).then(() =\u0026gt; queue()) : queue(); } // æœ€åï¼Œç”¨ Promise.all å°† result ä¸­çš„ç»“æœè¾“å‡ºï¼Œå…¶ä¼šç­‰å¾…æœ€åä¸€æ‰¹æ‰§è¡Œä¸­çš„ promise çŠ¶æ€å˜ä¸ºå®Œæˆåæ‰èƒ½è¿›å…¥ then æ–¹æ³•  return queue().then(() =\u0026gt; Promise.all(result)); } function fakePromise(url, time, success = true) { return function() { return new Promise((resolve, reject) =\u0026gt; { console.log(\u0026#39;å¼€å§‹\u0026#39; + url); setTimeout(() =\u0026gt; { if (success) resolve(`æ”¶åˆ°æ¥è‡ª${url}çš„ç›¸åº”ï¼`); else reject(`${url}å¤±è´¥ï¼`); }, time * 1000); }); } } const promiseFnList = [ fakePromise(\u0026#39;1\u0026#39;, 1, false), fakePromise(\u0026#39;2\u0026#39;, 3), fakePromise(\u0026#39;3\u0026#39;, 2), fakePromise(\u0026#39;4\u0026#39;, 1), fakePromise(\u0026#39;5\u0026#39;, 1), fakePromise(\u0026#39;6\u0026#39;, 4), fakePromise(\u0026#39;7\u0026#39;, 4), fakePromise(\u0026#39;8\u0026#39;, 3), fakePromise(\u0026#39;9\u0026#39;, 3), fakePromise(\u0026#39;10\u0026#39;, 1), ]; // ä»ä¸‹æ ‡ä¸º 3 çš„é¡¹å¼€å§‹ï¼Œæœ€å¤§å¹¶å‘æ•°ä¸º 2 limitPromise(promiseFnList, 3, 2).then(res =\u0026gt; console.log(res), err =\u0026gt; console.log(err)); ","date":"2021-08-01","permalink":"/zh-cn/posts/javascripts/promise_all_limit/","series":["å‰ç«¯"],"tags":["Promise"],"title":"Promise.all çš„å¹¶å‘é™åˆ¶"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ä½¿ç”¨å‘å¸ƒè®¢é˜…æ¨¡å¼å®ç°LazyMançš„é“¾å¼è°ƒç”¨\nLazymanè¾“å‡ºç¤ºä¾‹\r class _lazyMan { constructor(name) { this._name = name; this._taskList = []; this._subscribe(\u0026#39;lazyMan\u0026#39;, name); setTimeout(() =\u0026gt; { this._taskList.reverse(); this._publish(); }); } _subscribe(msg, ...args) { if (msg === \u0026#39;sleepFirst\u0026#39;) this._taskList.unshift({msg: \u0026#39;sleep\u0026#39;, args}); else this._taskList.push({msg, args}); } _publish() { if (this._taskList.length \u0026gt; 0) { this._run(this._taskList.pop()); } } _run(option) { const {msg, args} = option; switch (msg) { case \u0026#39;lazyMan\u0026#39;: this._lazyMan(...args); break; case \u0026#39;sleep\u0026#39;: this._sleep(...args); break; case \u0026#39;eat\u0026#39;: this._eat(...args); break; default: break; } } _log(text) { const prefix = \u0026#39;è¿è¡Œè¾“å‡ºï¼š\u0026#39;; console.log(`${prefix}${text}`); } _lazyMan(name) { this._log(`ä½ å¥½ï¼Œ${name}`); this._publish(); } _sleep(time) { this._log(`${this._name}æ­£åœ¨ç¡è§‰ï¼Œé¢„è®¡${time}ç§’...`); setTimeout(() =\u0026gt; { this._log(`${this._name}åœ¨${time}ç§’åé†’äº†`); this._publish(); }, time * 1000); } _eat(name) { this._log(`${this._name}æ­£åœ¨åƒ${name}`); this._publish(); } sleep(time) { this._subscribe(\u0026#39;sleep\u0026#39;, time); return this; } sleepFirst(time) { this._subscribe(\u0026#39;sleepFirst\u0026#39;, time); return this; } eat(name) { this._subscribe(\u0026#39;eat\u0026#39;, name); return this; } showProcedure() { const procedure = this._taskList.map(({msg, args}) =\u0026gt; `${msg}(${args.join(\u0026#39;, \u0026#39;)})`); console.log(\u0026#39;äº‹ä»¶æµç¨‹ï¼š\u0026#39; + procedure.join(\u0026#39; -\u0026gt; \u0026#39;)); } } function lazyMan(name) { return new _lazyMan(name); } const lm = lazyMan(\u0026#39;é­é‘«\u0026#39;); lm.eat(\u0026#39;æ—©é¥­\u0026#39;).sleep(1).eat(\u0026#39;åˆé¥­\u0026#39;).sleep(2).eat(\u0026#39;æ™šé¥­\u0026#39;).sleepFirst(8); lm.showProcedure(); // sleep(8) -\u0026gt; eat(æ—©é¥­) -\u0026gt; sleep(1) -\u0026gt; eat(åˆé¥­) -\u0026gt; sleep(2) -\u0026gt; eat(æ™šé¥­) lm.eat(\u0026#39;ç²‘ç²‘\u0026#39;).sleep(3).eat(\u0026#39;å¥¥é‡Œç»™\u0026#39;); lm.showProcedure(); // sleep(8) -\u0026gt; eat(æ—©é¥­) -\u0026gt; sleep(1) -\u0026gt; eat(åˆé¥­) -\u0026gt; sleep(2) -\u0026gt; eat(æ™šé¥­) -\u0026gt; eat(ç²‘ç²‘) -\u0026gt; sleep(3) -\u0026gt; eat(å¥¥é‡Œç»™) ","date":"2021-07-30","permalink":"/zh-cn/posts/javascripts/lazy_man/","series":["å‰ç«¯"],"tags":["å‘å¸ƒè®¢é˜…","é“¾å¼è°ƒç”¨"],"title":"å‘å¸ƒè®¢é˜…æ¨¡å¼å®ç°LazyMan"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ‰‹å†™å®ç°ä»ç½‘ç»œå¼‚æ­¥åŠ è½½jsè„šæœ¬ï¼Œå¹¶è¿”å›Promiseå®ä¾‹ï¼Œå¦‚æœåŠ è½½æˆåŠŸå°±æ‰§è¡Œresolveï¼Œå¤±è´¥æˆ–è¶…æ—¶å°±æ‰§è¡Œrejectã€‚\n/** * å¼‚æ­¥åŠ è½½å‡½æ•° * @param src è„šæœ¬ url åœ°å€ * @param delay åŠ è½½çš„æœ€å¤§å…è®¸æ—¶é—´ */ function asyncLoad(src, delay) { return new Promise((resolve, reject) =\u0026gt; { // åˆ›å»ºä¸€ä¸ª script å…ƒç´   const script = document.createElement(\u0026#39;script\u0026#39;); // type å±æ€§ä¹Ÿå¯ä»¥ä¸è®¾ç½®  script.type = \u0026#39;text/javascript\u0026#39;; // æŒ‡å®š src çš„å€¼  script.src = src; // å°†å…ƒç´ æ·»åŠ è¿› DOM æ–‡æ¡£  document.body.appendChild(script); const ERROR_STR = \u0026#39;åŠ è½½å¤±è´¥\u0026#39;; // è®¾ç½®è¶…æ—¶å‡½æ•°  const timer = setTimeout(() =\u0026gt; { reject(ERROR_STR); }, delay); // è®¾ç½®ç›‘å¬çŠ¶æ€çš„å›è°ƒå‡½æ•°  if (script.readyState) { // IE  script.onreadstatechange = function() { // å–æ¶ˆè®¡æ—¶å‡½æ•°  clearTimeout(timer); if ([\u0026#39;loaded\u0026#39;, \u0026#39;complete\u0026#39;].includes(script.readyState)) { script.onreadstatechange = null; resolve(); } else { // åŠ è½½å¤±è´¥çš„æƒ…å†µ  reject(ERROR_STR); } } } else { // Chromeã€Edgeã€Safariã€Firefox ç­‰  script.onload = function() { clearTimeout(timer); resolve(); } } }); } // æµ‹è¯•ä»£ç  const src = \u0026#39;http://libs.baidu.com/jquery/2.0.0/jquery.min.js\u0026#39;; const start = Date.now(); asyncLoad(src, 5000).then(() =\u0026gt; { // æ­¤æ—¶ jQuery å·²ç»åŠ è½½ï¼Œå¯ä»¥ä½¿ç”¨ $ æ¥é€‰æ‹©å…ƒç´   $(\u0026#39;#app\u0026#39;)[0].textContent = `åŠ è½½å®Œæ¯•ï¼Œè€—æ—¶ï¼š${Date.now() - start}ms`; }).catch(err =\u0026gt; { const app = document.getElementById(\u0026#39;app\u0026#39;); app.textContent = err; }); ","date":"2021-07-25","permalink":"/zh-cn/posts/webnotes/async_load_script/","series":["å‰ç«¯"],"tags":["å¼‚æ­¥åŠ è½½","Promise"],"title":"å¼‚æ­¥åŠ è½½ç½‘ç»œjsè„šæœ¬å¹¶è¿”å›Promise"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"ä½¿ç”¨deviceorientationäº‹ä»¶è·å–æ‰‹æœºé‡åŠ›å‚æ•°\nå§å®¤å«©å     const targetElem = document.querySelector('#demo span'); if (window.DeviceOrientationEvent) { window.addEventListener('deviceorientation', e = { const {alpha, beta, gamma} = e; targetElem.style.transform = `perspective(15em) translateZ(0em) rotateY(${gamma}deg)`; }); } ","date":"2021-07-21","permalink":"/zh-cn/posts/webnotes/orientation/","series":["å‰ç«¯"],"tags":["deviceorientation"],"title":"ç½‘é¡µé‡åŠ›æ„Ÿåº”"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Javascriptä¸­çš„å„ç§åƒåœ¾å›æ”¶æœºåˆ¶\nå‰è¨€ åƒåœ¾å›æ”¶å™¨æ˜¯ä¸€æŠŠåè¶³çš„åŒåˆƒå‰‘ã€‚å…¶å¥½å¤„æ˜¯å¯ä»¥å¤§å¹…ç®€åŒ–ç¨‹åºçš„å†…å­˜ç®¡ç†ä»£ç ï¼Œå› ä¸ºå†…å­˜ç®¡ç†æ— éœ€ç¨‹åºå‘˜æ¥æ“ä½œï¼Œç”±æ­¤ä¹Ÿå‡å°‘äº†ï¼ˆä½†æ²¡æœ‰æ ¹é™¤ï¼‰é•¿æ—¶é—´è¿è½¬çš„ç¨‹åºçš„å†…å­˜æ³„æ¼ã€‚å¯¹äºæŸäº›ç¨‹åºå‘˜æ¥è¯´ï¼Œå®ƒç”šè‡³èƒ½å¤Ÿæå‡ä»£ç çš„æ€§èƒ½ã€‚\nå¦ä¸€æ–¹é¢ï¼Œé€‰æ‹©åƒåœ¾å›æ”¶å™¨ä¹Ÿå°±æ„å‘³ç€ç¨‹åºå½“ä¸­æ— æ³•å®Œå…¨æŒæ§å†…å­˜ï¼Œè€Œè¿™æ­£æ˜¯ç§»åŠ¨ç»ˆç«¯å¼€å‘çš„ç—‡ç»“ã€‚å¯¹äºJavaScriptï¼Œç¨‹åºä¸­æ²¡æœ‰ä»»ä½•å†…å­˜ç®¡ç†çš„å¯èƒ½â€”â€”ECMAScriptæ ‡å‡†ä¸­æ²¡æœ‰æš´éœ²ä»»ä½•åƒåœ¾å›æ”¶å™¨çš„æ¥å£ã€‚ç½‘é¡µåº”ç”¨æ—¢æ²¡æœ‰åŠæ³•ç®¡ç†å†…å­˜ï¼Œä¹Ÿæ²¡åŠæ³•ç»™åƒåœ¾å›æ”¶å™¨è¿›è¡Œæç¤ºã€‚\nnodeJsæŸ¥çœ‹åƒåœ¾å›æ”¶æ—¥å¿—çš„æ–¹å¼ä¸»è¦æ˜¯åœ¨å¯åŠ¨æ—¶æ·»åŠ  --trace_gc å‚æ•°ã€‚\nå…³äºåƒåœ¾å›æ”¶ åƒåœ¾å›æ”¶å™¨è¦è§£å†³çš„æœ€åŸºæœ¬é—®é¢˜å°±æ˜¯ï¼Œè¾¨åˆ«éœ€è¦å›æ”¶çš„å†…å­˜ã€‚ä¸€æ—¦è¾¨åˆ«å®Œæ¯•ï¼Œè¿™äº›å†…å­˜åŒºåŸŸå³å¯åœ¨æœªæ¥çš„åˆ†é…ä¸­é‡ç”¨ï¼Œæˆ–è€…æ˜¯è¿”è¿˜ç»™æ“ä½œç³»ç»Ÿã€‚ä¸€ä¸ªå¯¹è±¡å½“å®ƒä¸æ˜¯å¤„äºæ´»è·ƒçŠ¶æ€çš„æ—¶å€™å®ƒå°±æ­»äº†ï¼ˆåºŸè¯ï¼‰ã€‚ä¸€ä¸ªå¯¹è±¡å¤„äºæ´»è·ƒçŠ¶æ€ï¼Œå½“ä¸”ä»…å½“å®ƒè¢«ä¸€ä¸ªæ ¹å¯¹è±¡æˆ–å¦ä¸€ä¸ªæ´»è·ƒå¯¹è±¡æŒ‡å‘ã€‚æ ¹å¯¹è±¡è¢«å®šä¹‰ä¸ºå¤„äºæ´»è·ƒçŠ¶æ€ï¼Œæ˜¯æµè§ˆå™¨æˆ–V8æ‰€å¼•ç”¨çš„å¯¹è±¡ã€‚æ¯”å¦‚è¯´ï¼Œè¢«å±€éƒ¨å˜é‡æ‰€æŒ‡å‘çš„å¯¹è±¡å±äºæ ¹å¯¹è±¡ï¼Œå› ä¸ºå®ƒä»¬çš„æ ˆè¢«è§†ä¸ºæ ¹å¯¹è±¡ï¼›å…¨å±€å¯¹è±¡å±äºæ ¹å¯¹è±¡ï¼Œå› ä¸ºå®ƒä»¬å§‹ç»ˆå¯è¢«è®¿é—®ï¼›æµè§ˆå™¨å¯¹è±¡ï¼Œå¦‚DOMå…ƒç´ ï¼Œä¹Ÿå±äºæ ¹å¯¹è±¡ï¼Œå°½ç®¡åœ¨æŸäº›åœºåˆä¸‹å®ƒä»¬åªæ˜¯å¼±å¼•ç”¨ã€‚\nä»ä¾§é¢æ¥è¯´ï¼Œä¸Šé¢çš„å®šä¹‰éå¸¸å®½æ¾ã€‚å®é™…ä¸Šæˆ‘ä»¬å¯ä»¥è¯´ï¼Œå½“ä¸€ä¸ªå¯¹è±¡å¯è¢«ç¨‹åºå¼•ç”¨æ—¶ï¼Œå®ƒå°±æ˜¯æ´»è·ƒçš„ã€‚æ¯”å¦‚ï¼š\nfunction f() { var obj = {x: 12}; g(); // å¯èƒ½åŒ…å«ä¸€ä¸ªæ­»å¾ªç¯  return obj.x; } è¿™é‡Œçš„obj.xå’Œobjéƒ½æ˜¯æ´»è·ƒçš„ï¼Œå°½ç®¡å¯¹å…¶çš„å†åº¦å¼•ç”¨æ˜¯åœ¨æ­»å¾ªç¯ä¹‹åã€‚\nå¾ˆé—æ†¾ï¼Œæˆ‘ä»¬æ— æ³•ç²¾ç¡®åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºè¿™ä¸ªé—®é¢˜å®é™…ç­‰ä»·äºåœæœºé—®é¢˜ï¼Œæ— æ³•ç¡®å®šã€‚å› æ­¤æˆ‘ä»¬åšä¸€ä¸ªç­‰ä»·çº¦å®šï¼šå¦‚æœä¸€ä¸ªå¯¹è±¡å¯ç»ç”±æŸä¸ªè¢«å®šä¹‰ä¸ºæ´»è·ƒå¯¹è±¡çš„å¯¹è±¡ï¼Œé€šè¿‡æŸä¸ªæŒ‡é’ˆé“¾æ‰€è®¿é—®ï¼Œåˆ™å®ƒå°±æ˜¯æ´»è·ƒçš„ã€‚å…¶ä»–çš„éƒ½è¢«è§†ä¸ºåƒåœ¾ã€‚\nåƒåœ¾å›æ”¶è¿‡ç¨‹\r åƒåœ¾å›æ”¶æœºåˆ¶æœ‰å¤šç§ï¼Œä½†æœ€å¸¸ç”¨çš„å°±æ˜¯ä»¥ä¸‹å‡ ç§ï¼š\n\r åˆ†ä»£å›æ”¶ åœ¨V8ä¸­æ‰€æœ‰çš„JavaScriptå¯¹è±¡éƒ½æ˜¯é€šè¿‡å †æ¥åˆ†é…çš„ã€‚ä¸ºäº†æé«˜åƒåœ¾å›æ”¶çš„æ•ˆç‡ï¼ŒV8å°†å †åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€ç”Ÿä»£ä¸¤ä¸ªéƒ¨åˆ†ï¼Œå…¶ä¸­æ–°ç”Ÿä»£ä¸ºå­˜æ´»æ—¶é—´è¾ƒçŸ­çš„å¯¹è±¡(éœ€è¦ç»å¸¸è¿›è¡Œåƒåœ¾å›æ”¶)ï¼Œè€Œè€ç”Ÿä»£ä¸ºå­˜æ´»æ—¶é—´è¾ƒé•¿çš„å¯¹è±¡(åƒåœ¾å›æ”¶çš„é¢‘ç‡è¾ƒä½)ï¼Œå¦‚å›¾ï¼š\n\r æ–°ç”Ÿä»£ æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡ä¸»è¦é€šè¿‡ Scavenge ç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶ã€‚åœ¨ Scavenge çš„å…·ä½“å®ç°ä¸­ï¼Œä¸»è¦é‡‡ç”¨äº† Cheney ç®—æ³•ã€‚\n Cheney ç®—æ³•æ˜¯ä¸€ç§é‡‡ç”¨å¤åˆ¶çš„æ–¹å¼å®ç°çš„åƒåœ¾å›æ”¶ç®—æ³•ã€‚å®ƒå°†å †å†…å­˜ä¸€åˆ†ä¸ºäºŒï¼Œæ¯ä¸€éƒ¨åˆ†ç©ºé—´æˆä¸º semispaceã€‚åœ¨è¿™ä¸¤ä¸ª semispace ç©ºé—´ä¸­ï¼Œåªæœ‰ä¸€ä¸ªå¤„äºä½¿ç”¨ä¸­ï¼Œå¦ä¸€ä¸ªå¤„äºé—²ç½®ä¸­ã€‚å¤„äºä½¿ç”¨ä¸­çš„ semispace ç©ºé—´æˆä¸º From ç©ºé—´ï¼Œå¤„äºé—²ç½®çŠ¶æ€çš„ç©ºé—´æˆä¸º To ç©ºé—´ã€‚å½“æˆ‘ä»¬åˆ†é…å¯¹è±¡æ—¶ï¼Œå…ˆæ˜¯åœ¨ From ç©ºé—´ä¸­è¿›è¡Œåˆ†é…ã€‚å½“å¼€å§‹è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œä¼šæ£€æŸ¥ From ç©ºé—´ä¸­çš„å­˜æ´»å¯¹è±¡ï¼Œè¿™äº›å­˜æ´»å¯¹è±¡å°†è¢«å¤åˆ¶åˆ° To ç©ºé—´ä¸­ï¼Œè€Œéå­˜æ´»å¯¹è±¡å ç”¨çš„ç©ºé—´å°†è¢«é‡Šæ”¾ã€‚å®Œæˆå¤åˆ¶åï¼Œ From ç©ºé—´å’Œ To ç©ºé—´çš„è§’è‰²å‘ç”Ÿå¯¹æ¢ã€‚\n Scavenge çš„ç¼ºç‚¹æ˜¯åªèƒ½ä½¿ç”¨å †å†…å­˜çš„ä¸€åŠï¼Œä½† Scavenge ç”±äºåªå¤åˆ¶å­˜æ´»çš„å¯¹è±¡ï¼Œå¹¶ä¸”å¯¹äºç”Ÿå‘½å‘¨æœŸçŸ­çš„åœºæ™¯å­˜æ´»å¯¹è±¡åªå å°‘éƒ¨åˆ†ï¼Œæ‰€ä»¥å®ƒåœ¨æ—¶é—´æ•ˆç‡ä¸Šè¡¨ç°ä¼˜å¼‚ã€‚Scavenge æ˜¯å…¸å‹çš„ç‰ºç‰²ç©ºé—´æ¢å–æ—¶é—´çš„ç®—æ³•ï¼Œæ— æ³•å¤§è§„æ¨¡åœ°åº”ç”¨åˆ°æ‰€æœ‰çš„åƒåœ¾å›æ”¶ä¸­ï¼Œä½†éå¸¸é€‚åˆåº”ç”¨åœ¨æ–°ç”Ÿä»£ä¸­ã€‚\n\r å¯¹è±¡æ˜¯å¦‚ä½•é‡Šæ”¾çš„å‘¢ï¼Ÿ æœ‰ä¸ªå«å¯è¾¾æ€§åˆ†æç®—æ³•çš„æ¦‚å¿µï¼Œå³é€šè¿‡ä¸€ç³»åˆ—çš„ç§°ä¸ºâ€œGC ROOTâ€çš„å¯¹è±¡ä½œä¸ºèµ·å§‹ç‚¹ã€‚ä»è¿™äº›èŠ‚ç‚¹å¼€å§‹å‘ä¸‹æœç´¢ã€‚æœç´¢èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºå¼•ç”¨é“¾ã€‚å½“ä¸€ä¸ªå¯¹è±¡åˆ°GC ROOTæ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾æ—¶ï¼Œåˆ™è¯æ˜æ­¤å¯¹è±¡æ˜¯ä¸å¯ç”¨çš„ã€‚å½“ç„¶åœ¨è™šæ‹Ÿæœºåˆ¤æ–­è¦è¢«é‡Šæ”¾çš„å¯¹è±¡é‡Œé¢ï¼Œå³ä½¿åœ¨å¯è¾¾æ€§åˆ†æç®—æ³•ä¸­ä¸å¯è¾¾çš„å¯¹è±¡ï¼Œä¹Ÿå¹¶éæ˜¯ç«‹å³é‡Šæ”¾çš„ã€‚å¦‚æœå¯¹è±¡åœ¨è¿›è¡Œå¯è¾¾æ€§åˆ†æåå‘ç°æ²¡æœ‰ä¸GC ROOTSç›¸è¿æ¥çš„å¼•ç”¨é“¾ã€‚å°†ä¼šå¯¹å®ƒè¿›è¡Œä¸€æ¬¡æ ‡è®°ï¼Œå¹¶è¿›è¡Œåˆ·é€‰ã€‚å®ƒä¼šæ”¾è¿›ä¸€ä¸ªé˜Ÿåˆ—ä¸­ä¾æ¬¡è¿›è¡Œå›æ”¶ã€‚å¦‚æœè¿™æ—¶åˆæœ‰å¯¹è±¡å¼•ç”¨åˆ°å®ƒï¼Œå®ƒå°±ä¸ä¼šè¢«å›æ”¶ã€‚\næ™‹å‡ å¯¹è±¡ä»æ–°ç”Ÿä»£ä¸­ç§»åŠ¨åˆ°è€ç”Ÿä»£ä¸­çš„è¿‡ç¨‹ç§°ä¸ºæ™‹å‡ã€‚\nFrom ç©ºé—´ä¸­çš„å­˜æ´»å¯¹è±¡åœ¨å¤åˆ¶åˆ° To ç©ºé—´ä¹‹å‰éœ€è¦è¿›è¡Œæ£€æŸ¥ï¼Œåœ¨ä¸€å®šæ¡ä»¶ä¸‹ï¼Œéœ€è¦å°†å­˜æ´»å‘¨æœŸé•¿çš„å¯¹è±¡ç§»åŠ¨åˆ°è€ç”Ÿä»£ä¸­ï¼Œä¹Ÿå°±æ˜¯å®Œæˆå¯¹è±¡çš„æ™‹å‡ã€‚\næ™‹å‡æ¡ä»¶ä¸»è¦æœ‰ä¸¤ä¸ªï¼š\n å¯¹è±¡æ˜¯å¦ç»å†è¿‡ä¸€æ¬¡ Scavenge å›æ”¶ï¼Œæ˜¯çš„è¯ï¼Œåˆ™ç§»åŠ¨åˆ°è€ç”Ÿä»£ To ç©ºé—´å·²ç»ä½¿ç”¨è¶…è¿‡ 25%ï¼ŒTo ç©ºé—´å¯¹è±¡ç§»åŠ¨åˆ°è€ç”Ÿä»£  è®¾ç½® 25% è¿™ä¸ªé™åˆ¶å€¼å¾—åŸå› æ˜¯å½“è¿™æ¬¡ Scavenge å›æ”¶å®Œæˆåï¼Œè¿™ä¸ª To ç©ºé—´å°†å˜æˆ From ç©ºé—´ï¼Œæ¥ä¸‹æ¥çš„å†…å­˜åˆ†é…å°†åœ¨è¿™ä¸ªç©ºé—´ä¸­è¿›è¡Œï¼Œå¦‚æœå æ¯”è¿‡é«˜ï¼Œä¼šå½±å“åç»­çš„å†…å­˜åˆ†é…ã€‚\nå†™å±éšœ ä¸Šé¢æœ‰ä¸€ä¸ªç»†èŠ‚è¢«å¿½ç•¥äº†ï¼šå¦‚æœæ–°ç”ŸåŒºä¸­æŸä¸ªå¯¹è±¡ï¼Œåªæœ‰ä¸€ä¸ªæŒ‡å‘å®ƒçš„æŒ‡é’ˆï¼Œè€Œè¿™ä¸ªæŒ‡é’ˆæ°å¥½æ˜¯åœ¨è€ç”ŸåŒºçš„å¯¹è±¡å½“ä¸­ï¼Œæˆ‘ä»¬å¦‚ä½•æ‰èƒ½çŸ¥é“æ–°ç”ŸåŒºä¸­é‚£ä¸ªå¯¹è±¡æ˜¯æ´»è·ƒçš„å‘¢ï¼Ÿæ˜¾ç„¶æˆ‘ä»¬å¹¶ä¸å¸Œæœ›å°†è€ç”ŸåŒºå†éå†ä¸€æ¬¡ï¼Œå› ä¸ºè€ç”ŸåŒºä¸­çš„å¯¹è±¡å¾ˆå¤šï¼Œè¿™æ ·åšä¸€æ¬¡æ¶ˆè€—å¤ªå¤§ã€‚\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®é™…ä¸Šåœ¨å†™ç¼“å†²åŒºä¸­æœ‰ä¸€ä¸ªåˆ—è¡¨(æˆ‘ä»¬ç§°ä¹‹ä¸ºCrossRefList)ï¼Œåˆ—è¡¨ä¸­è®°å½•äº†æ‰€æœ‰è€ç”ŸåŒºå¯¹è±¡æŒ‡å‘æ–°ç”ŸåŒºçš„æƒ…å†µã€‚æ–°å¯¹è±¡è¯ç”Ÿçš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šæœ‰æŒ‡å‘å®ƒçš„æŒ‡é’ˆï¼Œè€Œå½“æœ‰è€ç”ŸåŒºä¸­çš„å¯¹è±¡å‡ºç°æŒ‡å‘æ–°ç”ŸåŒºå¯¹è±¡çš„æŒ‡é’ˆæ—¶ï¼Œæˆ‘ä»¬ä¾¿è®°å½•ä¸‹æ¥è¿™æ ·çš„è·¨åŒºæŒ‡å‘ã€‚ç”±äºè¿™ç§è®°å½•è¡Œä¸ºæ€»æ˜¯å‘ç”Ÿåœ¨å†™æ“ä½œæ—¶ï¼Œå®ƒè¢«ç§°ä¸ºå†™å±éšœâ€”â€”å› ä¸ºæ¯ä¸ªå†™æ“ä½œéƒ½è¦ç»å†è¿™æ ·ä¸€å…³ã€‚\n\r è€ç”Ÿä»£ è€ç”Ÿä»£çš„å†…å­˜ç©ºé—´è¾ƒå¤§ä¸”å­˜æ´»å¯¹è±¡è¾ƒå¤šï¼Œå› æ­¤å…¶åƒåœ¾å›æ”¶ç®—æ³•ä¹Ÿå°±æ²¡æœ‰æ–°ç”Ÿä»£é‚£ä¹ˆç®€å•äº†ã€‚ä¸ºæ­¤V8ä½¿ç”¨äº†æ ‡è®°-æ¸…é™¤ç®—æ³• (Mark-Sweep)è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œå¹¶ä½¿ç”¨æ ‡è®°-å‹ç¼©ç®—æ³• (Mark-Compact)æ•´ç†å†…å­˜ç¢ç‰‡ï¼Œæé«˜å†…å­˜çš„åˆ©ç”¨ç‡ã€‚è€ç”Ÿä»£çš„åƒåœ¾å›æ”¶ç®—æ³•æ­¥éª¤å¦‚ä¸‹ï¼š\n1. å¯¹è€ç”Ÿä»£è¿›è¡Œç¬¬ä¸€éæ‰«æï¼Œæ ‡è®°å­˜æ´»çš„å¯¹è±¡ 2. å¯¹è€ç”Ÿä»£è¿›è¡Œç¬¬äºŒæ¬¡æ‰«æï¼Œæ¸…é™¤æœªè¢«æ ‡è®°çš„å¯¹è±¡ 3. å°†å­˜æ´»å¯¹è±¡å¾€å†…å­˜çš„ä¸€ç«¯ç§»åŠ¨ 4. æ¸…é™¤æ‰å­˜æ´»å¯¹è±¡è¾¹ç•Œå¤–çš„å†…å­˜ Mark-Sweep Mark-Sweep æ˜¯æ ‡è®°æ¸…é™¤çš„æ„æ€ï¼Œå®ƒåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œæ ‡è®°å’Œæ¸…ç†ã€‚Mark-Sweep åœ¨æ ‡è®°é˜¶æ®µéå†å †ä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œå¹¶æ ‡è®°æ´»ç€çš„å¯¹è±¡ï¼Œåœ¨éšåçš„æ¸…é™¤é˜¶æ®µä¸­ï¼Œåªæ¸…é™¤æœªè¢«æ ‡è®°çš„å¯¹è±¡ã€‚\n\r ç®—æ³•æœºåˆ¶\nåœ¨æ ‡è®°é˜¶æ®µï¼Œæ‰€æœ‰å †ä¸Šçš„æ´»è·ƒå¯¹è±¡éƒ½ä¼šè¢«æ ‡è®°ã€‚æ¯ä¸ªé¡µï¼ˆæ³¨æ„ï¼ŒV8çš„å†…å­˜é¡µæ˜¯1MBçš„è¿ç»­å†…å­˜å—ï¼Œä¸è™šæ‹Ÿå†…å­˜é¡µä¸åŒï¼‰éƒ½ä¼šåŒ…å«ä¸€ä¸ªç”¨æ¥æ ‡è®°çš„ä½å›¾ï¼Œä½å›¾ä¸­çš„æ¯ä¸€ä½å¯¹åº”é¡µä¸­çš„ä¸€å­—ã€‚è¿™ä¸ªæ ‡è®°éå¸¸æœ‰å¿…è¦ï¼Œå› ä¸ºæŒ‡é’ˆå¯èƒ½ä¼šåœ¨ä»»ä½•å­—å¯¹é½çš„åœ°æ–¹å‡ºç°ã€‚æ˜¾ç„¶ï¼Œè¿™æ ·çš„ä½å›¾è¦å æ®ä¸€å®šçš„ç©ºé—´ï¼ˆ32ä½ç³»ç»Ÿä¸Šå æ®3.1%ï¼Œ64ä½ç³»ç»Ÿä¸Šå æ®1.6%ï¼‰ï¼Œä½†æ‰€æœ‰çš„å†…å­˜ç®¡ç†æœºåˆ¶éƒ½éœ€è¦è¿™æ ·å ç”¨ï¼Œå› æ­¤è¿™ç§åšæ³•å¹¶ä¸è¿‡åˆ†ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¦æœ‰2ä½æ¥è¡¨ç¤ºæ ‡è®°å¯¹è±¡çš„çŠ¶æ€ã€‚ç”±äºå¯¹è±¡è‡³å°‘æœ‰2å­—é•¿ï¼Œå› æ­¤è¿™äº›ä½ä¸ä¼šé‡å ã€‚\nçŠ¶æ€ä¸€å…±æœ‰ä¸‰ç§ï¼šå¦‚æœä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€ä¸ºç™½ï¼Œé‚£ä¹ˆå®ƒå°šæœªè¢«åƒåœ¾å›æ”¶å™¨å‘ç°ï¼›å¦‚æœä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€ä¸ºç°ï¼Œé‚£ä¹ˆå®ƒå·²è¢«åƒåœ¾å›æ”¶å™¨å‘ç°ï¼Œä½†å®ƒçš„é‚»æ¥å¯¹è±¡ä»æœªå…¨éƒ¨å¤„ç†å®Œæ¯•ï¼›å¦‚æœä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€ä¸ºé»‘ï¼Œåˆ™å®ƒä¸ä»…è¢«åƒåœ¾å›æ”¶å™¨å‘ç°ï¼Œè€Œä¸”å…¶æ‰€æœ‰é‚»æ¥å¯¹è±¡ä¹Ÿéƒ½å¤„ç†å®Œæ¯•ã€‚\nå¦‚æœå°†å †ä¸­çš„å¯¹è±¡çœ‹ä½œç”±æŒ‡é’ˆç›¸äº’è”ç³»çš„æœ‰å‘å›¾ï¼Œæ ‡è®°ç®—æ³•çš„æ ¸å¿ƒå®é™…æ˜¯æ·±åº¦ä¼˜å…ˆæœç´¢ã€‚åœ¨æ ‡è®°çš„åˆæœŸï¼Œä½å›¾æ˜¯ç©ºçš„ï¼Œæ‰€æœ‰å¯¹è±¡ä¹Ÿéƒ½æ˜¯ç™½çš„ã€‚ä»æ ¹å¯è¾¾çš„å¯¹è±¡ä¼šè¢«æŸ“è‰²ä¸ºç°è‰²ï¼Œå¹¶è¢«æ”¾å…¥æ ‡è®°ç”¨çš„ä¸€ä¸ªå•ç‹¬åˆ†é…çš„åŒç«¯é˜Ÿåˆ—ã€‚æ ‡è®°é˜¶æ®µçš„æ¯æ¬¡å¾ªç¯ï¼ŒGCä¼šå°†ä¸€ä¸ªå¯¹è±¡ä»åŒç«¯é˜Ÿåˆ—ä¸­å–å‡ºï¼ŒæŸ“è‰²ä¸ºé»‘ï¼Œç„¶åå°†å®ƒçš„é‚»æ¥å¯¹è±¡æŸ“è‰²ä¸ºç°ï¼Œå¹¶æŠŠé‚»æ¥å¯¹è±¡æ”¾å…¥åŒç«¯é˜Ÿåˆ—ã€‚è¿™ä¸€è¿‡ç¨‹åœ¨åŒç«¯é˜Ÿåˆ—ä¸ºç©ºä¸”æ‰€æœ‰å¯¹è±¡éƒ½å˜é»‘æ—¶ç»“æŸã€‚\nç‰¹åˆ«å¤§çš„å¯¹è±¡ï¼Œå¦‚é•¿æ•°ç»„ï¼Œå¯èƒ½ä¼šåœ¨å¤„ç†æ—¶åˆ†ç‰‡ï¼Œä»¥é˜²æº¢å‡ºåŒç«¯é˜Ÿåˆ—ã€‚å¦‚æœåŒç«¯é˜Ÿåˆ—æº¢å‡ºäº†ï¼Œåˆ™å¯¹è±¡ä»ç„¶ä¼šè¢«æŸ“ä¸ºç°è‰²ï¼Œä½†ä¸ä¼šå†è¢«æ”¾å…¥é˜Ÿåˆ—ï¼ˆè¿™æ ·ä»–ä»¬çš„é‚»æ¥å¯¹è±¡å°±æ²¡æœ‰æœºä¼šå†æŸ“è‰²äº†ï¼‰ã€‚å› æ­¤å½“åŒç«¯é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼ŒGCä»ç„¶éœ€è¦æ‰«æä¸€æ¬¡ï¼Œç¡®ä¿æ‰€æœ‰çš„ç°å¯¹è±¡éƒ½æˆä¸ºäº†é»‘å¯¹è±¡ã€‚å¯¹äºæœªè¢«æŸ“é»‘çš„ç°å¯¹è±¡ï¼ŒGCä¼šå°†å…¶å†æ¬¡æ”¾å…¥é˜Ÿåˆ—ï¼Œå†åº¦å¤„ç†ã€‚\næ ‡è®°ç®—æ³•ç»“æŸæ—¶ï¼Œæ‰€æœ‰çš„æ´»è·ƒå¯¹è±¡éƒ½è¢«æŸ“ä¸ºäº†é»‘è‰²ï¼Œè€Œæ‰€æœ‰çš„æ­»å¯¹è±¡åˆ™ä»æ˜¯ç™½çš„ã€‚è¿™ä¸€ç»“æœæ­£æ˜¯æ¸…ç†å’Œç´§ç¼©ä¸¤ä¸ªé˜¶æ®µæ‰€æœŸæœ›çš„ã€‚\nç±»ä¼¼ä¸‰è‰²æ ‡è®°æ³•å¤§è‡´å¦‚å›¾ï¼š\nç¬¬ä¸€æ­¥ï¼š\n\r ç¬¬äºŒæ­¥ï¼š\n\r ç¬¬ä¸‰æ­¥ï¼š\n\r æ¸…ç†é˜¶æ®µï¼Œæ¸…ç†ç®—æ³•æ‰«æè¿ç»­å­˜æ”¾çš„æ­»å¯¹è±¡ï¼Œå°†å…¶å˜ä¸ºç©ºé—²ç©ºé—´ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°ç©ºé—²å†…å­˜é“¾è¡¨ä¸­ã€‚æ¯ä¸€é¡µéƒ½åŒ…å«æ•°ä¸ªç©ºé—²å†…å­˜é“¾è¡¨ï¼Œå…¶åˆ†åˆ«ä»£è¡¨å°å†…å­˜åŒºï¼ˆ\u0026lt;256å­—ï¼‰ã€ä¸­å†…å­˜åŒºï¼ˆ\u0026lt;2048å­—ï¼‰ã€å¤§å†…å­˜åŒºï¼ˆ\u0026lt;16384å­—ï¼‰å’Œè¶…å¤§å†…å­˜åŒºï¼ˆå…¶å®ƒæ›´å¤§çš„å†…å­˜ï¼‰ã€‚\næ¸…ç†ç®—æ³•éå¸¸ç®€å•ï¼Œåªéœ€éå†é¡µçš„ä½å›¾ï¼Œæœç´¢è¿ç»­çš„ç™½å¯¹è±¡ã€‚ç©ºé—²å†…å­˜é“¾è¡¨å¤§é‡è¢«scavengeç®—æ³•ç”¨äºåˆ†é…å­˜æ´»ä¸‹æ¥çš„æ´»è·ƒå¯¹è±¡ï¼Œä½†ä¹Ÿè¢«ç´§ç¼©ç®—æ³•ç”¨äºç§»åŠ¨å¯¹è±¡ã€‚æœ‰äº›ç±»å‹çš„å¯¹è±¡åªèƒ½è¢«åˆ†é…åœ¨è€ç”ŸåŒºï¼Œå› æ­¤ç©ºé—²å†…å­˜é“¾è¡¨ä¹Ÿè¢«å®ƒä»¬ä½¿ç”¨ã€‚\nMark-Compact Mark-Sweep æœ€å¤§çš„é—®é¢˜æ˜¯åœ¨è¿›è¡Œä¸€æ¬¡æ ‡è®°æ¸…é™¤å›æ”¶åï¼Œå†…å­˜ç©ºé—´ä¼šå‡ºç°ä¸è¿ç»­çš„çŠ¶æ€ã€‚è¿™ç§å†…å­˜ç¢ç‰‡ä¼šå¯¹åç»­çš„å†…å­˜åˆ†é…é€ æˆé—®é¢˜ï¼Œå› ä¸ºå¾ˆå¯èƒ½å‡ºç°éœ€è¦åˆ†é…ä¸€ä¸ªå¤§å¯¹è±¡çš„æƒ…å†µï¼Œè¿™æ—¶æ‰€æœ‰çš„ç¢ç‰‡ç©ºé—´éƒ½æ— æ³•å®Œæˆæ­¤æ¬¡åˆ†é…ï¼Œå°±ä¼šæå‰è§¦å‘åƒåœ¾å›æ”¶ï¼Œè€Œè¿™æ¬¡å›æ”¶æ˜¯ä¸å¿…è¦çš„ã€‚\nä¸ºäº†è§£å†³ Mark-Sweep çš„å†…å­˜ç¢ç‰‡é—®é¢˜ï¼ŒMark-Compactè¢«æå‡ºæ¥ã€‚Mark-Compactæ˜¯æ ‡è®°æ•´ç†çš„æ„æ€ï¼Œæ˜¯åœ¨ Mark-Sweepçš„åŸºç¡€ä¸Šæ¼”è¿›è€Œæ¥çš„ã€‚å®ƒä»¬çš„å·®åˆ«åœ¨äºå¯¹è±¡åœ¨æ ‡è®°ä¸ºæ­»äº¡åï¼Œåœ¨æ•´ç†è¿‡ç¨‹ä¸­ï¼Œå°†æ´»ç€çš„å¯¹è±¡å¾€ä¸€ç«¯ç§»åŠ¨ï¼Œç§»åŠ¨å®Œæˆåï¼Œç›´æ¥æ¸…ç†æ‰è¾¹ç•Œå¤–çš„å†…å­˜ã€‚\n\r ç®—æ³•æœºåˆ¶\nç´§ç¼©ç®—æ³•ä¼šå°è¯•å°†å¯¹è±¡ä»ç¢ç‰‡é¡µï¼ˆåŒ…å«å¤§é‡å°ç©ºé—²å†…å­˜çš„é¡µï¼‰ä¸­è¿ç§»æ•´åˆåœ¨ä¸€èµ·ï¼Œæ¥é‡Šæ”¾å†…å­˜ã€‚è¿™äº›å¯¹è±¡ä¼šè¢«è¿ç§»åˆ°å¦å¤–çš„é¡µä¸Šï¼Œå› æ­¤ä¹Ÿå¯èƒ½ä¼šæ–°åˆ†é…ä¸€äº›é¡µã€‚è€Œè¿å‡ºåçš„ç¢ç‰‡é¡µå°±å¯ä»¥è¿”è¿˜ç»™æ“ä½œç³»ç»Ÿäº†ã€‚\nè¿ç§»æ•´åˆçš„è¿‡ç¨‹éå¸¸å¤æ‚ï¼Œå¤§æ¦‚è¿‡ç¨‹æ˜¯è¿™æ ·çš„ã€‚å¯¹ç›®æ ‡ç¢ç‰‡é¡µä¸­çš„æ¯ä¸ªæ´»è·ƒå¯¹è±¡ï¼Œåœ¨ç©ºé—²å†…å­˜é“¾è¡¨ä¸­åˆ†é…ä¸€å—å…¶å®ƒé¡µçš„åŒºåŸŸï¼Œå°†è¯¥å¯¹è±¡å¤åˆ¶è‡³æ–°é¡µï¼Œå¹¶åœ¨ç¢ç‰‡é¡µä¸­çš„è¯¥å¯¹è±¡ä¸Šå†™ä¸Šè½¬å‘åœ°å€ã€‚è¿å‡ºè¿‡ç¨‹ä¸­ï¼Œå¯¹è±¡ä¸­çš„æ—§åœ°å€ä¼šè¢«è®°å½•ä¸‹æ¥ï¼Œè¿™æ ·åœ¨è¿å‡ºç»“æŸåV8ä¼šéå†å®ƒæ‰€è®°å½•çš„åœ°å€ï¼Œå°†å…¶æ›´æ–°ä¸ºæ–°çš„åœ°å€ã€‚ç”±äºæ ‡è®°è¿‡ç¨‹ä¸­ä¹Ÿè®°å½•äº†ä¸åŒé¡µä¹‹é—´çš„æŒ‡é’ˆï¼Œæ­¤æ—¶ä¹Ÿä¼šæ›´æ–°è¿™äº›æŒ‡é’ˆçš„æŒ‡å‘ã€‚æ³¨æ„ï¼Œå¦‚æœä¸€ä¸ªé¡µéå¸¸â€œæ´»è·ƒâ€ï¼Œæ¯”å¦‚å…¶ä¸­æœ‰è¿‡å¤šéœ€è¦è®°å½•çš„æŒ‡é’ˆï¼Œåˆ™åœ°å€è®°å½•ä¼šè·³è¿‡å®ƒï¼Œç­‰åˆ°ä¸‹ä¸€è½®åƒåœ¾å›æ”¶å†è¿›è¡Œå¤„ç†ã€‚\nå…¨åœé¡¿ ä¸‹è¡¨ä¸º3ç§ä¸»è¦åƒåœ¾å›æ”¶ç®—æ³•çš„ç®€å•æ¯”è¾ƒï¼š\n\r åœ¨ Mark-Sweep å’Œ Mark-Compact ä¹‹é—´ï¼Œç”±äº Mark-Compact éœ€è¦ç§»åŠ¨å¯¹è±¡ï¼Œæ‰€ä»¥å®ƒçš„æ‰§è¡Œé€Ÿåº¦ä¸å¯èƒ½å¾ˆå¿«ï¼Œæ‰€ä»¥åœ¨å–èˆä¸Šï¼ŒV8 ä¸»è¦ä½¿ç”¨ Mark-Sweepï¼Œåœ¨ç©ºé—´ä¸è¶³ä»¥ä»æ–°ç”Ÿä»£ä¸­æ™‹å‡è¿‡æ¥çš„å¯¹è±¡è¿›è¡Œåˆ†é…æ—¶æ‰ä½¿ç”¨ Mark-Compact ã€‚ä¸ºäº†é¿å…å‡ºç° JavaScriptåº”ç”¨é€»è¾‘ä¸åƒåœ¾å›æ”¶å™¨çœ‹åˆ°çš„ä¸ä¸€è‡´çš„æƒ…å†µï¼Œåƒåœ¾å›æ”¶çš„3ç§ç®—æ³•éƒ½éœ€è¦å°†åº”ç”¨é€»è¾‘æš‚åœä¸‹æ¥ï¼Œè¿™ç§è¡Œä¸ºç§°ä¸ºâ€œå…¨åœé¡¿â€ (stop-the-world)ã€‚\nç”±äºæ–°ç”Ÿä»£é…ç½®çš„ç©ºé—´è¾ƒå°ï¼Œå­˜æ´»å¯¹è±¡è¾ƒå°‘ï¼Œå…¨åœé¡¿å¯¹æ–°ç”Ÿä»£å½±å“ä¸å¤§ã€‚ä½†è€ç”Ÿä»£é€šå¸¸é…ç½®çš„ç©ºé—´è¾ƒå¤§ï¼Œä¸”å­˜æ´»å¯¹è±¡è¾ƒå¤šï¼Œå…¨å †åƒåœ¾å›æ”¶ï¼ˆfullåƒåœ¾å›æ”¶ï¼‰çš„æ ‡è®°ã€æ¸…é™¤ã€æ•´ç†ç­‰åŠ¨ä½œé€ æˆçš„åœé¡¿å°±ä¼šæ¯”è¾ƒå¯æ€•ã€‚\nå¢é‡æ ‡è®°ä¸æƒ°æ€§æ¸…ç† å¢é‡æ ‡è®° ä¸ºäº†é™ä½å…¨å †åƒåœ¾å›æ”¶å¸¦æ¥çš„åœé¡¿æ—¶é—´ï¼ŒV8å…ˆä»æ ‡è®°é˜¶æ®µå…¥æ‰‹ï¼Œå°†åŸæœ¬è¦ä¸€å£æ°”åœé¡¿å®Œæˆçš„åŠ¨ä½œæ”¹æˆå¢é‡æ ‡è®°(Incremental Marking)ï¼Œä¹Ÿå°±æ˜¯æ‹†åˆ†ä¸ºè®¸å¤šå°â€œæ­¥è¿›â€ï¼Œæ¯åšå®Œä¸€â€œæ­¥è¿›â€å°±è®©JavaScriptåº”ç”¨é€»è¾‘æ‰§è¡Œä¸€å°ä¼šå„¿ï¼Œåƒåœ¾å›æ”¶å’Œåº”ç”¨é€»è¾‘äº¤æ›¿æ‰§è¡Œç›´åˆ°æ ‡è®°é˜¶æ®µå®Œæˆã€‚\nå¢é‡æ ‡è®°å…è®¸å †çš„æ ‡è®°å‘ç”Ÿåœ¨å‡ æ¬¡5-10æ¯«ç§’ï¼ˆç§»åŠ¨è®¾å¤‡ï¼‰çš„å°åœé¡¿ä¸­ã€‚å¢é‡æ ‡è®°åœ¨å †çš„å¤§å°è¾¾åˆ°ä¸€å®šçš„é˜ˆå€¼æ—¶å¯ç”¨ï¼Œå¯ç”¨ä¹‹åæ¯å½“ä¸€å®šé‡çš„å†…å­˜åˆ†é…åï¼Œè„šæœ¬çš„æ‰§è¡Œå°±ä¼šåœé¡¿å¹¶è¿›è¡Œä¸€æ¬¡å¢é‡æ ‡è®°ã€‚å°±åƒæ™®é€šçš„æ ‡è®°ä¸€æ ·ï¼Œå¢é‡æ ‡è®°ä¹Ÿæ˜¯ä¸€ä¸ªæ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œå¹¶åŒæ ·é‡‡ç”¨ç™½ç°é»‘æœºåˆ¶æ¥åˆ†ç±»å¯¹è±¡ã€‚\nä½†å¢é‡æ ‡è®°å’Œæ™®é€šæ ‡è®°ä¸åŒçš„æ˜¯ï¼Œå¯¹è±¡çš„å›¾è°±å…³ç³»å¯èƒ½å‘ç”Ÿå˜åŒ–ï¼æˆ‘ä»¬éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œé‚£äº›ä»é»‘å¯¹è±¡æŒ‡å‘ç™½å¯¹è±¡çš„æ–°æŒ‡é’ˆã€‚å›å¿†ä¸€ä¸‹ï¼Œé»‘å¯¹è±¡è¡¨ç¤ºå…¶å·²å®Œå…¨è¢«åƒåœ¾å›æ”¶å™¨æ‰«æï¼Œå¹¶ä¸ä¼šå†è¿›è¡ŒäºŒæ¬¡æ‰«æã€‚å› æ­¤å¦‚æœæœ‰â€œé»‘â†’ç™½â€è¿™æ ·çš„æŒ‡é’ˆå‡ºç°ï¼Œæˆ‘ä»¬å°±æœ‰å¯èƒ½å°†é‚£ä¸ªç™½å¯¹è±¡æ¼æ‰ï¼Œé”™å½“æ­»å¯¹è±¡å¤„ç†æ‰ã€‚ï¼ˆæ ‡è®°è¿‡ç¨‹ç»“æŸåå‰©ä½™çš„ç™½å¯¹è±¡éƒ½è¢«è®¤ä¸ºæ˜¯æ­»å¯¹è±¡ã€‚ï¼‰äºæ˜¯æˆ‘ä»¬ä¸å¾—ä¸å†åº¦å¯ç”¨å†™å±éšœã€‚ç°åœ¨å†™å±éšœä¸ä»…è®°å½•â€œè€â†’æ–°â€æŒ‡é’ˆï¼ŒåŒæ—¶è¿˜è¦è®°å½•â€œé»‘â†’ç™½â€æŒ‡é’ˆã€‚ä¸€æ—¦å‘ç°è¿™æ ·çš„æŒ‡é’ˆï¼Œé»‘å¯¹è±¡ä¼šè¢«é‡æ–°æŸ“è‰²ä¸ºç°å¯¹è±¡ï¼Œé‡æ–°æ”¾å›åˆ°åŒç«¯é˜Ÿåˆ—ä¸­ã€‚å½“ç®—æ³•å°†è¯¥å¯¹è±¡å–å‡ºæ—¶ï¼Œå…¶åŒ…å«çš„æŒ‡é’ˆä¼šè¢«é‡æ–°æ‰«æï¼Œè¿™æ ·æ´»è·ƒçš„ç™½å¯¹è±¡å°±ä¸ä¼šæ¼æ‰ã€‚\næƒ°æ€§æ¸…ç† å¢é‡æ ‡è®°å®Œæˆåï¼Œæƒ°æ€§æ¸…ç†å°±å¼€å§‹äº†ã€‚æ‰€æœ‰çš„å¯¹è±¡å·²è¢«å¤„ç†ï¼Œå› æ­¤éæ­»å³æ´»ï¼Œå †ä¸Šå¤šå°‘ç©ºé—´å¯ä»¥å˜ä¸ºç©ºé—²å·²ç»æˆä¸ºå®šå±€ã€‚æ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä¸æ€¥ç€é‡Šæ”¾é‚£äº›ç©ºé—´ï¼Œè€Œå°†æ¸…ç†çš„è¿‡ç¨‹å»¶è¿Ÿä¸€ä¸‹ä¹Ÿå¹¶æ— å¤§ç¢ã€‚å› æ­¤æ— éœ€ä¸€æ¬¡æ¸…ç†æ‰€æœ‰çš„é¡µï¼Œåƒåœ¾å›æ”¶å™¨ä¼šè§†éœ€è¦é€ä¸€è¿›è¡Œæ¸…ç†ï¼Œç›´åˆ°æ‰€æœ‰çš„é¡µéƒ½æ¸…ç†å®Œæ¯•ã€‚è¿™æ—¶å¢é‡æ ‡è®°åˆè“„åŠ¿å¾…å‘äº†ã€‚\nåœ¨ä¸¤æ®µçš„GCç¨‹åºä¹‹é—´ï¼Œå¼•ç”¨å…³ç³»å¯èƒ½å‘ç”Ÿäº†å˜åŒ–ã€‚æ‰€ä»¥ï¼Œè¿™ç§GCç®—æ³•ä¹Ÿè¦å†™å±éšœï¼Œæ¥è®°å½•å¼•ç”¨å…³ç³»çš„å˜åŒ–ã€‚è™½ç„¶è¿™ç§æ–¹å¼æ§åˆ¶äº†ä¸­æ–­æœ€é«˜æ—¶é—´ï¼Œä½†æ˜¯ç”±äºä¸­æ–­æ¬¡æ•°å¢åŠ ï¼ŒGCæ€»æ—¶é—´æ˜¯å¢åŠ çš„ã€‚\n\r å¹¶å‘æ ‡è®° å¹¶å‘å¼ GCï¼ˆconcurrentï¼‰ï¼Œå³åœ¨åƒåœ¾å›æ”¶çš„åŒæ—¶ä¸éœ€è¦åœæ­¢ç¨‹åºçš„è¿è¡Œï¼Œä¸¤è€…å¯ä»¥åŒæ—¶è¿›è¡Œï¼Œåªæœ‰åœ¨ä¸ªåˆ«æ—¶å€™éœ€è¦çŸ­æš‚åœä¸‹æ¥è®©åƒåœ¾å›æ”¶å™¨åšä¸€äº›ç‰¹æ®Šçš„æ“ä½œã€‚ä½†æ˜¯è¿™ç§æ–¹å¼ä¹Ÿè¦é¢å¯¹å¢é‡å›æ”¶çš„é—®é¢˜ï¼Œæ‰€ä»¥ä¹Ÿè¦è¿›è¡Œå†™å±éšœæ“ä½œã€‚\nä¸€èˆ¬èƒ½åœ¨åƒåœ¾å›æ”¶çš„è¿‡ç¨‹ä¸­ä¿®æ”¹å¯¹è±¡çš„å­˜åœ¨ï¼Œä¸ç®¡æ˜¯åƒåœ¾å›æ”¶å™¨æœ¬èº«è¿˜æ˜¯è¿è¡Œæ—¶ï¼Œæˆ–è€…æ˜¯æ­£åœ¨æ‰§è¡Œçš„ç¨‹åºï¼Œéƒ½ç»Ÿç§°ä¸º mutatorï¼ˆç¿»è¯‘ä¸è¯¦ï¼‰ã€‚\nå¢é‡æ ‡è®°å’Œå¹¶å‘æ ‡è®°å¯¹ç¨‹åºæ‰§è¡Œæ›´å®½æ¾çš„GCï¼Œéƒ½éœ€è¦è¿è¡Œæ—¶ä»æ•´ä½“è®¾è®¡ä¸Šä¿è¯mutatorä¸ä¼šåœ¨åƒåœ¾å›æ”¶çš„è¿‡ç¨‹ä¸­ä¸åƒåœ¾å›æ”¶å™¨åŒæ—¶ä¿®æ”¹å¯¹è±¡ï¼Œé€ æˆæ— æ³•é¢„æ–™çš„åæœã€‚æ¯”å¦‚æ¸…æ´é˜¿å§¨æ‰“æ‰«ä¸€ä¸ªæˆ¿é—´çš„æ—¶å€™å¯ä»¥æŠŠæˆ¿é—´çš„é—¨å…ˆå…³ä¸Šï¼Œè¿™æ ·ç†Šå­©å­å°±è¿›ä¸æ¥äº†ï¼Œä½†ç†Šå­©å­ä»¬ä¾ç„¶å¯ä»¥åœ¨å±‹å­é‡Œçš„å…¶ä»–åœ°æ–¹æ´»åŠ¨ã€‚åœ¨ç¨‹åºè¿è¡Œçš„åŒæ—¶è¿›è¡Œåƒåœ¾å›æ”¶è™½ç„¶å¯èƒ½å¯¼è‡´åƒåœ¾å›æ”¶çš„å‘¨æœŸå˜é•¿ï¼ˆå³é™ä½äº†åƒåœ¾å›æ”¶å•ä½æ—¶é—´å†…çš„ååé‡ï¼‰ï¼Œä½†æ˜¯å¯ä»¥é™ä½æ¯æ¬¡æš‚åœçš„æ—¶é—´ï¼Œè¿›è€Œæé«˜ç¨‹åºçš„å“åº”æ•ˆç‡ã€‚\nç„¶è€Œè¿™ç§æ–¹å¼ä¹Ÿå¹¶æœªåšåˆ°å®Œå…¨ä¸æš‚åœåŸç¨‹åºçš„è¿è¡Œï¼Œåœ¨æŸäº›ç‰¹å®šçš„GCé˜¶æ®µè¿˜æ˜¯è¦æš‚åœåŸç¨‹åºã€‚\n\r å‡†ç¡®å¼ GC (Accurate GC) è™½ç„¶ ECMA ä¸­æ²¡æœ‰è§„å®šæ•´æ•°ç±»å‹ï¼ŒNumber éƒ½æ˜¯ IEEE æµ®ç‚¹æ•°ï¼Œä½†æ˜¯ç”±äºåœ¨ CPU ä¸Šæµ®ç‚¹æ•°ç›¸å…³çš„æ“ä½œé€šå¸¸æ¯”æ•´å‹æ“ä½œè¦æ…¢ï¼Œå¤§å¤šæ•°çš„ Javascript å¼•æ“éƒ½åœ¨åº•å±‚å®ç°ä¸­å¼•å…¥äº†æ•´å‹ï¼Œç”¨äºæå‡forå¾ªç¯å’Œæ•°ç»„ç´¢å¼•ç­‰åœºæ™¯çš„æ€§èƒ½ï¼Œå¹¶é…ä»¥ä¸€å®šçš„æŠ€å·§æ¥å°†æŒ‡é’ˆå’Œæ•´æ•°ï¼ˆå¯èƒ½è¿˜æœ‰æµ®ç‚¹æ•°ï¼‰â€œå‹ç¼©â€åˆ°åŒä¸€ç§æ•°æ®ç»“æ„ä¸­èŠ‚çœç©ºé—´ã€‚\nåœ¨ V8 ä¸­ï¼Œå¯¹è±¡éƒ½æŒ‰ç…§ 4 å­—èŠ‚ï¼ˆ32 ä½æœºå™¨ï¼‰æˆ–è€… 8 å­—èŠ‚ï¼ˆ64 ä½æœºå™¨ï¼‰å¯¹é½ï¼Œå› æ­¤å¯¹è±¡çš„åœ°å€éƒ½èƒ½è¢« 4 æˆ–è€… 8 æ•´é™¤ï¼Œè¿™æ„å‘³ç€åœ°å€çš„äºŒè¿›åˆ¶è¡¨ç¤ºæœ€å 2 ä½æˆ–è€… 3 ä½éƒ½ä¼šæ˜¯ 0ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰æŒ‡é’ˆçš„è¿™å‡ ä½æ˜¯å¯ä»¥ç©ºå‡ºæ¥ä½¿ç”¨çš„ã€‚å¦‚æœå°†å¦ä¸€ç§ç±»å‹çš„æ•°æ®çš„æœ€åä¸€ä½ä¹Ÿä¿ç•™å‡ºæ¥å¦ä½œä»–ç”¨ï¼Œå°±å¯ä»¥é€šè¿‡åˆ¤æ–­æœ€åä¸€ä½æ˜¯ 0 è¿˜æ˜¯ 1ï¼Œæ¥ç›´æ¥åˆ†è¾¨ä¸¤ç§ç±»å‹ã€‚é‚£ä¹ˆï¼Œè¿™å¦ä¸€ç§ç±»å‹çš„æ•°æ®å°±å¯ä»¥ç›´æ¥å¡åœ¨å‰é¢å‡ ä½ï¼Œè€Œä¸éœ€è¦æ²¿ç€ä¸€ä¸ªæŒ‡é’ˆå»è¯»å–å®ƒçš„å®é™…å†…å®¹ã€‚åœ¨ V8 çš„è¯­å¢ƒå†…è¿™ç§ç»“æ„å«åšå°æ•´æ•°ï¼ˆSMI, small integerï¼‰ï¼Œè¿™æ˜¯è¯­è¨€å®ç°ä¸­å†å²æ‚ ä¹…çš„å¸¸ç”¨æŠ€å·§ tagging çš„ä¸€ç§ã€‚V8 é¢„ç•™æ‰€æœ‰çš„å­—ï¼ˆwordï¼Œ32ä½æœºå™¨æ˜¯ 4 å­—èŠ‚ï¼Œ64 ä½æœºå™¨æ˜¯8å­—èŠ‚ï¼‰çš„æœ€åä¸€ä½ç”¨äºæ ‡è®°ï¼ˆtagï¼‰è¿™ä¸ªå­—ä¸­çš„å†…å®¹çš„ç±»å‹ï¼Œ1 è¡¨ç¤ºæŒ‡é’ˆï¼Œ0 è¡¨ç¤ºæ•´æ•°ï¼Œè¿™æ ·ç»™å®šä¸€ä¸ªå†…å­˜ä¸­çš„å­—ï¼Œå®ƒèƒ½é€šè¿‡æŸ¥çœ‹æœ€åä¸€ä½å¿«é€Ÿåœ°åˆ¤æ–­å®ƒåŒ…å«çš„æŒ‡é’ˆè¿˜æ˜¯æ•´æ•°ï¼Œå¹¶ä¸”å¯ä»¥å°†æ•´æ•°ç›´æ¥å­˜å‚¨åœ¨å­—ä¸­ï¼Œæ— éœ€å…ˆé€šè¿‡ä¸€ä¸ªæŒ‡é’ˆé—´æ¥å¼•ç”¨è¿‡æ¥ï¼ŒèŠ‚çœç©ºé—´ã€‚\nç”±äº V8 èƒ½å¤Ÿé€šè¿‡æŸ¥çœ‹å­—çš„æœ€åä¸€ä½ï¼Œå¿«é€Ÿåœ°åˆ†è¾¨æŒ‡é’ˆå’Œæ•´æ•°ï¼Œåœ¨GCçš„æ—¶å€™ï¼ŒV8èƒ½å¤Ÿè·³è¿‡æ‰€æœ‰çš„æ•´æ•°ï¼Œæ›´å¿«åœ°æ²¿ç€æŒ‡é’ˆæ‰«æå †ä¸­çš„å¯¹è±¡ã€‚ç”±äºåœ¨ GC çš„è¿‡ç¨‹ä¸­ï¼ŒV8 èƒ½å¤Ÿå‡†ç¡®åœ°åˆ†è¾¨å®ƒæ‰€éå†åˆ°çš„æ¯ä¸€å—å†…å­˜çš„å†…å®¹å±äºä»€ä¹ˆç±»å‹ï¼Œå› æ­¤V8çš„åƒåœ¾å›æ”¶å™¨æ˜¯å‡†ç¡®å¼çš„ã€‚ä¸æ­¤ç›¸å¯¹çš„æ˜¯ä¿å®ˆå¼ GCï¼Œå³åƒåœ¾å›æ”¶å™¨å› ä¸ºæŸäº›è®¾è®¡å¯¼è‡´æ— æ³•ç¡®å®šå†…å­˜ä¸­å†…å®¹çš„ç±»å‹ï¼Œåªèƒ½ä¿å®ˆåœ°å…ˆå‡è®¾å®ƒä»¬éƒ½æ˜¯æŒ‡é’ˆç„¶åå†åŠ ä»¥éªŒè¯ï¼Œä»¥å…è¯¯å›æ”¶ä¸è¯¥å›æ”¶çš„å†…å­˜ï¼Œå› æ­¤å¯èƒ½è¯¯å°†æ•°æ®å½“ä½œæŒ‡é’ˆï¼Œè¿›è€Œè¯¯ä»¥ä¸ºä¸€äº›å¯¹è±¡ä»ç„¶è¢«å¼•ç”¨ï¼Œæ— æ³•å›æ”¶è€Œæµªè´¹å†…å­˜ã€‚åŒæ—¶å› ä¸ºä¿å®ˆå¼çš„åƒåœ¾å›æ”¶å™¨æ²¡æœ‰åè¶³çš„æŠŠæ¡åŒºåˆ†æŒ‡é’ˆå’Œæ•°æ®ï¼Œä¹Ÿå°±ä¸èƒ½ç¡®ä¿è‡ªå·±èƒ½å®‰å…¨åœ°ä¿®æ”¹æŒ‡é’ˆï¼Œæ— æ³•ä½¿ç”¨é‚£äº›éœ€è¦ç§»åŠ¨å¯¹è±¡ï¼Œæ›´æ–°æŒ‡é’ˆçš„ç®—æ³•ã€‚\n\r å‡†ç¡®å¼çš„ GC é¿å…äº†ä¿å®ˆå¼ GC å¸¦æ¥çš„å¼Šç«¯ï¼Œèƒ½å¤Ÿå°½æ—©æ— é—æ¼åœ°å›æ”¶å†…å­˜ï¼Œå¹¶ä¸”èƒ½å¤Ÿåœ¨GCè¿‡ç¨‹ä¸­ç§»åŠ¨å¯¹è±¡ä»¥ç¼“è§£å†…å­˜ç¢ç‰‡é—®é¢˜ã€‚\næŸ¥çœ‹åŸæ–‡\r","date":"2021-07-03","permalink":"/zh-cn/posts/javascripts/js_gc/","series":["å‰ç«¯"],"tags":["Javascript","nodejs","åƒåœ¾å›æ”¶"],"title":"è¯¦ç»†è®²è§£node/v8/jsåƒåœ¾å›æ”¶æœºåˆ¶"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ ¹æ®ä¸€ä¸ªæ•°ç»„ï¼ˆå‰åºéå†ã€å±‚æ¬¡éå†ï¼‰åˆ›å»ºä¸€ä¸ªäºŒå‰æ ‘ï¼Œå¹¶æ˜¾ç¤ºäºŒå‰æ ‘çš„å·¦å³è§†å›¾ã€‚\nå°è¯•ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹ï¼Œä¸ä½¿ç”¨classã€‚\n1. å®šä¹‰äºŒå‰æ ‘èŠ‚ç‚¹ function BuildBiTreeNode(value = null, left = null, right = null) { return { value, left, right }; } 2. è®¾ç½®è¡¨ç¤ºäºŒå‰æ ‘çš„ä¸¤ç§Arrayï¼ˆå‰åºéå†ã€å±‚åºéå†ï¼‰ å‡è®¾æœ‰ä¸€ä¸ªäºŒå‰æ ‘å¯ä»¥ç”¨ä»¥ä¸‹ä¸¤ç§Arrayæ¥è¡¨ç¤ºï¼š\n// pre å‰åºéå† const input = [\u0026#39;1\u0026#39;,\u0026#39;2\u0026#39;,\u0026#39;4\u0026#39;,\u0026#39;7\u0026#39;,\u0026#39;#\u0026#39;,\u0026#39;#\u0026#39;,\u0026#39;8\u0026#39;,\u0026#39;9\u0026#39;,\u0026#39;#\u0026#39;,\u0026#39;#\u0026#39;,\u0026#39;#\u0026#39;,\u0026#39;#\u0026#39;,\u0026#39;3\u0026#39;,\u0026#39;5\u0026#39;,\u0026#39;#\u0026#39;,\u0026#39;#\u0026#39;,\u0026#39;6\u0026#39;,\u0026#39;#\u0026#39;,\u0026#39;10\u0026#39;]; // level å±‚åºéå† const input = [\u0026#39;1\u0026#39;,\u0026#39;2\u0026#39;,\u0026#39;3\u0026#39;,\u0026#39;4\u0026#39;,\u0026#39;-\u0026#39;,\u0026#39;5\u0026#39;,\u0026#39;6\u0026#39;,\u0026#39;7\u0026#39;,\u0026#39;8\u0026#39;,\u0026#39;-\u0026#39;,\u0026#39;-\u0026#39;,\u0026#39;-\u0026#39;,\u0026#39;10\u0026#39;,\u0026#39;-\u0026#39;,\u0026#39;-\u0026#39;,\u0026#39;9\u0026#39;]; äºŒå‰æ ‘å¦‚å›¾æ‰€ç¤ºï¼š\näºŒå‰æ ‘ç¤ºä¾‹\r 3. å®šä¹‰MODEæšä¸¾ const MODE = { PRE: 0, // å‰åºè¡¨ç¤ºæ³•  LEVEL: 1 // å±‚åºè¡¨ç¤ºæ³• }; 4. åˆ©ç”¨å‡½æ•°ç§‘é‡ŒåŒ–å¯¹ä¸åŒMODEè¿”å›ä¸åŒæ„å»ºäºŒå‰æ ‘çš„æ–¹æ³• function traverse(mode, flag) { if (!Object.values(MODE).includes(mode)) throw TypeError(\u0026#39;modeå¿…é¡»æ˜¯BuildBiTree.MODEç±»å‹\u0026#39;); const _pre = arr =\u0026gt; { if (arr.length === 0) return; const value = arr.pop(); if (value === flag) return null; const node = BuildBiTreeNode(value); node.left = _pre(arr); node.right = _pre(arr); return node; }; const _level = (arr) =\u0026gt; { if (arr.length === 0) return; let value = arr.pop(); let node = BuildBiTreeNode(value); const root = node; const level_arr = [node]; while (level_arr.length \u0026gt; 0) { const curNode = level_arr.shift(); value = arr.pop(); if (value !== flag) { if (typeof value === \u0026#39;undefined\u0026#39;) break; node = BuildBiTreeNode(value); curNode.left = node; level_arr.push(node); } value = arr.pop(); if (value !== flag) { if (typeof value === \u0026#39;undefined\u0026#39;) break; node = BuildBiTreeNode(value); curNode.right = node; level_arr.push(node); } } return root; }; return { [MODE.PRE]: _pre, [MODE.LEVEL]: _level }[mode]; } 5. æ„å»ºäºŒå‰æ ‘ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«äºŒå‰æ ‘ã€å·¦è§†å›¾æ–¹æ³•ã€å³è§†å›¾æ–¹æ³•çš„å¯¹è±¡ function BuildBiTree(input_array, mode=MODE.PRE, flag=\u0026#39;#\u0026#39;) { if (typeof flag !== \u0026#39;string\u0026#39;) throw TypeError(\u0026#39;flagå¿…é¡»æ˜¯stringç±»å‹\u0026#39;); if (!Array.isArray(input_array) || input_array.length === 0) return null; const fn = traverse(mode, flag); let tree = fn(input_array.slice().reverse()); tree.toJson = function(space) { return JSON.stringify(this, undefined, space); }; const _leftView = (root, level, viewArr) =\u0026gt; { if (!root) return; if (level === viewArr.length) viewArr.push(root.value); _leftView(root.left, level + 1, viewArr); _leftView(root.right, level + 1, viewArr); }; const _rightView = (root, level, viewArr) =\u0026gt; { if (!root) return; if (level === viewArr.length) viewArr.push(root.value); _rightView(root.right, level + 1, viewArr); _rightView(root.left, level + 1, viewArr); }; return { tree, leftView() { const viewArr = []; _leftView(this.tree, 0, viewArr); return viewArr; }, rightView() { const viewArr = []; _rightView(this.tree, 0, viewArr); return viewArr; } }; } BuildBiTree.MODE = MODE; 6. æµ‹è¯•æ•ˆæœ const input = [\u0026#39;1\u0026#39;,\u0026#39;2\u0026#39;,\u0026#39;4\u0026#39;,\u0026#39;7\u0026#39;,\u0026#39;#\u0026#39;,\u0026#39;#\u0026#39;,\u0026#39;8\u0026#39;,\u0026#39;9\u0026#39;,\u0026#39;#\u0026#39;,\u0026#39;#\u0026#39;,\u0026#39;#\u0026#39;,\u0026#39;#\u0026#39;,\u0026#39;3\u0026#39;,\u0026#39;5\u0026#39;,\u0026#39;#\u0026#39;,\u0026#39;#\u0026#39;,\u0026#39;6\u0026#39;,\u0026#39;#\u0026#39;,\u0026#39;10\u0026#39;]; // pre å‰åºéå† // const input = [\u0026#39;1\u0026#39;,\u0026#39;2\u0026#39;,\u0026#39;3\u0026#39;,\u0026#39;4\u0026#39;,\u0026#39;-\u0026#39;,\u0026#39;5\u0026#39;,\u0026#39;6\u0026#39;,\u0026#39;7\u0026#39;,\u0026#39;8\u0026#39;,\u0026#39;-\u0026#39;,\u0026#39;-\u0026#39;,\u0026#39;-\u0026#39;,\u0026#39;10\u0026#39;,\u0026#39;-\u0026#39;,\u0026#39;-\u0026#39;,\u0026#39;9\u0026#39;]; // level å±‚åºéå† const myTree = BuildBiTree(input, BuildBiTree.MODE.PRE, \u0026#39;#\u0026#39;); console.log(\u0026#39;tree: \u0026#39;, myTree.tree.toJson(2)); console.log(\u0026#39;left view: \u0026#39;, myTree.leftView()); console.log(\u0026#39;right view: \u0026#39;, myTree.rightView()); ","date":"2021-07-03","permalink":"/zh-cn/posts/javascripts/bi_tree_leftrightview/","series":["ç®—æ³•"],"tags":["JavaScript","äºŒå‰æ ‘"],"title":"äºŒå‰æ ‘çš„åˆ›å»ºåŠå·¦å³è§†å›¾"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"YOLOV5æ¨¡å‹éƒ¨ç½²åˆ°Androidçš„è¿‡ç¨‹è®°å½•ï¼Œç³»ç»Ÿç¯å¢ƒï¼šUbuntu\n 1. PyTorchæ¨¡å‹è½¬ONNX 1.1 è¿›å…¥yolov5æ ¹ç›®å½•ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ cd path/to/yolov5 python models/export.py --weights runs/train/exp/weights/best.pt --train --include onnx å…¶ä¸­ç¬¬äºŒè¡Œå‘½ä»¤ä¸­çš„--weightsæŒ‡ä¿å­˜çš„å‚æ•°æ–‡ä»¶ï¼›\n--trainè¡¨ç¤ºæ¨¡å‹ä»¥trainæ¨¡å¼è¿›è¡Œï¼Œä¸»è¦æ˜¯æ ¹æ®yolov5çš„ä»£ç æ¥çœ‹ï¼Œéœ€è¦å¯¼å‡ºtrainæ¨¡å¼çš„ç½‘ç»œç»“æ„ï¼Œå› ä¸ºforwardéœ€è¦returnä¸‰ä¸ªè¾“å‡ºï¼Œå¦‚æœæ˜¯evalæ¨¡å¼ï¼Œè¾“å‡ºçš„ä¸æ˜¯è¿™ç§æ ¼å¼ï¼›\n--includeè¡¨ç¤ºéœ€è¦å¯¼å‡ºçš„ç›®æ ‡æ ¼å¼æœ‰å“ªäº›ï¼Œå› ä¸ºç›®å‰åªéœ€è¦onnxï¼Œæ‰€ä»¥éœ€è¦åªå†™onnxï¼Œé»˜è®¤å¯¼å‡ºå„ç§æ”¯æŒçš„æ ¼å¼\n1.2 è¿›å…¥onnxæ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œç®€åŒ–onnx cd path/to/yolov5/runs/train/exp/weights python -m onnxsim best.onnx best-sim.onnx å…¶ä¸­æ¨¡å—onnxsimæ˜¯éœ€è¦ä¸‹è½½çš„ï¼Œä½¿ç”¨pip install onnx-simplifierï¼› å®‰è£…å®Œonnx-simplifieråå³å¯ä½¿ç”¨å¦‚ä¸Šå‘½ä»¤æ¥ç®€åŒ–onnxæ–‡ä»¶ï¼Œå¾—åˆ°best-sim.onnxï¼›\n2. ONNXè½¬NCNN 2.1 ä¸‹è½½ncnné¢„ç¼–è¯‘ç‰ˆæœ¬ å¯ä»¥åˆ°githubä¸‹è½½ncnnæºç \rå¹¶è‡ªè¡Œç¼–è¯‘ï¼Œæœ¬æ–‡åªè®²é¢„ç¼–è¯‘ç‰ˆæœ¬\rçš„ä½¿ç”¨ã€‚\næˆ‘çš„ç¯å¢ƒæ˜¯Ubuntu16ï¼Œæ‰€ä»¥ä¸‹è½½çš„æ˜¯ncnn-20210525-ubuntu-1604-shared.zip\rã€‚ç›®å‰ä¸æ¸…æ¥šsharedç‰ˆå’Œæ— sharedç‰ˆçš„åŒºåˆ«ï¼Œä¸è¿‡è²Œä¼¼ä¸å¸¦sharedçš„ç‰ˆæœ¬ç¼ºä¸€äº›ä¸œè¥¿å¯¼è‡´æŠ¥é”™ã€‚\nå°†å‹ç¼©æ–‡ä»¶è§£å‹åå³å¯ä½¿ç”¨ncnnäº†ã€‚\n2.2 è¿›å…¥onnxæ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œå¹¶è½¬åŒ–ä¸ºncnnçš„paramæ–‡ä»¶å’Œbinæ–‡ä»¶ cd path/to/yolov5/runs/train/exp/weights path/to/ncnn/bin/onnx2ncnn best-sim.onnx yolov5s-traffic.param yolov5s-traffic.bin ä¸å‡ºæ‰€æ–™ï¼Œè½¬åŒ–å®Œæˆï¼Œä½†æ˜¯å‡ºç°å¦‚ä¸‹æŠ¥é”™ï¼š\nè½¬æ¢è¿‡ç¨‹ä¸­æœ‰ä¸€äº›ä¸æ”¯æŒçš„ç»“æ„\r æ­¤æ—¶éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ç”Ÿæˆçš„paramæ–‡ä»¶æ¥è§£å†³é”™è¯¯ã€‚\n2.3 ä¿®æ”¹paramæ–‡ä»¶ä¸­çš„å†…å®¹æ¥æ›´æ”¹ç½‘ç»œç»“æ„ ä¸‹å›¾ä¸ºparamæ–‡ä»¶ä¿®æ”¹å‰çš„æƒ…å†µï¼š\nä¿®æ”¹å‰çš„å†…å®¹\r è½¬æ¢é”™è¯¯çš„å±‚ä¸º5åˆ°12è¡Œçš„Cropæ“ä½œï¼Œå› æ­¤éœ€è¦å°†4åˆ°13è¡Œå…¨éƒ¨åˆ é™¤å¹¶ä½“ä¼šä¸ºè‡ªå®šä¹‰å±‚YoloV5Focusã€‚å› ä¸ºä¸€å…±å‡å°‘äº†9å±‚ï¼Œæ‰€ä»¥å°†ç¬¬2è¡Œçš„ç¬¬1ä¸ªå€¼å‡9ï¼š\næ¢ä¸ºè‡ªå®šä¹‰å±‚åçš„å†…å®¹\r å¦å¤–ï¼Œç½‘ç»œæœ€åæœ‰ä¸‰ä¸ªreshapeå±‚ï¼Œæˆ‘ä»¬éœ€è¦å®ç°è¾“å…¥ä»»æ„å°ºå¯¸çš„å›¾ç‰‡ï¼Œå› æ­¤éœ€è¦å°†ä½ç½®0çš„å¤§å°æ”¹ä¸º-1ä»¥å®ç°è‡ªåŠ¨è®¡ç®—å¤§å°ï¼š\nä¿®æ”¹reshapeå±‚çš„å†…å®¹\r 2.4 ä¼˜åŒ–paramæ–‡ä»¶å’Œbinæ–‡ä»¶ path/to/ncnn/bin/ncnnoptimize yolov5s-traffic.param yolov5s-traffic.bin yolov5s-traffic-opt.param yolov5s-traffic-opt.bin 1 å…¶ä¸­æœ«å°¾çš„1è¡¨ç¤ºå°†float32ä¼˜åŒ–ä¸ºfloat16ä»¥é™ä½æ–‡ä»¶å¤§å°ã€‚\n","date":"2021-06-21","permalink":"/zh-cn/posts/pythons/pytorch_to_android/","series":["deep learning"],"tags":["pytorch","yolov5","android","onnx","ncnn"],"title":"PyTorchæ¨¡å‹éƒ¨ç½²åˆ°Android"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"æ·±åº¦å­¦ä¹ è¶…å¼ºå¤§çš„ä¸€æ¬¾å¯è§†åŒ–å·¥å…·\n 1. å®‰è£… pip install wandb 2. ä½¿ç”¨ import wandb # ä½¿ç”¨è‡ªå·±çš„ W\u0026amp;B è´¦å·ç™»å½• wandb.login() # å¼€å¯ä¸€ä¸ªæ–°çš„ run æ¥è¿½è¸ª wandb.init( # æŒ‡å®šé¡¹ç›®åç§° project=\u0026#34;basic-intro\u0026#34;, # è·Ÿè¸ªè¶…å‚æ•°å¹¶è¿è¡Œå…ƒæ•°æ® config={ \u0026#34;learning_rate\u0026#34;: 0.02, \u0026#34;architecture\u0026#34;: \u0026#34;CNN\u0026#34;, \u0026#34;dataset\u0026#34;: \u0026#34;CIFAR-100\u0026#34;, } ) # åœ¨éœ€è¦æ˜¾ç¤ºçš„åœ°æ–¹ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ wandb.log({ \u0026#34;acc\u0026#34;: acc, \u0026#34;loss\u0026#34;: loss, }) # ç»“æŸ wandb.finish() å®˜æ–¹æ–‡æ¡£\r","date":"2021-06-02","permalink":"/zh-cn/posts/pythons/weights_and_biases/","series":["deep learning"],"tags":["wandb"],"title":"Weights \u0026 Biases æ·±åº¦å­¦ä¹ å¯è§†åŒ–å·¥å…·"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"JavaScriptä¸­çš„ç»§æ‰¿ã€åŸå‹ã€åŸå‹é“¾ï¼Œä»¥åŠç±»çš„åˆ›å»º\n1. ç»§æ‰¿  JavaScriptä¸­æœ‰6ç§ç»§æ‰¿æ–¹å¼ï¼šåŸºæœ¬ç»§æ‰¿ã€å€Ÿç”¨æ„é€ å‡½æ•°ã€ç»„åˆç»§æ‰¿ã€åŸå‹å¼ç»§æ‰¿ã€å¯„ç”Ÿå¼ç»§æ‰¿ã€å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿\n 1.1 åŸºæœ¬ç»§æ‰¿ function Parent() {} Parent.prototype.method1() {} function Child() {} Child.prototype = new Parent() Child.prototype.constructor = Child å³é€šè¿‡å°†Parentçš„ä¸€ä¸ªå®ä¾‹ç›´æ¥ä½œä¸ºå­ç±»Childçš„åŸå‹å¯¹è±¡ï¼Œæ‰€æœ‰Childå®ä¾‹éƒ½é€šè¿‡__proto__æŒ‡å‘è¿™ä¸ªParentå®ä¾‹ã€‚\nå¼Šç«¯ï¼š\n  åŸå‹å¯¹è±¡ä¸­çš„æ‰€æœ‰å¼•ç”¨ç±»å‹çš„å€¼ä¼šè¢«å­ç±»å…±äº«\n  æ— æ³•åœ¨æ„é€ å­ç±»çš„æ—¶å€™å‘çˆ¶ç±»çš„æ„é€ å‡½æ•°åŠ¨æ€ä¼ å€¼\n  å› æ­¤ï¼Œè¿™ç§ç»§æ‰¿æ–¹å¼å‡ ä¹å¾ˆå°‘å•ç‹¬ä½¿ç”¨ï¼Œä½†å½“çˆ¶ç±»åªæ˜¯å®šä¹‰äº†ä¸€äº›æ–¹æ³•æ—¶ï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨è¯¥æ–¹å¼ã€‚\n1.2 å€Ÿç”¨æ„é€ å‡½æ•° function Parent(name, age) { this.name = name this.age = age } // ä½¿ç”¨newæ¥åˆ›å»ºä¸€ä¸ªç¤ºä¾‹ const parent = new Parent(\u0026#39;Alan Wei\u0026#39;, 26) // newçš„å®ç°åŸç†ç±»ä¼¼å¦‚ä¸‹å‡½æ•° function newObj(constructor, ...args) { const tmp = {} tmp.__proto__ = constructor.prototype constructor.call(tmp, ...args) return tmp } const parent2 = newObj(Parent, \u0026#39;Alan Wei\u0026#39;, 26) æ€è€ƒä¸€ä¸‹ï¼Œæ—¢ç„¶æ„é€ å‡½æ•°å¯ä»¥ç”¨æ¥æ„é€ ç©ºå¯¹è±¡ï¼Œä¸ºä»€ä¹ˆä¸èƒ½ç”¨æ¥æ„é€ å­ç±»å®ä¾‹å‘¢ï¼Ÿæ¯”å¦‚ï¼š\nfunction Child(name, age) { Parent.call(this, name, age) } const child = new Child(\u0026#39;Alan Wei\u0026#39;, 26) æ­¤æ—¶ï¼Œæˆ‘ä»¬â€œå€Ÿç”¨â€äº†Parentçš„æ„é€ å‡½æ•°ä½œä¸ºæ„é€ è§„åˆ™ï¼Œä¸ºChildåˆ›å»ºäº†å®ä¾‹ï¼ˆä½¿ç”¨newè°ƒç”¨Childæ—¶ï¼Œå†…éƒ¨çš„thiså°±æ˜¯ä¸€ä¸ªChildå®ä¾‹ï¼‰ã€‚ç°åœ¨æˆ‘ä»¬åœ¨Parentæ„é€ å‡½æ•°ä¸­å®šä¹‰çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•éƒ½ä¼šç»™å½“å‰Childå®ä¾‹é‡æ–°å®šä¹‰ä¸€éï¼Œä»è€Œå®ç°äº†ç»§æ‰¿ã€‚\nè§£å†³äº†ç¬¬ä¸€ç§ç»§æ‰¿æ–¹å¼çš„ä¸¤å¤§å¼Šç«¯ï¼š\n  å¼•ç”¨ç±»å‹å±æ€§çš„å…±äº«ã€‚ç°åœ¨æ¯ä¸ªå­ç±»å®ä¾‹çš„å±æ€§éƒ½æ˜¯å€Ÿç”¨çˆ¶ç±»æ„é€ å‡½æ•°æ–°å®šä¹‰çš„ï¼Œå› æ­¤ç›¸äº’ç‹¬ç«‹ã€‚\n  æ— æ³•å‘çˆ¶ç±»æ„é€ å‡½æ•°åŠ¨æ€ä¼ å€¼ã€‚ç°åœ¨å‘Childä¼ å…¥çš„å‚æ•°åˆè¢«ä¼ ç»™äº†çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå› æ­¤è¯¥é—®é¢˜ä¹Ÿå¾—åˆ°äº†è§£å†³ã€‚\n  ç¼ºç‚¹ï¼š\nçˆ¶ç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•éƒ½éœ€è¦é‡æ–°æ„é€ ä¸€éï¼Œå¯¼è‡´æ–¹æ³•æ— æ³•è¢«å…±äº«ï¼Œæ¯ä¸ªå­ç±»éƒ½éœ€è¦ç»´æŠ¤ä¸€ä¸ªç›¸åŒçš„æ–¹æ³•ï¼Œå¤±å»äº†ç»§æ‰¿çš„æœ¬è´¨ã€‚\nå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘èåˆä¸Šé¢ä¸¤ç§æ–¹æ³•çš„ä¼˜ç‚¹ï¼Œåˆ›é€ ä¸€ç§æ›´å¥½çš„ç»§æ‰¿æ–¹å¼ã€‚\n1.3 ç»„åˆç»§æ‰¿ ç»„åˆä½¿ç”¨ä¸Šè¿°ä¸¤ç§ç»§æ‰¿æ–¹å¼ï¼Œæ¥å®ç°æ–¹æ³•çš„å…±äº«å’Œå±æ€§çš„ç‹¬ç«‹æ„é€ ã€‚é€šç”¨ä¹ æƒ¯å°±æ˜¯ï¼ŒæŠŠå±æ€§æ”¾åœ¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ä¸­ï¼ŒæŠŠæ–¹æ³•æ”¾åœ¨çˆ¶ç±»çš„åŸå‹ä¸Šã€‚\nfunction Child(name, age) { Parent.call(this, name, age) } Child.prototype = new Parent() // Childä¸­å®šä¹‰è‡ªå·±çš„constructoræŒ‡å‘ï¼Œå¦åˆ™ä¼šè‡ªåŠ¨é€šè¿‡åŸå‹é“¾ä½¿ç”¨çˆ¶ç±»åŸå‹å¯¹è±¡ä¸Šçš„constructor Child.constructor = Child ä½†è¿™ç§æ–¹å¼å¹¶éå®Œç¾ï¼Œå®é™…ä¸Šéœ€è¦è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ä¸¤æ¬¡ï¼š\nfunction Child(name, age) { Parent.call(this, name, age) // ç¬¬äºŒæ¬¡è°ƒç”¨Parentçš„æ„é€ å‡½æ•° } Child.prototype = new Parent() // ç¬¬ä¸€æ¬¡è°ƒç”¨Parentçš„æ„é€ å‡½æ•° Child.constructor = Child const child = new Child(\u0026#39;Alan Wei\u0026#39;, 26) æ—¢ç„¶å­ç±»ä¼šæœ‰Parentæ„é€ å‡ºæ¥å±æ€§ï¼Œå¿…ç„¶å±è”½ChildåŸå‹å¯¹è±¡ä¸ŠParentå®ä¾‹å±æ€§ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦æµªè´¹æ—¶é—´å’Œå†…å­˜å»æ„é€ å®ƒå‘¢ï¼Ÿä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåˆè¡ç”Ÿå‡ºä¸‹é¢çš„ç»§æ‰¿æ–¹å¼ã€‚\n1.4 åŸå‹å¼ç»§æ‰¿ ä¸åŸºæœ¬ç»§æ‰¿çš„åŸå‹å¼ç»§æ‰¿çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œè¿™æ˜¯ä¸€ç§æ›´â€œå¹²å‡€â€çš„å®ç°ï¼Œå®ƒåªç»§æ‰¿çˆ¶ç±»çš„åŸå‹ï¼Œè€Œä¸ç»§æ‰¿çˆ¶ç±»æ„é€ å‡½æ•°ä¸­çš„å±æ€§ï¼ˆåŠå¯èƒ½å­˜åœ¨çš„æ–¹æ³•ï¼‰ã€‚\nfunction createObj( prototype ) { // é‡å»ºä¸€ä¸ªç©ºæ„é€ å‡½æ•°  function F(){} // å°†è¯¥æ„é€ å‡½æ•°çš„åŸå‹é“¾æ›¿æ¢ä¸ºä¼ å…¥çš„åŸå‹å¯¹è±¡  F.prototype = prototype // åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œä½†è¯¥å¯¹è±¡çš„__proto__æŒ‡å‘ä¼ å…¥çš„prototype  return new F() } // childæ˜¯ä¸ªç©ºå¯¹è±¡ï¼Œä½†å¯ä»¥å€ŸåŠ©åŸå‹é“¾è®¿é—®Parentçš„åŸå‹å±æ€§å’Œæ–¹æ³• const child = createObj(Parent.prototype) ä¸Šé¢è¿™ç§æ–¹å¼åœ¨ES5ä¸­å¾—åˆ°äº†åŸç”Ÿå®ç°ï¼Œå³Object.create()æ–¹æ³•ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªåŸå‹å¯¹è±¡è¿›å»ï¼Œæ„é€ ä¸€ä¸ªä»¥è¯¥åŸå‹ä¸ºåŸå‹çš„ç©ºå¯¹è±¡ï¼Œè¿™åœ¨æŸäº›è½»é‡çº§çš„ç»§æ‰¿åœºæ™¯ä¸­æ˜¯ååˆ†ä¾¿æ·çš„ï¼š\nconst child = Object.create(Parent.prototype) child.name = \u0026#39;Alan Wei\u0026#39; child.age = 26 è¯¥ç»§æ‰¿æ–¹å¼æ˜¾ç„¶æœ‰ç€è‡ªå·±çš„ç¼ºé™·ï¼Œä½†å®ƒå´ä¸ºè§£å†³ç»„åˆç»§æ‰¿çš„é‡å¤æ„é€ é—®é¢˜æä¾›äº†æ€è·¯ã€‚åœ¨ä»‹ç»å¦‚ä½•é€šè¿‡åŸå‹å¼ç»§æ‰¿æ¥è§£å†³ç»„åˆç»§æ‰¿é‡åˆ°çš„é—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬å†ä»‹ç»å¦å¤–ä¸€ç§ç»§æ‰¿æ–¹å¼ - å¯„ç”Ÿå¼ç»§æ‰¿ï¼Œå®ƒæ˜¯åŸå‹å¼ç»§æ‰¿çš„å·¥å‚åŒ–ç‰ˆæœ¬ã€‚\n1.5 å¯„ç”Ÿå¼ç»§æ‰¿ åœ¨ä¸Šé¢çš„åŸå‹å¼ç»§æ‰¿ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç©ºçš„å­ç±»å¯¹è±¡ä¹‹åï¼Œéœ€è¦æ‰‹åŠ¨ä¸ºå…¶æ·»åŠ è‡ªæœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¦‚ï¼š\nconst child = Object.create(Parent.prototype) child.name = \u0026#39;Alan Wei\u0026#39; child.age = 26 ä¸Šè¿°ä¸‰æ¡è¯­å¥éƒ½æ˜¯ç”¨äºæ„é€ å­ç±»å¯¹è±¡çš„ï¼Œä½†å´æ˜¯ç‹¬ç«‹çš„ï¼Œæˆ‘ä»¬è®¤ä¸ºè¿™æ ·è€¦åˆæ€§è¾ƒå·®ï¼Œå°è£…ç¨‹åº¦ä¸å¤Ÿï¼Œå› æ­¤æˆ‘ä»¬é€šå¸¸ä¼šå°†å…¶å°è£…ä¸ºä¸€ä¸ªå‡½æ•°ï¼š\nfunction createChild(Parent) { const child = Object.create(Parent.prototype) child.name = \u0026#39;Alan Wei\u0026#39; child.age = 24 } const child = createChild(Parent) å½“æˆ‘ä»¬å®šä¹‰äº†ä¸Šè¿°å‡½æ•°ä¹‹åï¼Œæ¯æ¬¡æ„é€ ä¸€ä¸ªå­ç±»å¯¹è±¡ï¼Œåªéœ€è¦å†™ä¸‹é¢çš„ä¸€è¡Œè¯­å¥å³å¯ï¼Œä»£ç çœ‹ä¸Šå»ä¹Ÿä¼˜é›…äº†å¾ˆå¤šï¼Œè¿™å°±æ˜¯æ‰€è°“çš„å¯„ç”Ÿå¼ç»§æ‰¿ã€‚æ‰€ä»¥ï¼Œå¯„ç”Ÿå¼ç»§æ‰¿å°±æ˜¯åŸå‹å¼ç»§æ‰¿çš„ä¸€ä¸ªå·¥å‚åŒ–ï¼ˆå°†ä¸€ç³»åˆ—æµç¨‹å°è£…åœ¨ä¸€èµ·ï¼Œè¿›è¡Œå¿«é€Ÿæ‰¹é‡ç”Ÿäº§ï¼‰ç‰ˆæœ¬ã€‚\næ˜¾ç„¶å¯„ç”Ÿå¼ç»§æ‰¿å¹¶ä¸æ˜¯ä¸ºäº†è§£å†³åŸå‹å¼ç»§æ‰¿çš„é—®é¢˜è€Œå­˜åœ¨çš„ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥äº†è§£ä¸€ç§æ›´åŠ ä¼˜é›…çš„ç»§æ‰¿æ–¹å¼ - å¯„ç”Ÿå¼ç»„åˆç»§æ‰¿ã€‚\n1.6 å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ æ€è·¯ï¼šç”¨åŸå‹å¼ç»§æ‰¿æ›¿æ¢ç»„åˆç»§æ‰¿ä¸­çš„åŸºæœ¬ç»§æ‰¿\nfunction Parent(name, age) { this.name = name this.age = age } Parent.prototype.method1 = function() {} function Child(name, age) { Parent.call(this, name, age) } Child.prototype = Object.create(Parent.prototype) Child.prototype.constructor = Child const child = new Child(\u0026#39;Alan Wei\u0026#39;, 26) ç›®å‰ï¼Œå¯„ç”Ÿç»„åˆå¼ç»§æ‰¿è¢«è®¤ä¸ºæ˜¯JavaScriptå®ç°ç»§æ‰¿çš„ä¸€ç§æ¯”è¾ƒç†æƒ³çš„æ–¹å¼ã€‚\n","date":"2021-05-22","permalink":"/zh-cn/posts/javascripts/prototype_chain/","series":["å‰ç«¯"],"tags":["JavaScript","prototype","ç»§æ‰¿","åŸå‹é“¾","ES5","ES6"],"title":"JavaScriptç»§æ‰¿ã€åŸå‹å’ŒåŸå‹é“¾"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"å¼€è¯¾å§VUEä½“éªŒè¯¾ç¬”è®°\n \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;{{title}}\u0026lt;/h3\u0026gt; \u0026lt;h3\u0026gt;{{state.title}}\u0026lt;/h3\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;script\u0026gt; // æ¥æ”¶objï¼Œä»£ç†å®ƒï¼Œä½¿ä»–æˆä¸ºå“åº”å¼çš„  // æ›¿æ¢Object.defineProperty()  function reactive(obj) { // vue3ä¸­åŸºäºProxy  return new Proxy(obj, { get(target, key) { console.log(\u0026#39;get\u0026#39;, key) // ä¾èµ–æ”¶é›†  track(target, key) return target[key] }, set(target, key, val) { console.log(\u0026#39;set\u0026#39;, key) target[key] = val // update()  // app.update()  // è§¦å‘ä¾èµ–  trigger(target, key) }, }) } // æ·»åŠ å‰¯ä½œç”¨å‡½æ•°  const effectStack = [] // ä¸´æ—¶å­˜å‚¨fn  function effect(fn) { // å¦‚æœfnä¸­ç”¨åˆ°äº†å“åº”å¼æ•°æ®ï¼Œå½“ä»–ä»¬å‘ç”Ÿå˜åŒ–ï¼Œfnä¼šå†æ¬¡æ‰§è¡Œï¼Œç§°ä¸ºå‰¯ä½œç”¨å‡½æ•°  const eff = function() { try { effectStack.push(eff) fn() } finally { effectStack.pop() } } // æ‰§è¡Œä¸€æ¬¡ï¼Œå‡ºå‘ä¾èµ–æ”¶é›†  eff() return eff } // ä¾èµ–æ”¶é›†å‡½æ•°track  // {target: {key: [eff]}}  const targetMap = {} function track(target, key) { // è·å–å‰¯ä½œç”¨å‡½æ•°  const effect = effectStack[effectStack.length - 1] if (effect) { let map = targetMap[target] if (!map) { map = targetMap[target] = {} } let deps = map[key] if (!deps) { deps = map[key] = [] } // å°†å‰¯ä½œç”¨å‡½æ•°æ”¾å…¥deps  if (deps.indexOf(effect) === -1) { deps.push(effect) } } } function trigger(target, key) { const map = targetMap[target] if (map) { const deps = map[key] if (deps) { deps.forEach(dep =\u0026gt; dep()) } } } function h(tag, props, children) { return {tag, props, children} } // createAppè¿”å›åº”ç”¨ç¨‹åºå®ä¾‹æ˜¯ä»€ä¹ˆæ ·å­  const Vue = { createApp(options) { // æš´éœ²ç»™æµè§ˆå™¨å¹³å°  const renderer = Vue.createRenderer({ querySelector(selector) { return document.querySelector(selector) }, insert(child, parent, anchor) { parent.insertBefore(child, anchor || null) }, createElement(tag) { return document.createElement(tag) } }) return renderer.createApp(options) }, createRenderer({ querySelector, insert, createElement }) { // è¿”å›è‡ªå®šä¹‰çš„æ¸²æŸ“å™¨  return { createApp(options) { // è¿”å›çš„å°±æ˜¯appå®ä¾‹  return { mount(selector) { // mountçš„ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ  const parent = querySelector(selector) // éœ€è¦å°†ç»„ä»¶é…ç½®è§£æä¸ºdom  //é€šè¿‡renderå‡½æ•°å®ç°  if (!options.render) { options.render = this.compile(parent.innerHTML) } // å…¼å®¹options api  if (options.setup) { // setupStateå·²ç»æ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡  this.setupState = options.setup() } else { this.data = options.data() } // Proxy  // ç¡®å®šrenderä¸­æ•°æ®ä»å“ªè·å–  this.proxy = new Proxy(this, { get(target, key) { if (key in target.setupState) { return target.setupState[key] } else { return target.data[key] } }, set(target, key, val) { if (key in target.setupState) { target.setupState[key] = val } else { target.data[key] = val } } }) // appå®ä¾‹ä¸ŠåŠ äº†ä¸€ä¸ªæ›´æ–°å‡½æ•°  this.update = effect(() =\u0026gt; { // const el = options.render.call(this.proxy)  // // è¿½åŠ åˆ°å®¿ä¸»å…ƒç´ ä¸Šå»  // parent.innerHTML = \u0026#39;\u0026#39;  // // parent.appendChild(el)  // insert(el, parent)  // è·å–è™šæ‹Ÿdom  const vnode = options.render.call(this.proxy) // mounted  if (!this.isMounted) { // mounted  // vnode =\u0026gt; dom  const el = this.createElm(vnode) parent.innerHTML = \u0026#39;\u0026#39; insert(el, parent) this.isMounted = true } else { // update  // diff  this.patch(this._vnode, vnode) } this._vnode = vnode }) // åˆå§‹åŒ–  this.update() }, createElm(vnode) { // åˆ›å»ºæ ¹èŠ‚ç‚¹  const el = createElement(vnode.tag) // todo props  // children  if (typeof vnode.children === \u0026#39;string\u0026#39;) { el.textContent = vnode.children } else { // é€’å½’  vnode.children.forEach(child =\u0026gt; { insert(this.createElm(child), el) }) } vnode.el = el return el }, // n1: è€èŠ‚ç‚¹  // n2: æ–°èŠ‚ç‚¹  patch(n1, n2) { const el = n2.el = n1.el // åˆ¤æ–­åŒæ–¹æ˜¯å¦æ˜¯ç›¸åŒèŠ‚ç‚¹  if (n1.tag === n2.tag) { // tots props  // children  const oldCh = n1.children const newCh = n2.children if (typeof oldCh === \u0026#39;string\u0026#39;) { if (typeof newCh === \u0026#39;string\u0026#39;) { // text  if (oldCh !== newCh) { el.textContent = newCh } } else { // replace text with elements  el.textContent = \u0026#39;\u0026#39; newCh.forEach(child =\u0026gt; insert(this.createElm(child), el)) } } else { if (typeof newCh === \u0026#39;string\u0026#39;) { // replace elements with text  el.textContent = newCh } else { // children  } } } }, compile(template) { // æ²¡æœ‰ç”¨åˆ°template  return function render() { // const h3 = document.createElement(\u0026#39;h3\u0026#39;)  // h3.textContent = this.title  // return h3  // è¿”å›vnode  return h(\u0026#39;h3\u0026#39;, null, this.title) // return h(\u0026#39;h3\u0026#39;, null, [  // h(\u0026#39;p\u0026#39;, null, this.title),  // ])  } } } } } } } \u0026lt;/script\u0026gt; \u0026lt;script\u0026gt; // 1. å‡½æ•°å¼  // 2. æ ‡å‡†åŒ–ã€ç®€åŒ–ã€ä¸€è‡´æ€§:renderå‡½æ•°ï¼Œsyncä¿®é¥°ç¬¦åˆ é™¤ï¼ŒæŒ‡ä»¤å®šä¹‰ï¼Œv-modelè°ƒæ•´  // 3. tree-shakingï¼ˆæ‘‡æ ‘ä¼˜åŒ–ï¼‰  // 4. å¤ç”¨æ€§ï¼šcomposition api  // 5. æ€§èƒ½ä¼˜åŒ–ï¼šå“åº”å¼ã€ç¼–è¯‘æœŸä¼˜åŒ–  // 6. æ‰©å±•æ€§ï¼šè‡ªå®šä¹‰æ¸²æŸ“å™¨  const { createApp } = Vue const app = createApp({ data() { return { title: \u0026#39;hello vue3!\u0026#39; } }, setup() { // è°ƒå‡½æ•°ç­‰ç­‰  // è§„é¿this  const state = reactive({ title: \u0026#39;hello vue3!!!!!!\u0026#39; }) setTimeout(() =\u0026gt; { state.title = \u0026#39;vue3, hello!!!!!!\u0026#39; }, 2000) return state }, }) // app.component()  // app.directive(\u0026#39;focus\u0026#39;, {})  app.mount(\u0026#39;#app\u0026#39;) \u0026lt;/script\u0026gt; ","date":"2021-05-20","permalink":"/zh-cn/posts/webnotes/learn_vue/","series":["å‰ç«¯"],"tags":["VUE"],"title":"å­¦ä¹ VUE"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"JavaScriptä¸­çš„åç¨‹ä»¥åŠå®ç°ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼\nç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼è¾“å‡ºç¤ºä¾‹\r class Apple { static price = 10; constructor() { this.type = \u0026#39;çº¢å¯Œå£«\u0026#39;; this.location = \u0026#39;é‚¯éƒ¸\u0026#39;; this.taste = \u0026#39;ç”œ\u0026#39;; this.price = Apple.price; } toString() { return `[${Apple.name}] {type: ${this.type}, loc: ${this.location}, taste: ${this.taste}, price: ${this.price}}`; } } class Penapple { static price = -817; constructor() { this.type = \u0026#39;å‘†æ¹¾å‡¤æ¢¨\u0026#39;; this.location = \u0026#39;å‘†æ¹¾\u0026#39;; this.taste = \u0026#39;é…¸\u0026#39;; this.price = Penapple.price; } toString() { return `[${Penapple.name}] {type: ${this.type}, loc: ${this.location}, taste: ${this.taste}, price: ${this.price}}`; } } function produce (Goods) { function make (cName, i, delay = 1000) { console.log(`[ç”Ÿäº§è€…] æ­£ç»™${cName}ç”Ÿäº§ç¬¬${i}ä¸ª${Goods.name}...ï¼Œé¢„è®¡éœ€è¦${delay}ms`); return new Promise(resolve =\u0026gt; { setTimeout(() =\u0026gt; { resolve(new Goods()); }, delay); }); } return async function (c, num, delay) { const cName = c.next().value; for (let i = 1; i \u0026lt;= num; i++) { const freshGoods = await make(cName, i, delay); const cRes = c.next(freshGoods).value; console.log(`[æ¶ˆè´¹è€…åé¦ˆ] ${cRes}`); } } } function* consumer (name) { let r = name; let n; while (true) { n = yield r; if (!n) { r = \u0026#39;æ²¡ç»™æˆ‘ä¸œè¥¿å•Šï¼\u0026#39;; continue; } console.log(`[æ¶ˆè´¹è€… ${name}] æ­£ä¹° ${n}`); r = `æˆ‘æ˜¯${name}ï¼Œæˆ‘ä¹°å®Œäº†`; } } function fruitFactory (fruit) { const fruitMap = { \u0026#39;apple\u0026#39;: Apple, \u0026#39;penapple\u0026#39;: Penapple, }; if (!(fruit in fruitMap)) throw `è¿™ä¸ªå·¥å‚ä¸èƒ½ç”Ÿäº§ ${fruit}`; return produce(fruitMap[fruit]); } (async function main() { const appleProducer = fruitFactory(\u0026#39;apple\u0026#39;); const penappleProducer = fruitFactory(\u0026#39;penapple\u0026#39;); appleProducer(consumer(\u0026#39;é­é‘«\u0026#39;), 1, 5000); await penappleProducer(consumer(\u0026#39;å¼ è‰³\u0026#39;), 5); Penapple.price = 250; penappleProducer(consumer(\u0026#39;é­é‘«\u0026#39;), 1, 2000); })(); ","date":"2021-05-18","permalink":"/zh-cn/posts/javascripts/coroutine/","series":["å‰ç«¯"],"tags":["JavaScript","ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼","åç¨‹"],"title":"JavaScriptä¸­çš„åç¨‹ä¸ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"MDNæ–‡æ¡£çš„CSSå­¦ä¹ ç¬”è®°\n å°è‰³è‰³~\r 1. æ”¹å˜å…ƒç´ çš„é»˜è®¤è¡Œä¸º  å½“å¯¹æµè§ˆå™¨çš„é»˜è®¤æ ·å¼ä¸å¤ªæ»¡æ„æ—¶ï¼Œå¯ä»¥é€‰å®šé‚£ä¸ªå…ƒç´ ï¼ŒåŠ ä¸€æ¡CSSè§„åˆ™å³å¯ã€‚\n ä¾‹å¦‚ç§»é™¤æ— åºåˆ—è¡¨ \u0026lt;ul\u0026gt; è‡ªå¸¦çš„é¡¹ç›®ç¬¦å·ï¼š\nli { list-style-type: none; } list-style-typeå±æ€§å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰å­—ç¬¦ä¸²ç”šè‡³emojiï¼Œæˆ–å¾ˆå¤šç§é¢„è®¾è¯­è¨€ï¼Œå¯ä»¥æŸ¥è¡¨ã€‚\n2. æ ¹æ®çŠ¶æ€ç¡®å®šæ ·å¼  æ ¹æ®æ ‡ç­¾çš„çŠ¶æ€ç¡®å®šæ ·å¼ã€‚\n ä¾‹å¦‚ä½¿å¾—æ²¡æœ‰è¢«è®¿é—®çš„é“¾æ¥é¢œè‰²å˜ä¸ºç²‰è‰²ã€è®¿é—®è¿‡çš„é“¾æ¥é¢œè‰²å˜ä¸ºç»¿è‰²ã€é¼ æ ‡æ‚¬åœåˆ™ç§»é™¤ä¸‹åˆ’çº¿ï¼š\na:link { color: pink; } a:visited { color: green; } a:hover { text-decoration: none; } 3. å¦‚ä½•æ„å»º CSS åœ¨ HTML é‡Œåº”ç”¨ CSS åœ¨æ–‡æ¡£ä¸­åº”ç”¨ CSS æœ‰ä¸‰ç§æ–¹æ³•\nå¤–éƒ¨æ ·å¼è¡¨ \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;My CSS experiment\u0026lt;/title\u0026gt; \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;styles.css\u0026#34;\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; ... \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; \u0026lt;link\u0026gt; å…ƒç´ çš„ href å±æ€§éœ€è¦å¼•ç”¨ä½ çš„æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ–‡ä»¶ã€‚\nå†…éƒ¨æ ·å¼è¡¨ å°† CSS ç›´æ¥å†™åœ¨ HTML æ–‡ä»¶ \u0026lt;head\u0026gt; æ ‡ç­¾é‡Œçš„ \u0026lt;style\u0026gt; æ ‡ç­¾ä¹‹ä¸­ã€‚\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;My CSS experiment\u0026lt;/title\u0026gt; \u0026lt;style\u0026gt; h1 { color: blue; background-color: yellow; border: 1px solid black; } p { color: red; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;h1\u0026gt;Hello World!\u0026lt;/h1\u0026gt; \u0026lt;p\u0026gt;This is my first CSS example\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; å†…è”æ ·å¼ å­˜åœ¨äº HTML å…ƒç´ çš„ style å±æ€§ä¹‹ä¸­ã€‚æ¯ä¸ª CSS è¡¨åªå½±å“ä¸€ä¸ªå…ƒç´ ã€‚\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;My CSS experiment\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;h1 style=\u0026#34;color: blue;background-color: yellow;border: 1px solid black;\u0026#34;\u0026gt;Hello World!\u0026lt;/h1\u0026gt; \u0026lt;p style=\u0026#34;color:red;\u0026#34;\u0026gt;This is my first CSS example\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; å±æ€§å’Œå€¼ åœ¨ css ä¸­ï¼Œå±æ€§å’Œå€¼éƒ½æ˜¯åŒºåˆ†å¤§å°å†™çš„ã€‚\r\rå‡½æ•° å¤§å¤šæ•°å€¼éƒ½æ˜¯ç®€å•çš„å…³é”®å­—æˆ–æ•°å€¼ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›å¯èƒ½çš„å€¼ä»¥å‡½æ•°çš„å½¢å¼å‡ºç°ã€‚ä¾‹å¦‚ calc() å‡½æ•°ã€transformå±æ€§ä½¿ç”¨çš„ rotate() å‡½æ•°ã€‚\nè§„åˆ™ æœ‰äº› @rules è§„åˆ™å¾ˆç®€å•ï¼Œæœ‰è§„åˆ™åå’Œå€¼ã€‚ä¾‹å¦‚ï¼Œè¦å°†é¢å¤–çš„æ ·å¼è¡¨å¯¼å…¥ä¸» CSS æ ·å¼è¡¨ï¼Œå¯ä»¥ä½¿ç”¨ @importï¼š\n@import \u0026#39;styles2.css\u0026#39;; è¿˜æœ‰ä¸€ä¸ªæœ€å¸¸è§çš„ @rules ä¹‹ä¸€æ˜¯ @mediaï¼Œå®ƒå…è®¸ä½¿ç”¨åª’ä½“æŸ¥è¯¢æ¥åº”ç”¨ CSSï¼Œä»…å½“æŸäº›æ¡ä»¶æˆç«‹ï¼ˆä¾‹å¦‚ï¼Œå½“å±å¹•åˆ†è¾¨ç‡é«˜äºæŸä¸€æ•°é‡ï¼Œæˆ–å±å¹•å®½åº¦å¤§äºæŸä¸€å®½åº¦æ—¶ï¼‰ã€‚\nbody { background-color: pink; } @media (min-width: 30em) { body { background-color: blue; } } é€Ÿè®°å±æ€§ ä¸€äº›å¸¸ç”¨çš„ï¼š\ndiv { padding: 10px 15px 15px 5px; } ä¸è¿™å››è¡Œä»£ç æ˜¯ç­‰ä»·çš„ï¼š\ndiv { padding-top: 10px; padding-right: 15px; padding-bottom: 15px; padding-left: 5px; } div { background: red url(bg-graphic.png) 10px 10px repeat-x fixed; } ä¸è¿™äº”è¡Œä»£ç æ˜¯ç­‰ä»·çš„ï¼š\ndiv { background-color: red; background-image: url(bg-graphic,png); background-position: 10px 10px; background-repeat: repeat-x; background-attachment: fixed; } 4. CSS å¦‚ä½•è¿è¡Œ CSSè¿è¡Œè¿‡ç¨‹\r ä¸€ä¸ªçœŸå®çš„ DOM æ¡ˆä¾‹ ç°åœ¨é€šè¿‡ä¸€ä¸ª HTML ç‰‡æ®µæ¥äº†è§£ HTML æ€ä¹ˆè½¬åŒ–æˆ DOM\n\u0026lt;p\u0026gt; Let\u0026#39;s use: \u0026lt;span\u0026gt;Cascading\u0026lt;/span\u0026gt; \u0026lt;span\u0026gt;Style\u0026lt;/span\u0026gt; \u0026lt;span\u0026gt;Sheets\u0026lt;/span\u0026gt; \u0026lt;/p\u0026gt; å¯¹åº”æ ‘å½¢ç»“æ„ä¸ºï¼š\nP â”œâ”€ \u0026#34;Let\u0026#39;s use:\u0026#34; â”œâ”€ SPAN | â””â”€ \u0026#34;Cascading\u0026#34; â”œâ”€ SPAN | â””â”€ \u0026#34;Style\u0026#34; â””â”€ SPAN â””â”€ \u0026#34;Sheets\u0026#34; å½“æµè§ˆå™¨é‡åˆ°æ— æ³•è§£æçš„ CSS ä»£ç ä¼šå‘ç”Ÿä»€ä¹ˆ æµè§ˆå™¨ä»€ä¹ˆä¹Ÿä¸ä¼šåšï¼Œç»§ç»­è§£æä¸‹ä¸€ä¸ª CSS æ ·å¼ã€‚\nç›¸ä¼¼çš„ï¼Œå½“æµè§ˆå™¨é‡åˆ°æ— æ³•è§£æçš„é€‰æ‹©å™¨çš„æ—¶å€™ï¼Œä»–ä¼šç›´æ¥å¿½ç•¥æ•´ä¸ªé€‰æ‹©å™¨è§„åˆ™ï¼Œç„¶åè§£æä¸‹ä¸€ä¸ª CSS é€‰æ‹©å™¨ã€‚\nå› æ­¤ï¼Œå½“ä¸ºä¸€ä¸ªå…ƒç´ æŒ‡å®šå¤šä¸ª CSS æ ·å¼çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šåŠ è½½æ ·å¼è¡¨ä¸­çš„æœ€åçš„ CSS ä»£ç è¿›è¡Œæ¸²æŸ“ï¼Œæ­£å› ä¸ºå¦‚æ­¤ï¼Œå¯ä»¥ä¸ºåŒä¸€ä¸ªå…ƒç´ æŒ‡å®šå¤šä¸ª CSS æ ·å¼æ¥è§£å†³æœ‰äº›æµè§ˆå™¨ä¸å…¼å®¹æ–°ç‰¹æ€§çš„é—®é¢˜ã€‚\n5. å±‚å ä¸ç»§æ‰¿ å†²çªè§„åˆ™ å±‚å  å½“åº”ç”¨ä¸¤æ¡åŒçº§åˆ«çš„è§„åˆ™åˆ°ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œå†™åœ¨åé¢çš„å°±æ˜¯å®é™…ä½¿ç”¨çš„è§„åˆ™ã€‚\nä¼˜å…ˆçº§ å†…è” \u0026gt; id \u0026gt; class \u0026gt; tag\nç»§æ‰¿ ä¸€äº›è®¾ç½®åœ¨çˆ¶å…ƒç´ ä¸Šçš„ css å±æ€§æ˜¯å¯ä»¥è¢«å­å…ƒç´ ç»§æ‰¿çš„ï¼Œæœ‰äº›åˆ™ä¸èƒ½ã€‚\nä¾‹å¦‚ color ä¼šç»§æ‰¿ï¼Œä½† width ä¸ä¼šç»§æ‰¿ã€‚å› ä¸ºå¦‚æœå¤å…ƒç´ çš„ width æ˜¯50%ï¼Œåä»£ç»§æ‰¿ widthï¼Œé‚£ CSS å°±ä¼šå¾ˆéš¾ä½¿ç”¨äº†ï¼\næ§åˆ¶ç»§æ‰¿ CSS ä¸ºæ§åˆ¶ç»§æ‰¿æä¾›äº†å››ä¸ªç‰¹æ®Šçš„é€šç”¨å±æ€§å€¼ã€‚æ¯ä¸ª css å±æ€§éƒ½æ¥æ”¶è¿™äº›å€¼ã€‚\ninheritï¼šä½¿è¯¥å…ƒç´ å±æ€§å’Œçˆ¶å…ƒç´ ç›¸åŒã€‚å³ï¼šå¼€å¯ç»§æ‰¿ã€‚\ninitialï¼šè®¾ç½®ä¸ºå…ƒç´ å±æ€§çš„åˆå§‹é»˜è®¤å€¼ï¼Œé»˜è®¤å€¼ç”±å®˜æ–¹ CSS è§„èŒƒå®šä¹‰ã€‚å¦‚æœæ²¡æœ‰é»˜è®¤å€¼ä¸”è¯¥å±æ€§æ˜¯è‡ªç„¶ç»§æ‰¿çš„ï¼Œé‚£ä¹ˆä¼šè®¾ç½®ä¸º inheritã€‚\nunsetï¼šé‡ç½®ä¸ºè‡ªç„¶å€¼ï¼Œå³ï¼šå¦‚æœå±æ€§æ˜¯è‡ªç„¶ç»§æ‰¿é‚£ä¹ˆå°±æ˜¯ inheritï¼Œå¦åˆ™å’Œ initial ä¸€æ ·ã€‚\nrevert: ä½¿è¯¥å…ƒç´ æ ·å¼è¿˜åŸæˆæ ·å¼è¡¨ä¸­å®šä¹‰çš„å…ƒç´ å±æ€§çš„é»˜è®¤å€¼ã€‚è‹¥ç”¨æˆ·å®šä¹‰æ ·å¼è¡¨ä¸­æ˜¾å¼è®¾ç½®ï¼Œåˆ™æŒ‰æ­¤è®¾ç½®ï¼Œå¦åˆ™ï¼ŒæŒ‰æµè§ˆå™¨å®šä¹‰æ ·å¼è¡¨ä¸­çš„æ ·å¼è®¾ç½®ï¼Œå¦åˆ™ï¼Œç­‰ä»·äº unsetã€‚\n é€šä¿—è§£é‡Šå°±æ˜¯ï¼š\n è®¾ç½®äº† inherit å°±æ˜¯ç»§æ‰¿æ¥è‡ªç¥–ä¸Šçš„ä¸œè¥¿ã€‚ è®¾ç½®äº† initial å°±æ˜¯æŠ›å¼ƒç¥–ä¸Šçš„ä¸œè¥¿å¦èµ·ç‚‰ç¶ä»é»˜è®¤å€¼å¼€å§‹ï¼Œå¦‚æœæ²¡æœ‰é»˜è®¤å€¼ï¼Œå°±æ¥ç€ç»§æ‰¿ç¥–ä¸Šçš„ä¸œè¥¿ã€‚ è®¾ç½®äº† unset å°±æ˜¯æˆ‘ä¸å‘è¡¨æ„è§ï¼Œæœ¬æ¥æ˜¯ç»§æ‰¿å°±ç»§æ‰¿ï¼Œæœ¬æ¥æ˜¯é»˜è®¤å°±é»˜è®¤ã€‚ è®¾ç½®äº† revert å°±æ˜¯æ¨ç¿»ä¸€åˆ‡ï¼Œä»é»˜è®¤æ ·å¼è¡¨é‡æ–°å¼€å§‹ã€‚   é‡è®¾æ‰€æœ‰å±æ€§å€¼ CSS çš„ shorthand å±æ€§ all å¯ä»¥ç”¨äºåŒæ—¶å°†è¿™äº›ç»§æ‰¿å€¼ä¸­çš„ä¸€ä¸ªåº”ç”¨äºï¼ˆå‡ ä¹ï¼‰æ‰€æœ‰å±æ€§ã€‚å®ƒçš„å€¼å¯ä»¥æ˜¯å…¶ä¸­ä»»æ„ä¸€ä¸ª(inherit, initial, unset, or revert)ã€‚è¿™æ˜¯ä¸€ç§æ’¤é”€å¯¹æ ·å¼æ‰€ä½œæ›´æ”¹çš„ç®€ä¾¿æ–¹æ³•ï¼Œä»¥ä¾¿å›åˆ°ä¹‹å‰å·²çŸ¥çš„èµ·ç‚¹ã€‚\n.fix-this { all: unset; } ","date":"2021-05-16","permalink":"/zh-cn/posts/webnotes/learn_css/","series":["å‰ç«¯"],"tags":["CSS"],"title":"å­¦ä¹ CSS"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"Pythonçš„ä¸€äº›ä½¿ç”¨æŠ€å·§å’Œæœ‰è¶£çš„åº“\n 1. dataclasses  python3.7å¼•å…¥çš„å†…ç½®åº“ï¼Œå®ç°æ•°æ®ç±»ï¼Œå¯ä»¥åˆ©ç”¨ä¸Šå†…ç½®çš„ç±»å‹æç¤º\n ä½¿ç”¨æ–¹æ³•ï¼š\nimport dataclasses as dc @dc.dataclass class Person: name: str # ç®€å•è¯´æ˜ç±»å‹ age: int = 0 # è®¾ç½®é»˜è®¤å€¼ sex: str = dc.field(default=\u0026#39;male\u0026#39;, repr=False) # é™¤äº†é»˜è®¤å€¼ï¼Œè¿˜å¯é€šè¿‡reprè®¾ç½®æ˜¯å¦æ˜¾ç¤ºåœ¨å­—ç¬¦ä¸²è¾“å‡ºä¸­ # åˆ›å»ºä¸€ä¸ªPersonå®ä¾‹ p1 = Person(\u0026#39;zhangyan\u0026#39;, 25, \u0026#39;female\u0026#39;) print(p1) # Person(name=\u0026#39;zhangyan\u0026#39;, age=25, sex=\u0026#39;female\u0026#39;) è¿˜å¯ä»¥é€šè¿‡asdictå’Œastupleå°†å…¶è½¬æ¢ä¸ºdictå’Œtupleç±»å‹ï¼š\nprint(dc.asdict(p1)) # {\u0026#39;name\u0026#39;: \u0026#39;zhangyan\u0026#39;, \u0026#39;age\u0026#39;: 25, \u0026#39;sex\u0026#39;: \u0026#39;female\u0026#39;} print(dc.astuple(p1)) # (\u0026#39;zhangyan\u0026#39;, 25, female) dictç±»å‹è½¬ä¸ºdataclass\np2 = {\u0026#39;name\u0026#39;: \u0026#39;zhangyan\u0026#39;, \u0026#39;age\u0026#39;: 25, \u0026#39;sex\u0026#39;: \u0026#39;female\u0026#39;} print(Person(**p2)) # Person(name=\u0026#39;zhangyan\u0026#39;, age=25, sex=\u0026#39;female\u0026#39;)  2. namedtuple  ç»™å…ƒç»„å‘½åï¼Œå…ƒç»„ä¸­çš„æ¯ä¸€é¡¹ä¹Ÿå¯ä»¥å‘½åï¼›\nåˆ›å»ºçš„å…ƒç»„å®ä¾‹å†…çš„å€¼æ˜¯ä¸èƒ½æ›´æ”¹çš„ï¼Œä½†å¯ä»¥ä½¿ç”¨_replace()æ–¹æ³•æ›´æ”¹å€¼åè¿”å›ä¸€ä¸ªæ–°çš„å…ƒç»„ï¼›\nä¹Ÿå¯ä»¥å½“ä½œä¸€è¡Œä»£ç å®šä¹‰ä¸€ä¸ªç±»ï¼›\nä¹Ÿå¯ä»¥å½“ä½œæ•°æ®ç±»ç”¨ï¼Œä½†æ˜¯æ— æ³•ä½¿ç”¨å†…ç½®çš„ç±»å‹æç¤ºï¼Œä¸å¦‚dataclassesã€‚\n ä½¿ç”¨æ–¹æ³•ï¼š\nfrom collections import namedtuple Color = namedtuple(\u0026#39;Color\u0026#39;, \u0026#39;r g b a\u0026#39;, defaults=[1.0]) # \u0026#39;r g b a\u0026#39;è¿˜å¯ä»¥å†™ä¸º\u0026#39;r, g, b, a\u0026#39;æˆ–[\u0026#39;r\u0026#39;, \u0026#39;g\u0026#39;, \u0026#39;b\u0026#39;, \u0026#39;a\u0026#39;] red = Color(255, 0, 0) # çº¢è‰² green = Color(0, 255, 0) # ç»¿è‰² blue = Color(0, 0, 255) # è“è‰² half_blue = Color(0, 0, 255, 0.5) # é€æ˜åº¦ä¸º50%çš„è“è‰² print(half_blue) # Color(r=0, g=0, b=255, a=0.5) half_blue = half_blue._replace(g=233) print(half_blue) orange = Color._make([224, 142, 0, 1]) # ä½¿ç”¨_makeå‡½æ•°é€šè¿‡ä¼ å…¥ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡æ¥æ„å»ºå®ä¾‹ï¼Œè®¾ç½®äº†é»˜è®¤å€¼çš„é¡¹ä¾æ—§ä¸èƒ½çœç•¥ print(orange) print(orange._asdict()) # OrderedDict([(\u0026#39;r\u0026#39;, 224), (\u0026#39;g\u0026#39;, 142), (\u0026#39;b\u0026#39;, 0), (\u0026#39;a\u0026#39;, 1)]) print(tuple(orange)) # (224, 142, 0, 1)  3. threading  å®ç°ç±»ä¼¼ JavaScript ä¸­çš„ setimeout å»¶è¿Ÿè¿è¡Œçš„æ•ˆæœ\n ä½¿ç”¨æ–¹æ³•ï¼š\nimport threading def settimeout(func, delay, *args, **kwargs): threading.Timer(delay, func, args, kwargs).start() # éš”ä¸€ç§’è¾“å‡ºä¸€ä¸ª iï¼Œä¾æ¬¡ä¸º 0 1 2 3 4 for i in range(5): settimeout(lambda x: print(x), i + 1, i) # éš”ä¸€ç§’è¾“å‡ºä¸€ä¸ª iï¼Œä¾æ¬¡ä¸º 4 4 4 4 4 for i in range(5): settimeout(lambda x: print(i), i + 1, i) # ä¸€ç§’åä¸€èµ·è¾“å‡ºï¼Œä¾æ¬¡ä¸º 44444 for i in range(5): settimeout(lambda x: print(i, end=\u0026#39;\u0026#39;), 1, i) # ä¸€ç§’åä¸€èµ·è¾“å‡ºï¼Œé¡ºåºéšæœºï¼Œä¾‹å¦‚ï¼š43201ã€12340 for i in range(5): settimeout(lambda x: print(x, end=\u0026#39;\u0026#39;), 1, i)  4. logging  å®ç°æ—¥å¿—åŠŸèƒ½ï¼Œå¯ä»¥è®¾ç½®æ˜¾ç¤ºçº§åˆ«ä»¥åŠä¿å­˜åˆ°æ—¥å¿—æ–‡ä»¶\n ä½¿ç”¨æ–¹æ³•ï¼š\nimport logging # é…ç½®loggingé»˜è®¤å‚æ•° logging.basicConfig(level=logging.DEBUG, format=\u0026#39;%(asctime)s- %(name)s- %(levelname)s- %(message)s\u0026#39;) # è·å–logger logger = logging.getLogger(__name__) # è®¾ç½®loggerçº§åˆ«ï¼Œçº§åˆ«é¡ºåºï¼šDEBUG -\u0026gt; INFO -\u0026gt; WARNING -\u0026gt; ERROR logger.setLevel(level=logging.DEBUG) # è·å–ä¿å­˜æ—¥å¿—æ–‡ä»¶çš„handler handler = logging.FileHandler(\u0026#39;log.txt\u0026#39;) # è®¾ç½®handlerçº§åˆ« handler.setLevel(logging.INFO) # è·å–formatter formatter = logging.Formatter(\u0026#39;%(asctime)s- %(name)s- %(levelname)s- %(message)s\u0026#39;) # ç»™handlerè®¾ç½®formatter handler.setFormatter(formatter) # ç»™loggeræ·»åŠ handler logger.addHandler(handler) # æ‰§è¡Œä¸€äº›æµ‹è¯• logger.info(\u0026#39;start print log\u0026#39;) logger.debug(\u0026#39;do something\u0026#39;) logger.warning(\u0026#39;something maybe fail\u0026#39;) logger.info(\u0026#39;finish\u0026#39;) ","date":"2021-05-12","permalink":"/zh-cn/posts/pythons/python_tips/","series":["python"],"tags":["dataclasses","namedtuple","threading","logging"],"title":"Pythonå°è´´å£«"},{"categories":["å¾…åŠ"],"content":"é¢è¯•å¤§å‚éœ€è¦äº†è§£çš„çŸ¥è¯†ç‚¹\n1. Webpack VS Vite åŸç†   è°ˆè°ˆ AST è¯­æ³•æ ‘ï¼Ÿ è°ˆè°ˆ babel çš„ä½œç”¨ï¼Ÿ å¦‚ä½•æ”¶é›†ä»£ç ä¾èµ–ï¼Ÿ ES Module ä¸ CMD åŒºåˆ«ï¼Ÿ   å¦‚ä½•ææ‡‚ webpack åŸç†å‘¢ï¼Ÿæ‰‹å†™ä¸€ä¸ª mini-webpack æ˜¯éå¸¸ç›´æ¥çš„æ–¹æ³•ï¼Œæ¯”å»çœ‹åŸç†è§£ææ–‡ç« æ•ˆç‡é«˜å¤šäº†ã€‚\r\réœ€è¦åšçš„æœ‰ï¼š\n é€ ä¸ªè½®å­ - æ‰‹å†™ Webpack ä»€ä¹ˆæ˜¯æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ å¦‚ä½•åˆ†ææ¨¡å—çš„ä¾èµ–å…³ç³» å¦‚ä½•å°† ES6 è½¬æ¢ä¸º ES5 è¯»æ‡‚ bundle æ–‡ä»¶ä¸­çš„å¤©ä¹¦ä»£ç  è°ä¼šæ˜¯ä¸‹ä¸€ä¸ª Webpack ","date":"2021-05-06","permalink":"/zh-cn/posts/webnotes/questions/","series":["å‰ç«¯"],"tags":["é¢è¯•é—®é¢˜"],"title":"å¾…å­¦ä¹ çš„çŸ¥è¯†"},{"categories":["å­¦ä¹ ç¬”è®°"],"content":"MDNæ–‡æ¡£çš„HTMLå­¦ä¹ ç¬”è®°\n 1. åµŒå…¥ \u0026lt;iframe\u0026gt; å…ƒç´ \r sandboxå±æ€§ è¯¥å±æ€§éœ€è¦åœ¨å·²ç»æ”¯æŒå…¶ä»–\u0026lt;iframe\u0026gt;åŠŸèƒ½ï¼ˆä¾‹å¦‚IE 10åŠæ›´é«˜ç‰ˆæœ¬ï¼‰ä½†ç¨å¾®æ›´ç°ä»£çš„æµè§ˆå™¨ä¸Šæ‰èƒ½å·¥ä½œï¼Œè¯¥å±æ€§å¯ä»¥æé«˜å®‰å…¨æ€§è®¾ç½®ã€‚\r\ræ³¨æ„ï¼šä¸ºäº†æé«˜é€Ÿåº¦ï¼Œåœ¨ä¸»å†…å®¹å®ŒæˆåŠ è½½åï¼Œä½¿ç”¨JavaScriptè®¾ç½®iframeçš„srcå±æ€§æ˜¯ä¸ªå¥½ä¸»æ„ã€‚è¿™ä½¿æ‚¨çš„é¡µé¢å¯ä»¥æ›´å¿«åœ°è¢«ä½¿ç”¨ï¼Œå¹¶å‡å°‘æ‚¨çš„å®˜æ–¹é¡µé¢åŠ è½½æ—¶é—´ã€‚\r\r\u0026lt;embed\u0026gt; å’Œ \u0026lt;object\u0026gt; å…ƒç´ \r è¿™ä¸¤ä¸ªå…ƒç´ ä¸\u0026lt;iframe\u0026gt;ä¸åŒï¼Œæ˜¯ç”¨æ¥åµŒå…¥å¤šç§ç±»å‹çš„å¤–éƒ¨å†…å®¹çš„é€šç”¨åµŒå…¥å·¥å…·ï¼ŒåŒ…æ‹¬åƒJavaå°ç¨‹åºå’ŒFlashï¼ŒPDFï¼ˆå¯åœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºä¸ºä¸€ä¸ªPDFæ’ä»¶ï¼‰è¿™æ ·çš„æ’ä»¶æŠ€æœ¯ï¼Œç”šè‡³åƒè§†é¢‘ï¼ŒSVGå’Œå›¾åƒçš„å†…å®¹ã€‚\næ’ä»¶æ˜¯ä¸€ç§å¯¹æµè§ˆå™¨åŸç”Ÿæ— æ³•è¯»å–çš„å†…å®¹æä¾›è®¿é—®æƒé™çš„è½¯ä»¶\r\r 2. çŸ¢é‡å›¾å½¢SVG\r å¿«æ·æ–¹å¼ï¼š\u0026lt;img\u0026gt; ä½¿ç”¨ src å±æ€§è®¾ç½®SVGè·¯å¾„\nç–‘éš¾è§£ç­”å’Œè·¨æµè§ˆå™¨æ”¯æŒ å¯¹äºä¸æ”¯æŒSVGï¼ˆIE 8åŠæ›´ä½ç‰ˆæœ¬ï¼ŒAndroid 2.3 åŠæ›´ä½ç‰ˆæœ¬ï¼‰çš„æµè§ˆå™¨ï¼Œå¯ä»¥ä» src å±æ€§å¼•ç”¨ PNG æˆ– JPG ï¼Œå¹¶ä½¿ç”¨ srcset å±æ€§ åªæœ‰æœ€è¿‘çš„æµè§ˆå™¨æ‰èƒ½è¯†åˆ«ï¼‰æ¥å¼•ç”¨ SVG ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»…æ”¯æŒæµè§ˆå™¨å°†åŠ è½½ SVG - è¾ƒæ—§çš„æµè§ˆå™¨å°†åŠ è½½ PNG ï¼š\n\u0026lt;img src=\u0026#34;equilateral.png\u0026#34; alt=\u0026#34;triangle with equal sides\u0026#34; srcset=\u0026#34;equilateral.svg\u0026#34;\u0026gt; è¿˜å¯ä»¥ä½¿ç”¨ SVG ä½œä¸º CSS èƒŒæ™¯å›¾åƒï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæ—§ç‰ˆæµè§ˆå™¨ä¼šåšæŒä»–ä»¬ç†è§£çš„ PNG ï¼Œè€Œè¾ƒæ–°çš„æµè§ˆå™¨å°†åŠ è½½ SVG ï¼š\n.svg { background: url(\u0026#34;fallback.png\u0026#34;) no-repeat center; background-image: url(\u0026#34;image.svg\u0026#34;); background-size: contain; } åƒä¸Šé¢æè¿°çš„\u0026lt;img\u0026gt;æ–¹æ³•ä¸€æ ·ï¼Œä½¿ç”¨ CSS èƒŒæ™¯å›¾åƒæ’å…¥ SVG æ„å‘³ç€å®ƒä¸èƒ½è¢« JavaScript æ“ä½œï¼Œå¹¶ä¸”ä¹Ÿå—åˆ°ç›¸åŒçš„ CSS é™åˆ¶ã€‚\nåœ¨HTMLä¸­å¼•å…¥SVGä»£ç   å¯ä»¥åœ¨æ–‡æœ¬ç¼–è¾‘å™¨ä¸­æ‰“å¼€SVGæ–‡ä»¶ï¼Œå¤åˆ¶SVGä»£ç ï¼Œå¹¶å°†å…¶ç²˜è´´åˆ°HTMLæ–‡æ¡£ä¸­ - è¿™æœ‰æ—¶ç§°ä¸ºå°†SVGå†…è”æˆ–å†…è”SVGã€‚ç¡®ä¿æ‚¨çš„SVGä»£ç åœ¨\u0026lt;svg\u0026gt;\u0026lt;/svg\u0026gt;æ ‡ç­¾ä¸­ï¼ˆä¸è¦åœ¨å¤–é¢æ·»åŠ ä»»ä½•å†…å®¹ï¼‰ã€‚\n \u0026lt;svg width=\u0026#34;300\u0026#34; height=\u0026#34;200\u0026#34;\u0026gt; \u0026lt;rect width=\u0026#34;100%\u0026#34; height=\u0026#34;100%\u0026#34; fill=\u0026#34;green\u0026#34; /\u0026gt; \u0026lt;/svg\u0026gt; ä¼˜ç‚¹  å°† SVG å†…è”å‡å°‘ HTTP è¯·æ±‚ï¼Œå¯ä»¥å‡å°‘åŠ è½½æ—¶é—´ã€‚ å¯ä»¥ä¸º SVG å…ƒç´ åˆ†é…classå’Œidï¼Œå¹¶ä½¿ç”¨ CSS ä¿®æ”¹æ ·å¼ã€‚ å†…è” SVG æ˜¯å”¯ä¸€å¯ä»¥åœ¨ SVG å›¾åƒä¸Šä½¿ç”¨ CSS äº¤äº’ï¼ˆå¦‚:focusï¼‰å’Œ CSS åŠ¨ç”»çš„æ–¹æ³•ï¼ˆå³ä½¿åœ¨å¸¸è§„æ ·å¼è¡¨ä¸­ï¼‰ã€‚ å¯ä»¥é€šè¿‡å°† SVG æ ‡è®°åŒ…åœ¨ \u0026lt;a\u0026gt; å…ƒç´ ä¸­ï¼Œä½¿å…¶æˆä¸ºè¶…é“¾æ¥ã€‚  ç¼ºç‚¹  è¿™ç§æ–¹æ³•åªé€‚ç”¨äºåœ¨ä¸€ä¸ªåœ°æ–¹ä½¿ç”¨çš„ SVG ã€‚å¤šæ¬¡ä½¿ç”¨ä¼šå¯¼è‡´èµ„æºå¯†é›†å‹ç»´æŠ¤ï¼ˆresource-intensive maintenanceï¼‰ã€‚ é¢å¤–çš„ SVG ä»£ç ä¼šå¢åŠ  HTML æ–‡ä»¶çš„å¤§å°ã€‚ æµè§ˆå™¨ä¸èƒ½åƒç¼“å­˜æ™®é€šå›¾ç‰‡ä¸€æ ·ç¼“å­˜å†…è” SVG ã€‚ å¯èƒ½ä¼šåœ¨ \u0026lt;foreignObject\u0026gt; å…ƒç´ ä¸­åŒ…å«å›é€€ï¼Œä½†æ”¯æŒ SVG çš„æµè§ˆå™¨ä»ç„¶ä¼šä¸‹è½½ä»»ä½•åå¤‡å›¾åƒã€‚è€ƒè™‘ä¸€ä¸‹ä»…ä»…ä¸ºæ”¯æŒè¿‡æ—¶çš„æµè§ˆå™¨ï¼Œè€Œå¢åŠ é¢å¤–å¼€é”€æ˜¯å¦çœŸçš„å€¼å¾—ã€‚  ç¤ºä¾‹ éå…¥æ™ºç³ï¼ä¸Šå‹¾æ‹³ï¼     3. å“åº”å¼å›¾ç‰‡  ç›®çš„ï¼šå­¦ä¹ å¦‚ä½•ä½¿ç”¨ srcset ä»¥åŠ \u0026lt;picture\u0026gt; å…ƒç´ ï¼Œæ¥å®ç°ç½‘é¡µä¸­çš„å“åº”å¼å›¾ç‰‡å¤„ç†æ–¹æ³•ã€‚\n æ–°ç‰¹æ€§ srcset / sizes / \u0026lt;picture\u0026gt; â€”â€” éƒ½å·²ç»è¢«æ–°ç‰ˆæœ¬çš„ç°ä»£æµè§ˆå™¨å’Œç§»åŠ¨æµè§ˆå™¨æ”¯æŒã€‚\r\r åˆ†è¾¨ç‡åˆ‡æ¢ï¼šä¸åŒçš„å°ºå¯¸ ä¸¤ä¸ªæ–°å±æ€§ï¼šsrcset å’Œ sizes æä¾›é¢å¤–çš„èµ„æºå›¾åƒå’Œæç¤ºã€‚\n  æµè§ˆå™¨æ ¹æ®è®¾å¤‡å®½åº¦åˆ° sizes ä¸­æ‰¾åˆ°ä¸è¶…è¿‡ max-width çš„é‚£ä¸€é¡¹ æ ¹æ®æ­¤é¡¹åé¢çš„åƒç´ å€¼ aï¼Œåˆ° srcset ä¸­æ‰¾åˆ°ä¸å°äºè¿™ä¸ªå€¼çš„æœ€æ¥è¿‘çš„ b å°† srcset å¯¹åº”çš„å›¾ç‰‡è·¯å¾„ä½œä¸ºéœ€è¦æ˜¾ç¤ºçš„å›¾ç‰‡è·¯å¾„ï¼Œä»¥è¾¾åˆ°çœæµç›®çš„   \u0026lt;img srcset=\u0026#34;/images/posts/webnotes/learn_html/water-320w.jpg 320w, /images/posts/webnotes/learn_html/water-480w.jpg 480w, /images/posts/webnotes/learn_html/water-800w.jpg 800w, /images/posts/webnotes/learn_html/water-1280w.jpg 1280w\u0026#34; sizes = \u0026#34;(max-width: 424px) 320px, (max-width: 767px) 460px, (max-width: 991px) 800px, 1280px\u0026#34; src=\u0026#34;/images/posts/webnotes/learn_html/water-1280w.jpg\u0026#34; alt=\u0026#34;Drink more water\u0026#34;\u0026gt; æ•ˆæœï¼š\næ€»ç»“ï¼šè¯¥æ–¹å¼ä¼šä½¿æµè§ˆå™¨æ ¹æ®è®¾å¤‡å±å¹•å¤§å°ä¸‹è½½åˆé€‚çš„å›¾ç‰‡ï¼Œæ¥çœæµã€‚\r\r åˆ†è¾¨ç‡åˆ‡æ¢ï¼šç›¸åŒçš„å°ºå¯¸ï¼Œä¸åŒçš„åˆ†è¾¨ç‡ å¦‚æœæƒ³æ”¯æŒå¤šåˆ†è¾¨ç‡æ˜¾ç¤ºï¼Œä½†å¸Œæœ›æ¯ä¸ªäººåœ¨å±å¹•ä¸Šçœ‹åˆ°çš„å›¾ç‰‡çš„å®é™…å°ºå¯¸æ˜¯ç›¸åŒçš„ï¼Œä½¿ç”¨ srcset å’Œ x è¯­æ³•ç»“åˆâ€”â€”ä¸€ç§æ›´ç®€å•çš„è¯­æ³•â€”â€”è€Œä¸ç”¨ sizes ï¼Œæ¥é€‰æ‹©é€‚å½“åˆ†è¾¨ç‡çš„å›¾ç‰‡ã€‚\n  æµè§ˆå™¨æ ¹æ®è®¾å¤‡çš„ DPRï¼ˆå³è®¾å¤‡åƒç´ æ¯”ï¼‰ï¼Œä» srcset ä¸­æ‰¾åˆ°åƒç´ æ¯”æœ€æ¥è¿‘çš„å›¾ç‰‡è·¯å¾„ å°†æ­¤è·¯å¾„çš„å›¾ç‰‡æ˜¾ç¤ºå‡ºæ¥ï¼Œå›¾ç‰‡çš„å¤§å°ç”± CSS æ ·å¼è¡¨ä¸­çš„ width å€¼æ¥å®šä¹‰ æµè§ˆå™¨ä¼šä¿è¯å›¾ç‰‡åœ¨ä»»ä½•è®¾å¤‡ä¸Šçš„ç‰©ç†å¤§å°ä¸€è‡´   \u0026lt;img srcset=\u0026#34;/images/posts/webnotes/learn_html/mercy-320w.png, /images/posts/webnotes/learn_html/mercy-480w.png 1.5x, /images/posts/webnotes/learn_html/mercy-800w.png 2.5x, /images/posts/webnotes/learn_html/mercy-1280w.png 4x\u0026#34; src=\u0026#34;/images/posts/webnotes/learn_html/mercy-1280w.png\u0026#34; alt=\u0026#34;Overwatch mercy\u0026#34; style=\u0026#34;width: 180px;\u0026#34;\u0026gt; æ•ˆæœï¼š\næ€»ç»“ï¼šè¯¥æ–¹å¼ä¼šä½¿æµè§ˆå™¨æ ¹æ®è®¾å¤‡å±å¹•åƒç´ å¯†åº¦æ¥å†³å®šä½¿ç”¨å“ªä¸ªç‰ˆæœ¬çš„å›¾ç‰‡ï¼Œå¹¶æ ¹æ® `width` çš„å€¼ä¿è¯å›¾ç‰‡åœ¨æ‰€æœ‰è®¾å¤‡ä¸Šå®é™…å¤§å°ä¸€è‡´ã€‚\r\r ç¾æœ¯è®¾è®¡  ä½¿ç”¨ \u0026lt;picture\u0026gt; å…ƒç´ å®ç°å½“å±å¹•ç¼©å°æ—¶åŠ¨æ€å¾—ä½¿ç”¨å¯¹åº”åƒç´ çš„å›¾ç‰‡ï¼Œå°†å†…å®¹é€‚åº”å°å±å¹•è§‚çœ‹ï¼Œä¾‹å¦‚äººç‰©æ›´å¤§çš„ä½åˆ†è¾¨ç‡å›¾ç‰‡ã€‚\n \u0026lt;picture\u0026gt; \u0026lt;!-- å°æ‰‹æœº --\u0026gt; \u0026lt;source media=\u0026#34;(max-width: 424px)\u0026#34; srcset=\u0026#34;/images/posts/webnotes/learn_html/mercy-320w.png\u0026#34;\u0026gt; \u0026lt;!-- å¤§æ‰‹æœº --\u0026gt; \u0026lt;source media=\u0026#34;(max-width: 767px)\u0026#34; srcset=\u0026#34;/images/posts/webnotes/learn_html/mercy-480w.png\u0026#34;\u0026gt; \u0026lt;!-- å¹³æ¿ç”µè„‘ç«–å± --\u0026gt; \u0026lt;source media=\u0026#34;(max-width: 991px)\u0026#34; srcset=\u0026#34;/images/posts/webnotes/learn_html/mercy-800w.png\u0026#34;\u0026gt; \u0026lt;!-- å¹³æ¿ç”µè„‘æ¨ªå± / ç¬”è®°æœ¬ç”µè„‘ --\u0026gt; \u0026lt;source srcset=\u0026#34;/images/posts/webnotes/learn_html/mercy-1280w.png\u0026#34;\u0026gt; \u0026lt;img src=\u0026#34;/images/posts/webnotes/learn_html/mercy-1280w.jpg\u0026#34; alt=\u0026#34;Overwatch mercy\u0026#34;\u0026gt; \u0026lt;/picture\u0026gt; æ•ˆæœï¼ˆè°ƒæ•´æµè§ˆå™¨å®½åº¦ä»¥æŸ¥çœ‹å˜åŒ–ï¼‰ï¼š\n   åº”è¯¥ä»…ä»…åœ¨ç¾æœ¯è®¾è®¡åœºæ™¯ä¸‹ä½¿ç”¨mediaå±æ€§ï¼›å½“ä½¿ç”¨mediaæ—¶ï¼Œä¸è¦åœ¨sizeså±æ€§ä¸­ä¹Ÿæä¾›åª’ä½“æ¡ä»¶ã€‚\r\r ä¸ºä»€ä¹ˆä¸èƒ½ä½¿ç”¨ CSS æˆ– JavaScript æ¥åšåˆ°è¿™ä¸€æ•ˆæœï¼Ÿ å¦‚æœä½¿ç”¨CSSæˆ–JavaScriptæ¥å®ç°è¿™ä¸€æ•ˆæœï¼Œåœ¨è¿™ä¹‹å‰åŸå§‹å›¾åƒå·²ç»è¢«åŠ è½½äº†ï¼Œç„¶åCSSæˆ–JavaScriptåˆåŠ è½½äº†ä¸€ä¸ªå°çš„å›¾åƒï¼Œåè€Œæµªè´¹å‘äº†æµé‡ã€‚\n å¤§èƒ†ä½¿ç”¨ç°ä»£å›¾åƒæ ¼å¼ æ–°å›¾åƒæ ¼å¼ï¼ˆä¾‹å¦‚ WebP å’Œ JPEG-2000ï¼‰å¯ä»¥åœ¨æœ‰é«˜è´¨é‡çš„åŒæ—¶æœ‰è¾ƒä½çš„æ–‡ä»¶å¤§å°ã€‚ä½†æ˜¯æµè§ˆå™¨æ”¯æŒæƒ…å†µä¸åŒã€‚\nå¯ä»¥ä½¿ç”¨ \u0026lt;picture\u0026gt; æ¥ç»§ç»­æ»¡è¶³è€å¼æµè§ˆå™¨çš„éœ€è¦ã€‚å¯ä»¥åœ¨ type å±æ€§ä¸­æä¾› MIME ç±»å‹ï¼Œè¿™æ ·æµè§ˆå™¨å°±èƒ½ç«‹å³æ‹’ç»ä¸æ”¯æŒçš„ç±»å‹ï¼š\n\u0026lt;picture\u0026gt; \u0026lt;source type=\u0026#34;image/svg+xml\u0026#34; srcset=\u0026#34;***.svg\u0026#34;\u0026gt; \u0026lt;source type=\u0026#34;image/webp\u0026#34; srcset=\u0026#34;***.webp\u0026#34;\u0026gt; \u0026lt;img src=\u0026#34;***.png\u0026#34; alt=\u0026#34;example image\u0026#34;\u0026gt; \u0026lt;/picture\u0026gt;  ä¸è¦ä½¿ç”¨ media å±æ€§ï¼Œé™¤ééœ€è¦ç¾æœ¯è®¾è®¡ã€‚ åœ¨ \u0026lt;source\u0026gt; å…ƒç´ ä¸­ï¼Œåªå¯ä»¥å¼•ç”¨åœ¨ type ä¸­å£°æ˜çš„æ–‡ä»¶ç±»å‹ã€‚ å¦‚æœå¿…è¦ï¼Œå¯ä»¥åœ¨ srcset å’Œ sizes ä¸­ä½¿ç”¨é€—å·åˆ†å‰²çš„åˆ—è¡¨ã€‚ ","date":"2021-05-05","permalink":"/zh-cn/posts/webnotes/learn_html/","series":["å‰ç«¯"],"tags":["HTML"],"title":"å­¦ä¹ HTML"},{"categories":["Shortcode"],"content":"æœ¬æ–‡å±•ç¤ºäº†å¦‚æœä½¿ç”¨ alert shortcodeã€‚\n{{\u0026lt; alert \u0026#34;Message\u0026#34; [type] \u0026gt;}}  The parameter type is optional. Default to info.\n Info {{\u0026lt; alert \u0026#34;Info\u0026#34; \u0026gt;}} Info\r\rSuccess {{\u0026lt; alert \u0026#34;Success\u0026#34; success \u0026gt;}} Success\r\rWarning {{\u0026lt; alert \u0026#34;Warning\u0026#34; warning \u0026gt;}} Warning\r\rDanger {{\u0026lt; alert \u0026#34;Danger\u0026#34; danger \u0026gt;}} Danger\r","date":"2020-10-22","permalink":"/zh-cn/posts/shortcodes/alert/","series":["ç”¨æˆ·æ‰‹å†Œ"],"tags":["Alert"],"title":"Alert Shortcode"},{"categories":["Shortcode"],"content":"å…³äºå“”å“©å“”å“© shortcode çš„è¯¦ç»†ä½¿ç”¨è¯´æ˜ã€‚\nä½¿ç”¨ {{\u0026lt; bilibili \u0026#34;video id\u0026#34; \u0026gt;}} ä¾‹å­ \r","date":"2020-10-22","permalink":"/zh-cn/posts/shortcodes/bilibili/","series":null,"tags":["å“”å“©å“”å“©"],"title":"Bilibili Shortcode"},{"categories":["Shortcode"],"content":"å…³äº CodePen shortcode çš„è¯¦ç»†è¯´æ˜ã€‚\nä½¿ç”¨ {{\u0026lt; codepen \u0026#34;id\u0026#34; \u0026gt;}} ä¾‹å­ \r","date":"2020-10-22","permalink":"/zh-cn/posts/shortcodes/codepen/","series":null,"tags":["CodePen"],"title":"CodePen Shortcode"},{"categories":["Shortcode"],"content":"å…³äº JSFiddle shortcode çš„è¯¦ç»†è¯´æ˜ã€‚\nä½¿ç”¨ {{\u0026lt; jsfiddle \u0026#34;user/id\u0026#34; \u0026gt;}} ä¾‹å­ \r","date":"2020-10-22","permalink":"/zh-cn/posts/shortcodes/jsfiddle/","series":null,"tags":["JSFiddle"],"title":"JSFiddle Shortcode"},{"categories":["Shortcode"],"content":"å…³äº JSRun shortcode çš„è¯¦ç»†è¯´æ˜ã€‚\nä½¿ç”¨ {{\u0026lt; jsrun \u0026#34;id\u0026#34; \u0026gt;}} ä¾‹å­ \r","date":"2020-10-22","permalink":"/zh-cn/posts/shortcodes/jsrun/","series":null,"tags":["JSRun"],"title":"JSRun Shortcode"},{"categories":["Shortcode"],"content":"å…³äºä¼˜é…· shortcode çš„è¯¦ç»†è¯´æ˜ã€‚\nä½¿ç”¨ {{\u0026lt; youku \u0026#34;XNTQwMTgxMTE2\u0026#34; \u0026gt;}} ä¾‹å­ \r","date":"2020-10-22","permalink":"/zh-cn/posts/shortcodes/youku/","series":null,"tags":["Youku"],"title":"ä¼˜é…· Shortcode"},{"categories":["Shortcode"],"content":"å…³äºçˆ±å¥‡è‰º shortcode çš„è¯¦ç»†è¯´æ˜ã€‚\nä½¿ç”¨ {{\u0026lt; iqiyi \u0026#34;vid\u0026#34; \u0026#34;tvid\u0026#34; \u0026gt;}} ä¾‹å­ \r","date":"2020-10-22","permalink":"/zh-cn/posts/shortcodes/iqiyi/","series":null,"tags":["çˆ±å¥‡è‰º"],"title":"çˆ±å¥‡è‰º Shortcode"},{"categories":["Shortcode"],"content":"å…³äºç½‘æ˜“äº‘éŸ³ä¹ Shortcode çš„è¯¦ç»†ä½¿ç”¨è¯´æ˜ã€‚\nä½¿ç”¨ {{\u0026lt; neteasemusic \u0026#34;id\u0026#34; [auto [type]] \u0026gt;}}    Parameter Description     auto The auto controls whether to autoplay. Boolean and optional, default to false.   type The type parameter is optional. Default to 2.    ä¾‹å­ \r","date":"2020-10-22","permalink":"/zh-cn/posts/shortcodes/neteasemusic/","series":null,"tags":["ç½‘æ˜“äº‘éŸ³ä¹"],"title":"ç½‘æ˜“äº‘éŸ³ä¹ Shortcode"},{"categories":["Shortcode"],"content":"å…³äºè…¾è®¯è§†é¢‘ shortcode çš„è¯¦ç»†è¯´æ˜ã€‚\nä½¿ç”¨ {{\u0026lt; tencentvideo \u0026#34;vid\u0026#34; \u0026gt;}} ä¾‹å­ \r","date":"2020-10-22","permalink":"/zh-cn/posts/shortcodes/tencentvideo/","series":null,"tags":["è…¾è®¯è§†é¢‘"],"title":"è…¾è®¯è§†é¢‘ Shortcode"}]